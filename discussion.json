[
  {
    "id": "D_kwDONzrbkM4AeLb6",
    "title": "å¦‚ä½•åœ¨ iOS ç³»ç»Ÿä¸­è¯»å–å¸¦åŠ å¯†å°ç« çš„ PDF æ–‡ä»¶",
    "body": "åœ¨ä¸ç”µå­ç­¾ç« å…¬å¸åˆä½œæ—¶ï¼Œæˆ‘ä»¬æ”¶åˆ°äº†ä¸€ä»½å¸¦æœ‰åŠ å¯†å°ç« çš„ `PDF` æ–‡ä»¶ã€‚åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæ— è®ºé€šè¿‡ `UIWebView` è¿˜æ˜¯ `WKWebView` æ‰“å¼€ï¼Œæ–‡ä»¶ä¸­çš„åŠ å¯†å°ç« éƒ½æ— æ³•æˆåŠŸå±•ç¤ºã€‚\r\n\r\nç»è¿‡ä¸æ–­åœ°è°ƒç ”ä¸å®è·µï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚ç°åœ¨å°†è§£å†³æ–¹æ¡ˆåˆ†äº«ç»™å¤§å®¶ã€‚\r\n\r\n## å®ç°æ­¥éª¤\r\n\r\n### å‡†å¤‡å·¥ä½œ\r\n\r\né¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰å‡ ä¸ªå¸¸ç”¨çš„å®ï¼Œä»¥ä¾¿åœ¨åç»­ä»£ç ä¸­ä½¿ç”¨ï¼Œæå‡ä»£ç çš„å¯è¯»æ€§å’Œç®€æ´æ€§ï¼š\r\n\r\n```objc\r\n#define kScreenW [UIScreen mainScreen].bounds.size.width\r\n#define kScreenH [UIScreen mainScreen].bounds.size.height\r\n\r\n#define DOCUMENTS_DIRECTORY [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]\r\n```\r\n\r\n### æ·»åŠ  WKWebView\r\n\r\næˆ‘ä»¬ä½¿ç”¨ `WKWebView` æ¥åŠ è½½å’Œå±•ç¤º `PDF` æ–‡ä»¶ã€‚\r\n\r\n```objc\r\n#import <WebKit/WebKit.h>\r\n\r\nWKWebViewConfiguration *config = [[WKWebViewConfiguration alloc] init];\r\n\r\nWKUserContentController *wkUController = [[WKUserContentController alloc]init];\r\n\r\nconfig.userContentController = wkUController;\r\n\r\n// æ³¨å…¥ JS å¯¹è±¡ï¼Œåç§°ä¸º AppModel\r\n// å½“ JS é€šè¿‡ AppModel æ¥è°ƒç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ WKScriptMessageHandler ä»£ç†ä¸­æ¥æ”¶åˆ°\r\n// æ­¤å¤„æ˜¯ä¸ºäº†å¾—åˆ°PDFåŠ è½½å®Œæˆæˆ–å¤±è´¥çš„åé¦ˆ\r\n[config.userContentController addScriptMessageHandler:self name:@\"AppModel\"];\r\n\r\n// æ”¹å˜é¡µé¢å†…å®¹å®½åº¦ï¼Œé€‚é…å±å¹•å¤§å°\r\nNSString *js = @\"var meta = document.createElement('meta'); meta.setAttribute('name', 'viewport'); meta.setAttribute('content', 'width=device-width'); document.getElementsByTagName('head')[0].appendChild(meta);\";\r\n\r\nWKUserScript *wkUserScript = [[WKUserScript alloc] initWithSource:js injectionTime:WKUserScriptInjectionTimeAtDocumentEnd forMainFrameOnly:YES];\r\n[wkUController addUserScript:wkUserScript];\r\n\r\nWKWebView *webView = [[WKWebView alloc] initWithFrame:CGRectMake(0, 0, kScreenW, kScreenH - 64) configuration:config];\r\nwebView.backgroundColor = [UIColor whiteColor];\r\nwebView.UIDelegate = self;\r\nwebView.navigationDelegate = self;\r\n[self.view addSubview:webView];\r\n```\r\n\r\n### ä¸‹è½½ PDF æ–‡ä»¶\r\n\r\n```objc\r\nNSString *urlStr = @\"\";\r\n\r\nNSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlStr]];\r\nNSURLSession *session = [NSURLSession sharedSession];\r\n\r\nNSURLSessionDataTask *sessionDataTask = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {\r\n    NSLog(@\"ä»æœåŠ¡å™¨è·å–åˆ° pdf æ•°æ®\");\r\n    //å¯¹ä»æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ® data è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼š\r\n    dispatch_async(dispatch_get_main_queue(), ^{\r\n        NSString *path = [DOCUMENTS_DIRECTORY stringByAppendingPathComponent:@\"contract.pdf\"];\r\n        NSFileManager *fm = [NSFileManager defaultManager];\r\n        if ([fm fileExistsAtPath:path]) {\r\n            [fm removeItemAtPath:path error:nil];\r\n        }\r\n        BOOL success =  [data writeToFile:path atomically:YES];\r\n        if (success) {\r\n            NSLog(@\"ä¿å­˜æˆåŠŸ\");\r\n            NSURL *baseURL = [NSURL fileURLWithPath:[self getHtmlBasePath]];\r\n            NSString *path = [self getHtmlPath];\r\n            NSString *htmlStr = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];\r\n\r\n            [self.webView loadHTMLString:htmlStr baseURL:baseURL];\r\n        }\r\n    });\r\n}];\r\n[sessionDataTask resume];\r\n```\r\n\r\n### åŠ è½½ `PDF` æ–‡ä»¶\r\n\r\n```objc\r\n- (void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation {\r\n    [self loadPDF];\r\n}\r\n\r\n- (void)loadPDF {\r\n    NSString *path = [DOCUMENTS_DIRECTORY stringByAppendingPathComponent:@\"contract.pdf\"];\r\n    NSData *data = [NSData dataWithContentsOfFile:path options:NSDataReadingMappedAlways error:nil];\r\n\r\n    NSString *paraStr = [data base64EncodedStringWithOptions:NSDataBase64EncodingEndLineWithCarriageReturn];\r\n    NSString *js = [NSString stringWithFormat:@\"loadMyJS('%@')\",paraStr];\r\n\r\n    [self.webView evaluateJavaScript:js completionHandler:^(id _Nullable response, NSError * _Nullable error) {\r\n        if (error) {\r\n            NSLog(@\"%@\", error);\r\n            NSLog(@\"å½“å‰æ‰‹æœºç³»ç»Ÿç‰ˆæœ¬è¾ƒä½ï¼Œä¸æ”¯æŒæŸ¥çœ‹ï¼Œè¯·å‡çº§ç³»ç»Ÿæˆ–è€…åˆ° PC ç«¯æŸ¥çœ‹ã€‚\");\r\n        }\r\n    }];\r\n}\r\n```\r\n\r\n### ä¸ js è¿›è¡Œäº¤äº’\r\n\r\nä¸ `js` çš„äº¤äº’ä¸»è¦æ˜¯ä¸ºäº†åœ¨æ§åˆ¶å™¨ä¸­è·å– `PDF` æ–‡ä»¶çš„åŠ è½½çŠ¶æ€ã€‚é€šè¿‡è¿™ç§äº¤äº’ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®æ—¶æ„ŸçŸ¥ `PDF` æ–‡ä»¶æ˜¯å¦åŠ è½½å®Œæˆï¼Œæˆ–è€…åœ¨åŠ è½½å¤±è´¥æ—¶å¤„ç†é”™è¯¯æç¤ºã€‚\r\n\r\nåœ¨ `js` ä»£ç ä¸­ï¼Œå½“ `PDF` æ–‡ä»¶åŠ è½½å®Œæˆæˆ–å¤±è´¥æ—¶ï¼Œè°ƒç”¨å·²æ³¨å†Œçš„æ¥å£å°†çŠ¶æ€ä¼ é€’ç»™åŸç”Ÿä»£ç ã€‚\r\n\r\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\r\n\r\n```js\r\nfunction handlePages(page) {\r\n  //create new canvas\r\n  var viewport = page.getViewport(1);\r\n  var canvas = document.createElement(\"canvas\");\r\n  canvas.style.display = \"block\";\r\n\r\n  var context = canvas.getContext(\"2d\");\r\n  canvas.height = viewport.height;\r\n  canvas.width = viewport.width;\r\n\r\n  //render page\r\n  page.render({ canvasContext: context, viewport: viewport });\r\n\r\n  //add canvas to body\r\n  document.body.appendChild(canvas);\r\n\r\n  //render new page\r\n  pageNum++;\r\n  if (pdfDoc != null && pageNum <= numPages) {\r\n    pdfDoc.getPage(pageNum).then(handlePages);\r\n    // PDF åŠ è½½å¤±è´¥\r\n  } else {\r\n    console.log(\"pdf load complete\");\r\n    // PDF åŠ è½½å®Œæ¯•ï¼Œbody çš„å†…å®¹å¯ä»¥æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œä¿®æ”¹\r\n    window.webkit.messageHandlers.AppModel.postMessage({\r\n      code: \"00000\",\r\n      msg: \"pdf load complete\",\r\n    }); //å’Œ wkWebView äº¤äº’\r\n  }\r\n}\r\n```\r\n\r\nåœ¨åŸç”Ÿä»£ç ä¸­ï¼Œé€šè¿‡å®ç° `WKScriptMessageHandler` åè®®çš„æ–¹æ³•æ¥æ”¶ `js` ä¼ é€’çš„æ¶ˆæ¯å¹¶å¤„ç†ï¼š\r\n\r\n```objc\r\n- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message {\r\n    if ([message.name isEqualToString:@\"AppModel\"]) {\r\n        // å’Œ customview.js æ–‡ä»¶äº¤äº’ï¼Œjs è°ƒ oc çš„ä»£ç \r\n        // æ‰“å°æ‰€ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œåªæ”¯æŒ NSNumber, NSString, NSDate, NSArray, NSDictionary, and NSNull ç±»å‹\r\n        if ([message.body[@\"code\"] isEqualToString:@\"00000\"]) {\r\n            NSLog(@\"%@\", message.body[@\"msg\"]);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## å…¼å®¹ iOS8\r\n\r\nåˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ¨ `iOS9` åŠä»¥ä¸Šçš„ç³»ç»Ÿä¸­æ‰“å¼€å¸¦æœ‰åŠ å¯†å°ç« çš„ `PDF` æ–‡ä»¶ã€‚\r\n\r\nç„¶è€Œï¼Œåœ¨ `iOS8` ä¸­ï¼Œç”±äºç³»ç»Ÿé™åˆ¶ï¼Œ`PDF` æ–‡ä»¶æ— æ³•æ­£å¸¸åŠ è½½ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¯¦ç»†è¯´æ˜åŸå› å¹¶æä¾›è§£å†³æ–¹æ¡ˆã€‚\r\n\r\n### åŸå› åˆ†æ\r\n\r\nåœ¨ `iOS9` åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œ`WKWebView` é»˜è®¤æ”¯æŒä» `NSBundle` åŠ è½½ `HTML`ã€`JS` å’Œå…¶ä»–é™æ€èµ„æºã€‚è€Œåœ¨ `iOS8` ä¸­ï¼Œè¿™äº›èµ„æºå¿…é¡»ä½äº `tmp` ç›®å½•æˆ–æ²™ç›’çš„å…¶ä»–å¯å†™è·¯å¾„ä¸­æ‰èƒ½è¢«è®¿é—®ã€‚\r\n\r\n### å…¼å®¹æ–¹æ¡ˆ\r\n\r\nä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç³»ç»Ÿç‰ˆæœ¬å†³å®š `HTML` å’Œ `JS` æ–‡ä»¶çš„å­˜å‚¨ä½ç½®ã€‚å¦‚æœè¿è¡Œåœ¨ `iOS8` ä¸Šï¼Œæˆ‘ä»¬å°†èµ„æºå¤åˆ¶åˆ° `tmp` ç›®å½•ä¸‹ï¼›å¦åˆ™ï¼Œç›´æ¥ä» `NSBundle` åŠ è½½ã€‚\r\n\r\nä»¥ä¸‹æ˜¯å®Œæ•´çš„å…¼å®¹æ–¹æ¡ˆä»£ç ï¼š\r\n\r\n```objc\r\n- (NSString*)getHtmlBasePath {\r\n    NSString *basePath = @\"\";\r\n    if ([[[UIDevice currentDevice]systemVersion]floatValue]<9.0) {\r\n        basePath = NSTemporaryDirectory();\r\n    }else{\r\n        basePath = [[NSBundle mainBundle] bundlePath];\r\n    }\r\n    return basePath;\r\n}\r\n\r\n- (NSString*)getHtmlPath{\r\n    NSString *path = @\"\";\r\n    if ([[[UIDevice currentDevice]systemVersion] floatValue] < 9.0) {\r\n        path = [self copyHtmlToTemp];\r\n    } else {\r\n        path = [[NSBundle mainBundle] pathForResource:@\"index\" ofType:@\".html\"];\r\n    }\r\n    return path;\r\n}\r\n\r\n//åœ¨ iOS8 ä¸Šï¼Œhtml åŠ js æ–‡ä»¶è¦æ”¾åˆ° tmp ç›®å½•ä¸‹æ‰èƒ½æ­£å¸¸è®¿é—®ï¼ŒiOS9 åŠä»¥ä¸Šä¸ç”¨\r\n- (NSString*)copyHtmlToTemp {\r\n    NSString* htmlPath = [[NSBundle mainBundle] pathForResource:@\"index\" ofType:@\".html\"];\r\n    NSString *compatibilityJSPath = [[NSBundle mainBundle] pathForResource:@\"compatibility\" ofType:@\".js\"];\r\n    NSString *customviewJSPath = [[NSBundle mainBundle] pathForResource:@\"customview\" ofType:@\".js\"];\r\n    NSString *minimalCSSPath = [[NSBundle mainBundle] pathForResource:@\"minimal\" ofType:@\".css\"];\r\n    NSString *pdfJSPath = [[NSBundle mainBundle] pathForResource:@\"pdf\" ofType:@\".js\"];\r\n    NSString *pdfWorkerJSPath = [[NSBundle mainBundle] pathForResource:@\"pdf.worker\" ofType:@\".js\"];\r\n\r\n    NSString *tempPath = NSTemporaryDirectory();\r\n\r\n    NSString *htmlTempPath = [tempPath stringByAppendingPathComponent:@\"index.html\"];\r\n    NSString *compatibilityJSTempPath = [tempPath stringByAppendingPathComponent:@\"compatibility.js\"];\r\n    NSString *customviewJSTempPath = [tempPath stringByAppendingPathComponent:@\"customview.js\"];\r\n    NSString *minimalCSSTempPath = [tempPath stringByAppendingPathComponent:@\"minimal.css\"];\r\n    NSString *pdfJSTempPath = [tempPath stringByAppendingPathComponent:@\"pdf.js\"];\r\n    NSString *pdfWorkerJSTempPath = [tempPath stringByAppendingPathComponent:@\"pdf.worker.js\"];\r\n\r\n    NSFileManager *fm = [NSFileManager defaultManager];\r\n\r\n    if (![fm fileExistsAtPath:htmlTempPath]) {\r\n        [fm copyItemAtPath:htmlPath toPath:htmlTempPath error:nil];\r\n    }\r\n    if (![fm fileExistsAtPath:compatibilityJSTempPath]) {\r\n        [fm copyItemAtPath:compatibilityJSPath toPath:compatibilityJSTempPath error:nil];\r\n    }\r\n    if (![fm fileExistsAtPath:customviewJSTempPath]) {\r\n        [fm copyItemAtPath:customviewJSPath toPath:customviewJSTempPath error:nil];\r\n    }\r\n    if (![fm fileExistsAtPath:minimalCSSTempPath]) {\r\n        [fm copyItemAtPath:minimalCSSPath toPath:minimalCSSTempPath error:nil];\r\n    }\r\n    if (![fm fileExistsAtPath:pdfJSTempPath]) {\r\n        [fm copyItemAtPath:pdfJSPath toPath:pdfJSTempPath error:nil];\r\n    }\r\n    if (![fm fileExistsAtPath:pdfWorkerJSTempPath]) {\r\n        [fm copyItemAtPath:pdfWorkerJSPath toPath:pdfWorkerJSTempPath error:nil];\r\n    }\r\n    return htmlTempPath;\r\n}\r\n```\r\n\r\n## æœ€å\r\n\r\né€šè¿‡æ–‡ä¸­æ‰€è¿°çš„æ–¹æ¡ˆï¼Œæ— è®ºç”¨æˆ·æ˜¯åœ¨ `iOS8` è¿˜æ˜¯æ›´æ–°ç‰ˆæœ¬çš„ç³»ç»Ÿä¸­ï¼Œéƒ½å¯ä»¥é¡ºåˆ©æ‰“å¼€å¸¦æœ‰åŠ å¯†å°ç« çš„ `PDF` æ–‡ä»¶äº†ã€‚\r\n",
    "number": 2,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2017-08-29T08:00:00Z",
    "updatedAt": "2025-02-03T15:26:17Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/2",
    "jsonFilePath": "discussions/2-D_kwDONzrbkM4AeLb6.json",
    "markdownFilePath": "2017/8/2-D_kwDONzrbkM4AeLb6.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLbu",
    "title": "Welcome to blog Discussions!",
    "body": "<!--\r\n    âœï¸ Optional: Customize the content below to let your community know what you intend to use Discussions for.\r\n-->\r\n## ğŸ‘‹ Welcome!\r\n  Weâ€™re using Discussions as a place to connect with other members of our community. We hope that you:\r\n  * Ask questions youâ€™re wondering about.\r\n  * Share ideas.\r\n  * Engage with other community members.\r\n  * Welcome others and are open-minded. Remember that this is a community we\r\n  build together ğŸ’ª.\r\n\r\n  To get started, comment below with an introduction of yourself and tell us about what you do with this community.\r\n\r\n<!--\r\n  For the maintainers, here are some tips ğŸ’¡ for getting started with Discussions. We'll leave these in Markdown comments for now, but feel free to take out the comments for all maintainers to see.\r\n\r\n  ğŸ“¢ **Announce to your community** that Discussions is available! Go ahead and send that tweet, post, or link it from the website to drive traffic here.\r\n\r\n  ğŸ”— If you use issue templates, **link any relevant issue templates** such as questions and community conversations to Discussions. Declutter your issues by driving community content to where they belong in Discussions. If you need help, here's a [link to the documentation](https://docs.github.com/github/building-a-strong-community/configuring-issue-templates-for-your-repository#configuring-the-template-chooser).\r\n\r\n  â¡ï¸ You can **convert issues to discussions** either individually or bulk by labels. Looking at you, issues labeled â€œquestionâ€ or â€œdiscussionâ€.\r\n-->\r\n",
    "number": 1,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbb",
      "name": "Announcements",
      "slug": "announcements",
      "emoji": ":mega:",
      "emojiHTML": "<div>ğŸ“£</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2025-02-03T15:24:22Z",
    "updatedAt": "2025-02-03T15:24:23Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/1",
    "jsonFilePath": "discussions/1-D_kwDONzrbkM4AeLbu.json",
    "markdownFilePath": "announcements/1-D_kwDONzrbkM4AeLbu.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLc2",
    "title": "CocoaPods å®‰è£…åŠé”™è¯¯å¤„ç†",
    "body": "CocoaPods æ˜¯ iOS/macOS å¼€å‘ä¸­çš„é‡è¦ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è‡ªåŠ¨ç®¡ç†ç¬¬ä¸‰æ–¹åº“ä¾èµ–ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» CocoaPods çš„å®‰è£…æ–¹æ³•å’Œå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚æ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼ŒæŒæ¡ CocoaPods çš„ä½¿ç”¨éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚\r\n\r\n## å®‰è£…å‰å‡†å¤‡å·¥ä½œ\r\n\r\nå®‰è£… CocoaPods éœ€è¦ `Ruby` ç¯å¢ƒã€‚macOS ç³»ç»Ÿé€šå¸¸å·²å†…ç½® `Ruby`ã€‚é¦–å…ˆéœ€è¦æ£€æŸ¥ `Ruby` ç¯å¢ƒï¼š\r\n\r\n```bash\r\n$ ruby -v\r\nruby 2.3.3p222 (2016-11-21 revision 56859) [universal.x86_64-darwin17]\r\n```\r\n\r\nçœ‹åˆ°ç±»ä¼¼è¾“å‡ºå³è¡¨ç¤º `Ruby` ç¯å¢ƒæ­£å¸¸ï¼Œå¯ä»¥ç»§ç»­åç»­æ­¥éª¤ã€‚\r\n\r\n## CocoaPods å®‰è£…æ•™ç¨‹\r\n\r\n### å®‰è£… CocoaPods\r\n\r\næ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š\r\n\r\n```bash\r\nsudo gem install cocoapods\r\n```\r\n\r\n### é…ç½®å›½å†…é•œåƒæº\r\n\r\nç”±äºç½‘ç»œåŸå› ï¼Œå¼ºçƒˆå»ºè®®å°†é»˜è®¤æºæ›´æ¢ä¸ºå›½å†…æºï¼Œè¿™æ ·å¯ä»¥å¤§å¹…æå‡è®¿é—®é€Ÿåº¦ï¼š\r\n\r\n```bash\r\n# ç§»é™¤é»˜è®¤æº\r\n$ gem sources --remove https://rubygems.org/\r\n# æ·»åŠ å›½å†…æº\r\n$ gem sources --add https://gems.ruby-china.com/\r\n# éªŒè¯æºé…ç½®æ˜¯å¦æˆåŠŸ\r\n$ gem sources -l\r\n*** CURRENT SOURCES ***\r\nhttps://gems.ruby-china.com/\r\n```\r\n\r\n## å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ\r\n\r\n### Ruby ç‰ˆæœ¬ä¾èµ–é—®é¢˜\r\n\r\né‡åˆ°ä»¥ä¸‹é”™è¯¯æ—¶ï¼š\r\n\r\n```bash\r\nERROR:While executing gem ... (Gem::DependencyError)\r\nUnable to resolve dependencies...\r\n```\r\n\r\nè§£å†³æ–¹æ¡ˆ - æ›´æ–° `Ruby` ç³»ç»Ÿï¼š\r\n\r\n```bash\r\nsudo gem update --system\r\n```\r\n\r\n### å®‰è£…æƒé™é—®é¢˜\r\n\r\nåœ¨ OS X El Capitan åŠæ›´é«˜ç‰ˆæœ¬ç³»ç»Ÿä¸­å¯èƒ½é‡åˆ°æƒé™é”™è¯¯ï¼š\r\n\r\n```bash\r\nERROR:While executing gem ... (Errno::EPERM)\r\nOperation not permitted - /usr/bin/xcodeproj\r\n```\r\n\r\nè§£å†³æ–¹æ¡ˆ - æŒ‡å®šå®‰è£…è·¯å¾„ï¼š\r\n\r\n```bash\r\nsudo gem install -n /usr/local/bin cocoapods\r\n```\r\n\r\n### pod setup è¿›åº¦æŸ¥çœ‹\r\n\r\nå½“ `setup` æ‰§è¡Œè¿›åº¦è¾ƒæ…¢æ—¶ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å…·ä½“è¿›åº¦ï¼š\r\n\r\n```bash\r\ndu-sh ~/.cocoaPods\r\n```\r\n\r\n### æœç´¢åŠŸèƒ½å¼‚å¸¸ä¿®å¤\r\n\r\nå½“æœç´¢åŠŸèƒ½å¤±æ•ˆæ—¶ï¼Œå°è¯•æ¸…ç†æœç´¢ç¼“å­˜ï¼š\r\n\r\n```bash\r\nrm ~/Library/Caches/CocoaPods/search_index.json\r\n```\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡ä»‹ç»äº† CocoaPods çš„å®‰è£…æ­¥éª¤å’Œå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚CocoaPods ä½œä¸º iOS å¼€å‘ä¸­æœ€å¸¸ç”¨çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼ŒæŒæ¡å…¶ä½¿ç”¨æ–¹æ³•å¯¹å¼€å‘å·¥ä½œéå¸¸é‡è¦ã€‚å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå¯ä»¥ï¼š\r\n\r\n- æŸ¥çœ‹ CocoaPods å®˜æ–¹æ–‡æ¡£è·å–æ›´å¤šä¿¡æ¯\r\n- åœ¨ Stack Overflow ç­‰æŠ€æœ¯ç¤¾åŒºå¯»æ±‚å¸®åŠ©\r\n- é€šè¿‡ GitHub Issues åé¦ˆé—®é¢˜\r\n\r\nå¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ›´é¡ºåˆ©åœ°ä½¿ç”¨ CocoaPods è¿›è¡Œ iOS å¼€å‘å·¥ä½œã€‚å¦‚æœ‰ä»»ä½•è¡¥å……æˆ–å»ºè®®ï¼Œä¹Ÿæ¬¢è¿äº¤æµè®¨è®ºã€‚\r\n",
    "number": 11,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-05-24T08:00:00Z",
    "updatedAt": "2025-02-03T15:38:41Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/11",
    "jsonFilePath": "discussions/11-D_kwDONzrbkM4AeLc2.json",
    "markdownFilePath": "2018/5/11-D_kwDONzrbkM4AeLc2.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLc5",
    "title": "GCD åŒæ­¥å¼‚æ­¥ä¸ä¸²è¡Œå¹¶è¡Œçš„æ·±å…¥ç†è§£",
    "body": "å¹¶å‘ç¼–ç¨‹æ˜¯æå‡ `iOS` åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„å…³é”®æŠ€æœ¯ï¼Œè€Œ `Grand Central Dispatch (GCD)` ä½œä¸º `Apple` æ¨å‡ºçš„å¼ºå¤§çº¿ç¨‹ç®¡ç†æ¡†æ¶ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ç®€æ´è€Œé«˜æ•ˆçš„å¤šçº¿ç¨‹å¼€å‘æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œé¢å¯¹ `GCD` ä¸­åŒæ­¥/å¼‚æ­¥ã€ä¸²è¡Œ/å¹¶è¡Œç­‰å¤šç§ç»„åˆæ–¹å¼ï¼Œå¾ˆå¤šå¼€å‘è€…å¾€å¾€æ„Ÿåˆ°å›°æƒ‘ï¼Œæ— æ³•å……åˆ†å‘æŒ¥å…¶æ€§èƒ½ä¼˜åŠ¿ã€‚\r\n\r\næœ¬æ–‡å°†ä»¥é€šä¿—æ˜“æ‡‚çš„æ–¹å¼æ·±å…¥å‰–æ `GCD` çš„æ ¸å¿ƒæ¦‚å¿µï¼Œé€šè¿‡å¤§é‡å®ä¾‹å’Œè¯¦ç»†è§£æï¼Œå¸®åŠ©ä½ å…¨é¢ç†è§£çº¿ç¨‹æ‰§è¡Œçš„å…³é”®ç»†èŠ‚ï¼ŒæŒæ¡åœ¨å®é™…å¼€å‘ä¸­çµæ´»è¿ç”¨è¿™äº›æŠ€æœ¯çš„æœ€ä½³å®è·µã€‚\r\n\r\n## æ ¸å¿ƒæ¦‚å¿µè§£æ\r\n\r\nåœ¨å¼€å§‹æ·±å…¥å­¦ä¹  `GCD` ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆé€šè¿‡ç”ŸåŠ¨çš„ç±»æ¯”æ¥ç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š\r\n\r\n- **çº¿ç¨‹**\r\n\r\n  ä¸€æ¡ç”Ÿäº§çº¿ä¸Šçš„å·¥äººï¼š\r\n\r\n  - æ˜¯æ‰§è¡Œå…·ä½“å·¥ä½œçš„æœ€å°å•ä½\r\n  - ç”±å·¥å‚ï¼ˆ`CPU`ï¼‰ç»Ÿä¸€è°ƒåº¦å®‰æ’å·¥ä½œ\r\n  - å¯ä»¥ç‹¬ç«‹å®Œæˆåˆ†é…çš„ä»»åŠ¡\r\n  - å¤šä¸ªå·¥äººå¯ä»¥åŒæ—¶å·¥ä½œ\r\n\r\n- **ä»»åŠ¡**\r\n\r\n  å·¥å‚é‡Œéœ€è¦å®Œæˆçš„å…·ä½“å·¥ä½œï¼š\r\n\r\n  - ä¸€ä»¶æ˜ç¡®çš„å·¥ä½œï¼ˆå¦‚ç»„è£…ä¸€ä¸ªé›¶ä»¶ï¼‰\r\n  - å¯ä»¥ç”¨ä¸åŒæ–¹å¼æè¿°ï¼ˆä»»åŠ¡æ¸…å•æˆ–å£å¤´æŒ‡ä»¤ï¼‰\r\n  - åŒ…å«å…·ä½“çš„æ“ä½œæ­¥éª¤å’Œç›®æ ‡\r\n\r\n- **é˜Ÿåˆ—**\r\n\r\n  å·¥å‚çš„ä»»åŠ¡åˆ†å‘é€šé“ï¼š\r\n\r\n  - ä»»åŠ¡æŒ‰ç…§å…ˆæ¥å…ˆåšçš„é¡ºåºæ’é˜Ÿ\r\n  - ç»Ÿä¸€ç®¡ç†å¾…å¤„ç†çš„å·¥ä½œ\r\n  - å†³å®šå·¥äººå¦‚ä½•é¢†å–å’Œæ‰§è¡Œä»»åŠ¡\r\n\r\n- **ä¸²è¡Œé˜Ÿåˆ—**\r\n\r\n  ä¸€æ¡çš„ç”Ÿäº§çº¿ï¼š\r\n\r\n  - ä¸€ä¸ªå·¥äººæŒ‰é¡ºåºå¤„ç†\r\n  - å¿…é¡»ä¸€ä¸ªä»»åŠ¡åšå®Œå†åšä¸‹ä¸€ä¸ª\r\n  - é€‚åˆæœ‰å…ˆåé¡ºåºè¦æ±‚çš„å·¥ä½œ\r\n\r\n- **å¹¶è¡Œé˜Ÿåˆ—**\r\n\r\n  å¤šæ¡å¹¶è¡Œçš„ç”Ÿäº§çº¿ï¼š\r\n\r\n  - å¤šä¸ªå·¥äººå¯ä»¥åŒæ—¶å·¥ä½œ\r\n  - å¤šä¸ªä»»åŠ¡å¯ä»¥åŒæ­¥è¿›è¡Œ\r\n  - é€‚åˆå¯ä»¥ç‹¬ç«‹å®Œæˆçš„å·¥ä½œ\r\n\r\n- **åŒæ­¥æ‰§è¡Œ**\r\n\r\n  ç­‰å¾…å·¥äººå½“åœºå®Œæˆä»»åŠ¡ï¼š\r\n\r\n  - å·¥äººä¸èƒ½åŒæ—¶åšå…¶ä»–äº‹\r\n  - å¿…é¡»ç­‰è¿™ä»¶äº‹åšå®Œæ‰èƒ½ç»§ç»­\r\n  - ä»»åŠ¡æŒ‰é¡ºåºé€ä¸ªå®Œæˆ\r\n\r\n- **å¼‚æ­¥æ‰§è¡Œ**\r\n\r\n  åˆ†é…ä»»åŠ¡åä¸ç”¨ç­‰å¾…ï¼š\r\n\r\n  - å¯ä»¥è°ƒç”¨å¤šä¸ªå·¥äººåŒæ—¶å·¥ä½œ\r\n  - ä»»åŠ¡å¯ä»¥å¹¶è¡Œå¤„ç†\r\n  - åˆ†é…å®Œå°±å¯ä»¥åšå…¶ä»–äº‹\r\n\r\n## GCD å®æˆ˜æŒ‡å—\r\n\r\nè®©æˆ‘ä»¬é€šè¿‡è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œæ‰§è¡Œç»“æœåˆ†æï¼Œå…¨é¢æŒæ¡ `GCD` ä¸­å„ç§æ‰§è¡Œç»„åˆæ–¹å¼ã€‚æ¯ä¸ªç»„åˆéƒ½é…æœ‰å®Œæ•´çš„ç¤ºä¾‹ä»£ç ã€æ‰§è¡Œç‰¹ç‚¹è¯´æ˜å’Œå®é™…è¿è¡Œæ•ˆæœã€‚\r\n\r\n### åŒæ­¥æ‰§è¡Œ + ä¸²è¡Œé˜Ÿåˆ—ï¼šä¸¥æ ¼æŒ‰åºæ‰§è¡Œ\r\n\r\nç‰¹ç‚¹ï¼š\r\n\r\n- åœ¨å½“å‰çº¿ç¨‹åŒæ­¥æ‰§è¡Œ\r\n- ä»»åŠ¡æŒ‰ä¸¥æ ¼é¡ºåºä¾æ¬¡æ‰§è¡Œ\r\n- éœ€ç­‰å¾…å½“å‰ä»»åŠ¡å®Œæˆæ‰èƒ½ç»§ç»­\r\n\r\n```objc\r\ndispatch_queue_t queue = dispatch_queue_create(\"blog.onnttf.site\", DISPATCH_QUEUE_SERIAL);\r\nNSLog(@\"---start---%@\", [NSThread currentThread]);\r\n\r\ndispatch_sync(queue, ^{\r\n    sleep(5);\r\n    NSLog(@\"ä»»åŠ¡ 1---%@\", [NSThread currentThread]);\r\n});\r\n\r\ndispatch_sync(queue, ^{\r\n    sleep(3);\r\n    NSLog(@\"ä»»åŠ¡ 2---%@\", [NSThread currentThread]);\r\n});\r\n\r\ndispatch_sync(queue, ^{\r\n    sleep(1);\r\n    NSLog(@\"ä»»åŠ¡ 3---%@\", [NSThread currentThread]);\r\n});\r\n\r\nNSLog(@\"---end---%@\", [NSThread currentThread]);\r\n\r\n/**\r\n æ§åˆ¶å°è¾“å‡ºï¼š\r\n ---start---<NSThread: 0x6000000741c0>{number = 1, name = main}\r\n ä»»åŠ¡ 1---<NSThread: 0x6000000741c0>{number = 1, name = main}\r\n ä»»åŠ¡ 2---<NSThread: 0x6000000741c0>{number = 1, name = main}\r\n ä»»åŠ¡ 3---<NSThread: 0x6000000741c0>{number = 1, name = main}\r\n ---end---<NSThread: 0x6000000741c0>{number = 1, name = main}\r\n*/\r\n```\r\n\r\n### åŒæ­¥æ‰§è¡Œ + å¹¶è¡Œé˜Ÿåˆ—ï¼šé¡ºåºæ‰§è¡Œä½†å¯å¤šçº¿ç¨‹\r\n\r\nç‰¹ç‚¹ï¼š\r\n\r\n- è™½ä¸ºå¹¶è¡Œé˜Ÿåˆ—ä½†åŒæ­¥æ‰§è¡Œå¯¼è‡´é¡ºåºæ‰§è¡Œ\r\n- ä»åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œ\r\n- ä»»åŠ¡å®Œæˆåæ‰æ‰§è¡Œä¸‹ä¸€ä¸ª\r\n\r\n```objc\r\ndispatch_queue_t queue = dispatch_queue_create(\"concurrent.queue\", DISPATCH_QUEUE_CONCURRENT);\r\n\r\nNSLog(@\"---start---%@\", [NSThread currentThread]);\r\n\r\ndispatch_sync(queue, ^{\r\n    sleep(3);\r\n    NSLog(@\"ä»»åŠ¡1---%@\", [NSThread currentThread]);\r\n});\r\n\r\ndispatch_sync(queue, ^{\r\n    sleep(2);\r\n    NSLog(@\"ä»»åŠ¡2---%@\", [NSThread currentThread]);\r\n});\r\n\r\nNSLog(@\"---end---%@\", [NSThread currentThread]);\r\n\r\n/* è¾“å‡ºç»“æœï¼š\r\n ---start---<NSThread: main>\r\n ä»»åŠ¡1---<NSThread: main>   // 3ç§’å\r\n ä»»åŠ¡2---<NSThread: main>   // 2ç§’å\r\n ---end---<NSThread: main>\r\n*/\r\n```\r\n\r\n### å¼‚æ­¥æ‰§è¡Œ + ä¸²è¡Œé˜Ÿåˆ—ï¼šå¼€å¯æ–°çº¿ç¨‹é¡ºåºæ‰§è¡Œ\r\n\r\nç‰¹ç‚¹ï¼š\r\n\r\n- ä¼šå¼€å¯æ–°çš„çº¿ç¨‹\r\n- ä»»åŠ¡åœ¨æ–°çº¿ç¨‹ä¸­æŒ‰é¡ºåºæ‰§è¡Œ\r\n- ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹\r\n\r\n```objc\r\ndispatch_queue_t queue = dispatch_queue_create(\"serial.queue\", DISPATCH_QUEUE_SERIAL);\r\n\r\nNSLog(@\"---start---%@\", [NSThread currentThread]);\r\n\r\ndispatch_async(queue, ^{\r\n    sleep(3);\r\n    NSLog(@\"ä»»åŠ¡1---%@\", [NSThread currentThread]);\r\n});\r\n\r\ndispatch_async(queue, ^{\r\n    sleep(2);\r\n    NSLog(@\"ä»»åŠ¡2---%@\", [NSThread currentThread]);\r\n});\r\n\r\nNSLog(@\"---end---%@\", [NSThread currentThread]);\r\n\r\n/* è¾“å‡ºç»“æœï¼š\r\n ---start---<NSThread: main>\r\n ---end---<NSThread: main>\r\n ä»»åŠ¡1---<NSThread: {number = 2}>   // 3ç§’å\r\n ä»»åŠ¡2---<NSThread: {number = 2}>   // 2ç§’å\r\n*/\r\n```\r\n\r\n### å¼‚æ­¥æ‰§è¡Œ + å¹¶è¡Œé˜Ÿåˆ—ï¼šå¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œ\r\n\r\nç‰¹ç‚¹ï¼š\r\n\r\n- å¼€å¯å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ\r\n- ä»»åŠ¡æ‰§è¡Œé¡ºåºä¸ç¡®å®š\r\n- æ•ˆç‡æœ€é«˜çš„æ‰§è¡Œæ–¹å¼\r\n\r\n```objc\r\ndispatch_queue_t queue = dispatch_queue_create(\"concurrent.queue\", DISPATCH_QUEUE_CONCURRENT);\r\n\r\nNSLog(@\"---start---%@\", [NSThread currentThread]);\r\n\r\ndispatch_async(queue, ^{\r\n    sleep(3);\r\n    NSLog(@\"ä»»åŠ¡1---%@\", [NSThread currentThread]);\r\n});\r\n\r\ndispatch_async(queue, ^{\r\n    sleep(2);\r\n    NSLog(@\"ä»»åŠ¡2---%@\", [NSThread currentThread]);\r\n});\r\n\r\nNSLog(@\"---end---%@\", [NSThread currentThread]);\r\n\r\n/* è¾“å‡ºç»“æœï¼š\r\n ---start---<NSThread: main>\r\n ---end---<NSThread: main>\r\n ä»»åŠ¡2---<NSThread: {number = 3}>   // 2ç§’å\r\n ä»»åŠ¡1---<NSThread: {number = 2}>   // 3ç§’å\r\n*/\r\n```\r\n\r\n### åŒæ­¥æ‰§è¡Œ + ä¸»é˜Ÿåˆ—ï¼šæ­»é”é£é™©\r\n\r\nç‰¹ç‚¹ï¼š\r\n\r\n- åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä¼šé€ æˆæ­»é”\r\n- åº”é¿å…åœ¨ä¸»çº¿ç¨‹ä½¿ç”¨æ­¤ç»„åˆ\r\n- å¸¸è§çš„çº¿ç¨‹å®‰å…¨éšæ‚£\r\n\r\n```objc\r\ndispatch_queue_t queue = dispatch_get_main_queue();\r\n\r\nNSLog(@\"---start---%@\", [NSThread currentThread]);\r\n\r\n// ä¼šå¯¼è‡´æ­»é”\r\ndispatch_sync(queue, ^{\r\n    NSLog(@\"ä»»åŠ¡1---%@\", [NSThread currentThread]);\r\n});\r\n\r\nNSLog(@\"---end---%@\", [NSThread currentThread]);\r\n\r\n/* è¾“å‡ºç»“æœï¼š\r\n ---start---<NSThread: main>\r\n // ç¨‹åºæ­»é”\r\n*/\r\n```\r\n\r\n### å¼‚æ­¥æ‰§è¡Œ + ä¸»é˜Ÿåˆ—ï¼šä¸»çº¿ç¨‹å®‰å…¨æ‰§è¡Œ\r\n\r\nç‰¹ç‚¹ï¼š\r\n\r\n- ç¡®ä¿ä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ\r\n- é€‚åˆ `UI` æ“ä½œç›¸å…³ä»»åŠ¡\r\n- ä¸ä¼šé€ æˆæ­»é”é—®é¢˜\r\n\r\n```objc\r\ndispatch_queue_t queue = dispatch_get_main_queue();\r\n\r\nNSLog(@\"---start---%@\", [NSThread currentThread]);\r\n\r\ndispatch_async(queue, ^{\r\n    sleep(3);\r\n    NSLog(@\"ä»»åŠ¡1---%@\", [NSThread currentThread]);\r\n});\r\n\r\ndispatch_async(queue, ^{\r\n    sleep(2);\r\n    NSLog(@\"ä»»åŠ¡2---%@\", [NSThread currentThread]);\r\n});\r\n\r\nNSLog(@\"---end---%@\", [NSThread currentThread]);\r\n\r\n/* è¾“å‡ºç»“æœï¼š\r\n ---start---<NSThread: main>\r\n ---end---<NSThread: main>\r\n ä»»åŠ¡1---<NSThread: main>   // 3ç§’å\r\n ä»»åŠ¡2---<NSThread: main>   // 2ç§’å\r\n*/\r\n```\r\n\r\n## æœ€å\r\n\r\né€šè¿‡æœ¬æ–‡çš„è¯¦ç»†è®²è§£ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°å­¦ä¹ äº† `GCD` ä¸­çš„æ ¸å¿ƒæ¦‚å¿µå’Œå„ç§æ‰§è¡Œç»„åˆæ–¹å¼ã€‚ä»¥ä¸‹æ˜¯å…³é”®è¦ç‚¹æ€»ç»“ï¼š\r\n\r\n- åŒæ­¥/å¼‚æ­¥å†³å®šæ˜¯å¦é˜»å¡å½“å‰çº¿ç¨‹\r\n\r\n  - åŒæ­¥æ‰§è¡Œä¼šç­‰å¾…ä»»åŠ¡å®Œæˆ\r\n  - å¼‚æ­¥æ‰§è¡Œç«‹å³è¿”å›ç»§ç»­æ‰§è¡Œ\r\n\r\n- ä¸²è¡Œ/å¹¶è¡Œå†³å®šä»»åŠ¡æ‰§è¡Œæ–¹å¼\r\n\r\n  - ä¸²è¡Œé˜Ÿåˆ—æŒ‰é¡ºåºæ‰§è¡Œä»»åŠ¡\r\n  - å¹¶è¡Œé˜Ÿåˆ—å¯åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡\r\n\r\n- å¸¸è§ä½¿ç”¨åœºæ™¯\r\n\r\n  - `UI` æ“ä½œä¼˜å…ˆä½¿ç”¨ä¸»é˜Ÿåˆ—\r\n  - è€—æ—¶æ“ä½œä½¿ç”¨å¼‚æ­¥å¹¶è¡Œé˜Ÿåˆ—\r\n  - æœ‰åºæ“ä½œä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—\r\n  - é¿å…ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œé€ æˆæ­»é”\r\n\r\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„ç»„åˆæ–¹å¼ã€‚åˆç†è¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œæ—¢å¯ä»¥ä¿è¯ä»£ç çš„æ­£ç¡®æ€§ï¼Œåˆèƒ½å……åˆ†å‘æŒ¥ç³»ç»Ÿæ€§èƒ½ï¼Œä»è€Œå¼€å‘å‡ºé«˜æ•ˆç¨³å®šçš„åº”ç”¨ç¨‹åºã€‚\r\n",
    "number": 12,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-05-29T08:00:00Z",
    "updatedAt": "2025-02-03T15:39:10Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/12",
    "jsonFilePath": "discussions/12-D_kwDONzrbkM4AeLc5.json",
    "markdownFilePath": "2018/5/12-D_kwDONzrbkM4AeLc5.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcC",
    "title": "iOS Widget å¼€å‘æŒ‡å—",
    "body": "åœ¨ `iOS` åº”ç”¨ä¸­ï¼Œ`Widget` æ˜¯ä¸€ç§å°å‹çš„åº”ç”¨æ‰©å±•ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡è®¾å¤‡çš„é€šçŸ¥ä¸­å¿ƒæˆ–ä¸»å±å¹•ç›´æ¥è®¿é—®åº”ç”¨ä¸­çš„å…³é”®ä¿¡æ¯ã€‚å¼€å‘ä¸€ä¸ª `Widget` éœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„é…ç½®å’Œä»£ç å®ç°ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†é€æ­¥ä»‹ç»å¦‚ä½•å¼€å‘ä¸€ä¸ª `Widget`ï¼Œä»è´¦å·é…ç½®åˆ°å®é™…å¼€å‘çš„æ¯ä¸ªæ­¥éª¤ï¼Œå¸®åŠ©ä½ é¡ºåˆ©å®Œæˆå¼€å‘ã€‚\r\n\r\n## è´¦å·é…ç½®\r\n\r\n### ç”³è¯· `GroupID`\r\n\r\n1. åœ¨å¼€å‘è€…è´¦æˆ·ä¸­ï¼Œè¿›å…¥ `App Groups` é…ç½®é¡µ\r\n\r\n   ![image](https://file.onnttf.site/2017/08/29/1.jpeg)\r\n\r\n2. æ ¹æ®é¡µé¢æç¤ºï¼ŒæŒ‰è¦æ±‚å¡«å†™ç›¸å…³ä¿¡æ¯\r\n\r\n   - **`Description`**\r\n\r\n     å¡«å†™è¿™ä¸ª `App Group` çš„æè¿°ã€‚ç¤ºä¾‹ï¼š`Shared Resources for MyApp Widget`\r\n\r\n   - **`ID`**\r\n\r\n     å¡«å†™è¿™ä¸ª `App Group` çš„æ ‡è¯†ï¼Œå»ºè®®ä»¥ `com.{aaa}.{bbb}` å‘½åï¼Œå¡«å†™å®Œæ¯•æ—¶ï¼Œä¼šé»˜è®¤åœ¨å‰é¢åŠ ä¸Š `group`ã€‚ç¤ºä¾‹ï¼š`com.mycompany.myapp`\r\n\r\nå®Œæˆåˆ›å»ºåï¼Œå¦‚å›¾ï¼š\r\n\r\n![image](https://file.onnttf.site/2017/08/29/2.jpeg)\r\n\r\n### å°† `App Group` æ·»åŠ åˆ° `App ID` ä¸­\r\n\r\n1. æ‰“å¼€ä½ çš„ `App ID` é…ç½®é¡µé¢\r\n2. æ‰¾åˆ° `App Groups` é€‰é¡¹ï¼Œå°†ä¹‹å‰åˆ›å»ºçš„ `GroupID` å‹¾é€‰å¯ç”¨\r\n\r\n![image](https://file.onnttf.site/2017/08/29/3.jpeg)\r\n\r\n### é‡æ–°æ¿€æ´» Provisioning Profile\r\n\r\næ“ä½œè¿‡ `App ID` åï¼Œéœ€è¦é‡æ–°æ¿€æ´»æˆ–æ›´æ–°å…³è”çš„ `Provisioning Profile` ä»¥åŒæ­¥æ–°çš„æƒé™ã€‚\r\n\r\n1. åœ¨ `Apple Developer Account` ä¸­æ‰¾åˆ°å¯¹åº”çš„ `Provisioning Profile`\r\n2. ç‚¹å‡» Edit æˆ–é‡æ–°ç”Ÿæˆ\r\n\r\n## é¡¹ç›®é…ç½®\r\n\r\n### App Target é…ç½®\r\n\r\n1. æ‰“å¼€é¡¹ç›®è®¾ç½®ï¼Œè¿›å…¥ `App Target` çš„ `Capabilities` é¡µç­¾\r\n2. æ‰¾åˆ° `App Groups` é€‰é¡¹\r\n3. å‹¾é€‰ä¹‹å‰åˆ›å»ºçš„ `App Group`\r\n\r\n   ![image](https://file.onnttf.site/2017/08/29/5.jpeg)\r\n\r\n### Widget Target é…ç½®\r\n\r\n1. æ‰“å¼€é¡¹ç›®è®¾ç½®ï¼Œè¿›å…¥ `Widget Target` çš„ `General` é¡µç­¾\r\n2. è®¾ç½® `Bundle Identifier`ï¼Œéœ€éµå¾ªä»¥ä¸‹è§„åˆ™\r\n\r\n   - å‰ç¼€å¿…é¡»åŒ…å«ä¸»åº”ç”¨çš„ `Bundle Identifier`\r\n   - åç¼€å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†ä¸èƒ½æ˜¯ `widget`\r\n\r\nç¤ºä¾‹ï¼š\r\n\r\nå¦‚æœä¸»é¡¹ç›®çš„ `Bundle Identifier` æ˜¯ `com.mycompany.myapp`ã€‚é‚£ `Widget` çš„ `Bundle identifier` å¯ä»¥æ˜¯ `com.mycompany.myapp.today`ã€‚\r\n\r\n## å¼€å‘é˜¶æ®µ\r\n\r\nåœ¨å®ŒæˆåŸºç¡€é…ç½®åï¼Œæˆ‘ä»¬è¿›å…¥ `Widget` çš„å¼€å‘é˜¶æ®µã€‚\r\n\r\n### åˆ›å»º Widget Target\r\n\r\n1. åœ¨ä¸»é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ `Target`ï¼Œé€‰æ‹© `Today Extension`\r\n\r\n   ![image](https://file.onnttf.site/2017/09/07/1.jpeg)\r\n\r\n2. å®Œæˆåä¼šè‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶\r\n\r\n   ![image](https://file.onnttf.site/2017/09/07/2.jpeg)\r\n\r\n### ä¿®æ”¹ Widget Target é…ç½®\r\n\r\næŒ‰éœ€å¯¹ `Widget` çš„ `Info.plist` è¿›è¡Œä¿®æ”¹ã€‚\r\n\r\n- ä¿®æ”¹ `Widget` åœ¨é€šçŸ¥æ ä¸­æ˜¾ç¤ºçš„åç§°\r\n\r\n  é€šè¿‡ä¿®æ”¹ `Bundle Display Name` å†…å®¹ï¼Œç»™ `Widget` åç§°è®¾ç½®ä¸€ä¸ªç®€æ´æ˜“æ‡‚çš„åå­—\r\n\r\n- ä½¿ç”¨çº¯ä»£ç å¼€å‘\r\n\r\n  1. åˆ é™¤ `NSExtensionMainStoryboard` é”®å€¼å¯¹ï¼Œå¹¶ç§»é™¤é»˜è®¤ç”Ÿæˆçš„ `MainInterface.storyboard` æ–‡ä»¶\r\n  2. æ·»åŠ  `NSExtensionPrincipalClass` é”®ï¼Œå°†å€¼è®¾ä¸ºä¸»æ§åˆ¶å™¨ç±»åï¼ˆå¦‚ `TodayViewController`ï¼‰\r\n\r\n### å¼€å‘å·¥ä½œ\r\n\r\nåœ¨é…ç½®å®Œæˆä¹‹åï¼Œè¿›å…¥å¼€å‘é˜¶æ®µã€‚`Widget` å¼€å‘ä¸å¤æ‚ï¼Œéµå¾ªæ–‡æ¡£å³å¯å¼€å‘å‡ºç¾è§‚å®ç”¨çš„ `Widget`ï¼Œä½†éœ€è¦ç•™æ„ä¸€äº›ç‰ˆæœ¬å·®å¼‚å’Œç»†èŠ‚é—®é¢˜ã€‚\r\n\r\n#### å…¼å®¹é€‚é…\r\n\r\n##### iOS8\r\n\r\n- æ²¡æœ‰æŠ˜å å’Œå±•å¼€åŠŸèƒ½\r\n- é»˜è®¤ Widget é«˜åº¦ç”± `self.preferredContentSize` æ§åˆ¶\r\n\r\n  ```objc\r\n  self.preferredContentSize = CGSizeMake(kScreenW, 100);\r\n  ```\r\n\r\n- ç»„ä»¶å¸ƒå±€é»˜è®¤å‘å³åç§» 30 å•ä½ï¼Œå¯ä»¥é€šè¿‡ `widgetMarginInsetsForProposedMarginInsets` æ–¹æ³•è¿›è¡Œè°ƒæ•´\r\n\r\n  ```objc\r\n  - (UIEdgeInsets)widgetMarginInsetsForProposedMarginInsets:(UIEdgeInsets)defaultMarginInsets {\r\n     return UIEdgeInsetsMake(0, 0, 0, 0);\r\n  }\r\n  ```\r\n\r\n##### iOS 10 åŠä¹‹å\r\n\r\n- `Widget` æ”¯æŒäº†ä¸¤ç§æ˜¾ç¤ºæ¨¡å¼\r\n\r\n  - NCWidgetDisplayModeCompact\r\n\r\n    é«˜åº¦å›ºå®šï¼Œæœ€ä½é«˜åº¦ä¸º `110`\r\n\r\n  - NCWidgetDisplayModeExpanded\r\n\r\n    é«˜åº¦å¯å˜\r\n\r\n- è®¾ç½®æ˜¾ç¤ºæ¨¡å¼\r\n\r\n  **éœ€è¦åœ¨è®¾å®š `Size` å‰è®¾å®šè¿™ä¸ªå±æ€§**\r\n\r\n  ```objc\r\n  - (void)viewDidLoad {\r\n      [super viewDidLoad];\r\n      if ([[UIDevice currentDevice] systemVersion].intValue >= 10) {\r\n          self.extensionContext.widgetLargestAvailableDisplayMode = NCWidgetDisplayModeCompact; // æˆ– NCWidgetDisplayModeExpanded\r\n      }\r\n      self.preferredContentSize = CGSizeMake(kScreenW, 100);\r\n      [self setupUI];\r\n  }\r\n  ```\r\n\r\n- ç›‘å¬æ˜¾ç¤ºæ¨¡å¼å˜åŒ–\r\n\r\n  å½“æ˜¾ç¤ºæ¨¡å¼è®¾ç½®ä¸º `NCWidgetDisplayModeExpanded` æ—¶ï¼Œç‚¹å‡»æŠ˜å å’Œæ‰“å¼€æ—¶ï¼Œä¼šè§¦å‘ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥ä¿®æ”¹å¯¹åº”çŠ¶æ€çš„é«˜åº¦ã€‚ä¿®æ”¹å®Œæ¯•åï¼Œæ›´æ–°è§†å›¾å³å¯çœ‹åˆ°æœ€æ–°çš„å¸ƒå±€ã€‚\r\n\r\n  ```objc\r\n  - (void)widgetActiveDisplayModeDidChange:(NCWidgetDisplayMode)activeDisplayMode withMaximumSize:(CGSize)maxSize {\r\n      if (activeDisplayMode == NCWidgetDisplayModeCompact) {\r\n          self.preferredContentSize = CGSizeMake(maxSize.width, 110);\r\n      } else {\r\n          self.preferredContentSize = CGSizeMake(maxSize.width, 200);\r\n      }\r\n   }\r\n\r\n   //åœ¨ä¸‹é¢çš„æ–¹æ³•ä¸­æ›´æ–°è§†å›¾\r\n   -(void)widgetPerformUpdateWithCompletionHandler:(void (^)(NCUpdateResult))completionHandler {\r\n   //    NCUpdateResultNewData   æ–°çš„å†…å®¹éœ€è¦é‡æ–°ç»˜åˆ¶è§†å›¾\r\n   //    NCUpdateResultNoData    éƒ¨ä»¶ä¸éœ€è¦æ›´æ–°\r\n   //    NCUpdateResultFailed    æ›´æ–°è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯\r\n     completionHandler(NCUpdateResultNoData);\r\n   }\r\n  ```\r\n\r\n#### ä»£ç å…±äº«\r\n\r\nå¸¸ç”¨çš„å››ç§ä»£ç å…±äº«æ–¹æ³•ï¼š\r\n\r\n1. å°†ä»£ç æ‰“åŒ…æˆ `Framework`ï¼Œç„¶å `link` åˆ°ä¸» `App`å’Œ `Widget` ä¸­ **ï¼ˆæ¨èï¼‰**\r\n2. ä¸æ€•å®‰è£…åŒ…å˜å¤§çš„è¯ï¼Œå¯ä»¥è€ƒè™‘å°†éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“åœ¨ä¸» `App` å’Œ `Widget` ä¸­åˆ†åˆ«å¤åˆ¶ä¸€ä»½ **ï¼ˆæ¨èï¼‰**\r\n3. å°†éœ€è¦å…±äº«çš„æ–‡ä»¶æŒ‰å›¾ä¸­è¿›è¡Œå‹¾é€‰é…ç½®\r\n\r\n   ![image](https://file.onnttf.site/2017/09/07/4.jpeg)\r\n\r\n4. é€šè¿‡ `Pods` å¯¼å…¥ï¼Œä¸å¤ªå»ºè®®é€šè¿‡ `Pods` åˆ†åˆ«å‘ä¸¤ä¸ª `Target` ä¸­å¯¼å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œå› ä¸ºå¾ˆå®¹æ˜“å‘ç”Ÿä¸€äº›ä¸å¥½å¤„ç†çš„é—®é¢˜\r\n\r\n#### æ•°æ®å…±äº«\r\n\r\nå¸¸ç”¨çš„ä¸¤ç§æ•°æ®å…±äº«æ–¹æ³•ï¼š\r\n\r\n1. NSUserDefaults\r\n\r\n   å’Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•ä¸€æ ·ï¼Œä¸è¿‡åœ¨åˆ›å»º `NSUserDefaults` æ—¶ï¼Œéœ€è¦å¡«å†™æˆ‘ä»¬ä¹‹å‰çš„ `GroupID`ã€‚é€šè¿‡ `GroupID`ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸» `App` å’Œ `Widget` ä¹‹é—´çš„æ•°æ®å…±äº«äº†ã€‚\r\n\r\n   ```objc\r\n   // å†™å…¥æ•°æ®\r\n   NSString *groupID = @\"group.com.aaa.bbb\";\r\n   NSUserDefaults *ud = [[NSUserDefaults alloc] initWithSuiteName:groupID];[ud setObject:@\"æˆ‘æ˜¯æµ‹è¯•çš„æ•°æ®\" forKey:@\"test\"];\r\n   [ud synchronize];\r\n\r\n   // è¯»å–æ•°æ®\r\n   NSString *groupID = @\"group.com.aaa.bbb\";\r\n   NSUserDefaults *ud = [[NSUserDefaults alloc] initWithSuiteName:groupID];\r\n   NSString *value = [ud objectForKey:@\"test\"];\r\n   ```\r\n\r\n2. NSFileManager\r\n\r\n   ```objc\r\n   // å†™å…¥æ•°æ®\r\n   NSString *groupID = @\"group.com.aaa.bbb\";\r\n   NSError *err = nil;\r\n   NSURL *containerURL = [[NSFileManager defaultManager] containerURLForSecurityApplicationGroupIdentifier:groupID];\r\n   containerURL = [containerURL URLByAppendingPathComponent:@\"Library/Caches/test\"];\r\n   NSString *value = @\"æˆ‘æ˜¯æµ‹è¯•çš„æ•°æ®\";\r\n   BOOL result = [value writeToURL:containerURL atomically:YES encoding:NSUTF8StringEncoding error:&err];\r\n   if(result){\r\n       NSLog(@\"å†™å…¥æˆåŠŸ\");\r\n   }\r\n\r\n   // è¯»å–æ•°æ®\r\n   NSString *groupID = @\"group.com.aaa.bbb\";\r\n   NSError *err = nil;\r\n   NSURL *containerURL = [[NSFileManager defaultManager] containerURLForSecurityApplicationGroupIdentifier:groupID];\r\n   containerURL = [containerURL URLByAppendingPathComponent:@\"Library/Caches/test\"];\r\n   NSString *value = [NSString stringWithContentsOfURL:containerURL encoding:NSUTF8StringEncoding error:&err];\r\n   ```\r\n\r\n#### æ•°æ®åˆ·æ–°\r\n\r\n- `Widget` ä»å±å¹•ä¸Šæ¶ˆå¤± 2s å·¦å³åï¼Œå†æ¬¡å‡ºç°åœ¨å±å¹•ä¸­æ—¶ï¼Œä¼šæ‰§è¡Œ `viewDidLoad` æ–¹æ³•\r\n- `Widget` åœ¨çŸ­æ—¶é—´å†…é¢‘ç¹åœ°æ¶ˆå¤±æ˜¾ç¤ºï¼Œä¼šæ‰§è¡Œ `viewWillAppear` æ–¹æ³•\r\n\r\nå¦‚æœéœ€è¦åˆ·æ–°æ•°æ®ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚åœ¨ä¸åŒçš„æ–¹æ³•ä¸­è·å–æœ€æ–°æ•°æ®ã€‚\r\n\r\n#### æ‰“å¼€ App\r\n\r\n1. è®¾ç½® `App` çš„ `URLSchemes`ï¼Œæ‰“å¼€ `APP` ä¸»è¦é€šè¿‡ `URLScheme` æ‰“å¼€å’Œä¼ é€’å‚æ•°å€¼ã€‚è®¾ç½® `URLSchemes` æ—¶ï¼Œè¦ç‹¬ç‰¹ä¸€äº›ï¼Œé¿å…ä¸å…¶ä»– `App` é‡å¤\r\n   ![image](https://file.onnttf.site/2017/09/07/5.jpeg)\r\n2. åœ¨ `Widget` ä¸­æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œç”¨äºè§¦å‘æ‰“å¼€ `App` çš„æ“ä½œå’Œä¼ é€’å‚æ•°\r\n\r\n   ```objc\r\n   NSString *schemeString = @\"test_scheme://actionName?paramName=paramValue\";\r\n   [self.extensionContext openURL:[NSURL URLWithString:schemeString] completionHandler:^(BOOL success) {\r\n\r\n   }];\r\n   ```\r\n\r\n3. `Appdelegate` çš„ä»£ç†æ–¹æ³•ä¸­ï¼Œæˆªå– `URL`ï¼Œåšå“åº”å¤„ç†ï¼š\r\n\r\n   ```objc\r\n    // æ‰€æœ‰ç‰ˆæœ¬çš„éƒ½å¯ä»¥ä½¿ç”¨\r\n    - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {\r\n        [self appCallbackWithOpenUrl:url];\r\n        return YES;\r\n    }\r\n\r\n    // iOS 8 ä»¥å\r\n    - (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary<UIApplicationOpenURLOptionsKey, id> *)options {\r\n        [self appCallbackWithOpenUrl:url];\r\n        return YES;\r\n    }\r\n\r\n    // iOS 7\r\n    - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {\r\n        [self appCallbackWithOpenUrl:url];\r\n        return YES;\r\n    }\r\n\r\n    - (void)appCallbackWithOpenUrl:(NSURL *)url{\r\n        NSLog(@\"url: %@\", url.host);\r\n        // é’ˆå¯¹ url è¿›è¡Œä¸åŒçš„æ“ä½œ\r\n    }\r\n   ```\r\n\r\n## æœ€å\r\n\r\néšç€ `iOS` ç”Ÿæ€çš„æŒç»­å‘å±•ï¼Œ`Widget` ä¸ä»…æ‰©å±•äº†åº”ç”¨çš„åŠŸèƒ½ï¼Œè¿˜ä¸ºç”¨æˆ·æä¾›äº†æ›´åŠ ç›´è§‚å’Œä¾¿æ·çš„äº’åŠ¨æ–¹å¼ã€‚\r\n\r\né€šè¿‡åˆç†åˆ©ç”¨ `Widget`ï¼Œå¼€å‘è€…èƒ½å¤Ÿæå‡åº”ç”¨çš„ç”¨æˆ·ä½“éªŒï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿè®¿é—®é‡è¦ä¿¡æ¯ï¼Œå¹¶é€šè¿‡äº’åŠ¨æ›´åŠ æµç•…åœ°ä¸åº”ç”¨è¿›è¡Œè¿æ¥ã€‚\r\n",
    "number": 3,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2017-08-29T08:00:00Z",
    "updatedAt": "2025-02-03T15:27:41Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/3",
    "jsonFilePath": "discussions/3-D_kwDONzrbkM4AeLcC.json",
    "markdownFilePath": "2017/8/3-D_kwDONzrbkM4AeLcC.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcM",
    "title": "å¦‚ä½•è§£å†³ iOS ç³»ç»Ÿä¸­ double è½¬ NSString ç²¾åº¦ä¸¢å¤±é—®é¢˜",
    "body": "åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåå°ç»å¸¸è¿”å›å¸¦å°æ•°çš„æ•°å­—ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ `float` æˆ– `double` ç±»å‹æ¥æ¥æ”¶è¿™äº›æ•°æ®ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å°†è¿™äº›æ•°å­—å±•ç¤ºç»™ç”¨æˆ·æ—¶ï¼Œå¯èƒ½ä¼šå› ä¸ºç²¾åº¦ä¸¢å¤±è€Œå¯¼è‡´æ˜¾ç¤ºé”™è¯¯ã€‚\r\n\r\n## é—®é¢˜æè¿°\r\n\r\nå‡è®¾åå°è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š\r\n\r\n```json\r\n{\r\n  \"double\": 79.04\r\n}\r\n```\r\n\r\nå½“æˆ‘ä»¬å°†è¯¥æ•°æ®è§£æä¸ºå­—å…¸å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼š\r\n\r\n```objc\r\nNSDictionary *dic = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];\r\nNSString *result = [NSString stringWithFormat:@\"%@\", dic[@\"double\"]];\r\n\r\n//æœŸæœ›ç»“æœï¼š\"79.04\"\r\n//å®é™…ç»“æœï¼š\"79.04000000000001\"\r\n```\r\n\r\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåå°è¿”å›çš„æ•°å­—æ˜¯ `79.04`ï¼Œå½“æˆ‘ä»¬å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼ŒæœŸæœ›çš„ç»“æœæ˜¯ \"79.04\"ï¼Œä½†å®é™…ç»“æœå´æ˜¯ \"79.04000000000001\"ã€‚è¿™å°±æ˜¯ç²¾åº¦ä¸¢å¤±çš„è¡¨ç°ã€‚\r\n\r\n## åŸå› åˆ†æ\r\n\r\nè¿™ç§é—®é¢˜é€šå¸¸å‘ç”Ÿåœ¨ç›´æ¥ä½¿ç”¨ `double` ç±»å‹è¿›è¡Œå­—ç¬¦ä¸²è½¬æ¢æ—¶ã€‚ç”±äº `double` ç±»å‹ç”¨äºè¡¨ç¤ºæµ®åŠ¨å°æ•°ï¼Œè€Œå®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºå¯èƒ½ä¼šäº§ç”Ÿç²¾åº¦è¯¯å·®ï¼Œå¯¼è‡´è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶å‡ºç°ä¸å‡†ç¡®çš„ç»“æœã€‚\r\n\r\n## è§£å†³åŠæ³•\r\n\r\nè™½ç„¶å¯ä»¥é€šè¿‡æ§åˆ¶å°æ•°ä½æ•°æ¥è§„é¿ç²¾åº¦å¼‚å¸¸ï¼Œä½†è¿™ç§æ–¹æ³•å¹¶ä¸æ€»æ˜¯æœ‰æ•ˆï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•é¢„çŸ¥åå°è¿”å›çš„æ•°å­—æ ¼å¼ã€‚\r\n\r\nä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ `NSDecimalNumber` ç±»ï¼Œè¿™æ˜¯è‹¹æœæä¾›çš„ç”¨äºå¤„ç†ç²¾ç¡®å°æ•°çš„ç±»ï¼Œå®ƒèƒ½æœ‰æ•ˆé¿å…ç²¾åº¦ä¸¢å¤±ã€‚\r\n\r\n```objc\r\ndouble d = [dic[@\"double\"] doubleValue];\r\nNSString *dStr = [NSString stringWithFormat:@\"%f\", d];\r\nNSDecimalNumber *dn = [NSDecimalNumber decimalNumberWithString:dStr];\r\nNSString *result = [NSString stringWithFormat:@\"%@\", dn.stringValue];\r\n\r\n//æœŸæœ›ç»“æœï¼š\"79.04\"\r\n//å®é™…ç»“æœï¼š\"79.04\"\r\n```\r\n\r\nå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ `NSDecimalNumber` è½¬æ¢åï¼Œç²¾åº¦é—®é¢˜å¾—åˆ°äº†æœ‰æ•ˆè§£å†³ï¼Œç»“æœä¸é¢„æœŸä¸€è‡´ã€‚\r\n\r\n## æœ€å\r\n\r\nåœ¨å¤„ç†æµ®åŠ¨å°æ•°æ—¶ï¼Œå°½é‡é¿å…ç›´æ¥ä½¿ç”¨ `double` ç±»å‹è¿›è¡Œå­—ç¬¦ä¸²è½¬æ¢ã€‚ä½¿ç”¨ `NSDecimalNumber` ä¸ä»…èƒ½é¿å…ç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼Œè¿˜èƒ½ç¡®ä¿æ•°æ®è½¬æ¢çš„ç²¾ç¡®æ€§ã€‚\r\n\r\nå¸Œæœ›æœ¬ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ è§£å†³ç±»ä¼¼çš„ç²¾åº¦é—®é¢˜ï¼Œæå‡ä»£ç çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚\r\n",
    "number": 4,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2017-09-08T08:00:00Z",
    "updatedAt": "2025-02-03T15:29:39Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/4",
    "jsonFilePath": "discussions/4-D_kwDONzrbkM4AeLcM.json",
    "markdownFilePath": "2017/9/4-D_kwDONzrbkM4AeLcM.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcQ",
    "title": "ä»é›¶å¼€å§‹æ­å»º Hexo åšå®¢",
    "body": "[Hexo](https://hexo.io) æ˜¯ä¸€æ¬¾é«˜æ•ˆã€ç®€æ´ä¸”å¼ºå¤§çš„é™æ€åšå®¢æ¡†æ¶ï¼Œå¹¿å—å¼€å‘è€…å–œçˆ±ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œå®Œæˆ `Hexo` åšå®¢çš„å®‰è£…ä¸éƒ¨ç½²ï¼Œè½»æ¾åˆ›å»ºå±äºä½ çš„ä¸ªäººåšå®¢ï¼\r\n\r\n## å‡†å¤‡å·¥ä½œ\r\n\r\n`Hexo` éœ€è¦ä¸‹åˆ—ç¨‹åºçš„æ”¯æŒã€‚è¯·ç¡®ä¿ä½ å·²å®‰è£…è¿™äº›ç¨‹åºï¼š\r\n\r\n- `Node.js`\r\n\r\n  (`Node.js` ç‰ˆæœ¬éœ€ä¸ä½äº `10.13`ï¼Œå»ºè®®ä½¿ç”¨ `Node.js 12.0` åŠä»¥ä¸Šç‰ˆæœ¬)\r\n\r\n- `Git`\r\n\r\nå¦‚æœæ‚¨çš„ç”µè„‘ä¸­å·²ç»å®‰è£…äº†ä¸Šè¿°ç¨‹åºï¼Œæ‚¨å¯ä»¥ç›´æ¥å‰å¾€ä¸‹ä¸€èŠ‚ã€‚\r\n\r\n## å®‰è£… `Hexo` è„šæ‰‹æ¶\r\n\r\n```bash\r\n~/Desktop/blog\r\nâ¯ npm install -g hexo-cli\r\n\r\nadded 54 packages, and audited 55 packages in 8s\r\n\r\n14 packages are looking for funding\r\n  run `npm fund` for details\r\n\r\nfound 0 vulnerabilities\r\n```\r\n\r\nå®‰è£…å®Œæˆåï¼Œé€šè¿‡ `hexo -v` æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š\r\n\r\n```bash\r\n~/Desktop/blog\r\nâ¯ hexo -v\r\nhexo-cli: 4.3.2\r\nos: darwin 24.1.0 15.1.1\r\n\r\nnode: 16.20.2\r\nv8: 9.4.146.26-node.26\r\nuv: 1.49.2\r\nzlib: 1.2.12\r\nbrotli: 1.1.0\r\nares: 1.34.2\r\nmodules: 93\r\nnghttp2: 1.64.0\r\nnapi: 8\r\nllhttp: 6.0.11\r\nopenssl: 3.4.0\r\ncldr: 46.0\r\nicu: 76.1\r\ntz: 2024b\r\nunicode: 16.0\r\n```\r\n\r\n## åˆå§‹åŒ– `Hexo` åšå®¢\r\n\r\né€šè¿‡ç»ˆç«¯è¿›å…¥æ‚¨æƒ³è¦åˆ›å»ºåšå®¢çš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼š\r\n\r\n```bash\r\n~/Desktop/blog\r\nâ¯ hexo init\r\nINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git\r\nwarning hexo > warehouse > cuid@2.1.8: Cuid and other k-sortable and non-cryptographic ids (Ulid, ObjectId, KSUID, all UUIDs) are all insecure. Use @paralleldrive/cuid2 instead.\r\nwarning hexo-renderer-marked > jsdom > abab@2.0.6: Use your platform's native atob() and btoa() methods instead\r\nwarning hexo-renderer-marked > jsdom > data-urls > abab@2.0.6: Use your platform's native atob() and btoa() methods instead\r\nwarning hexo-renderer-marked > jsdom > domexception@4.0.0: Use your platform's native DOMException instead\r\nwarning hexo-renderer-stylus > stylus > glob@7.2.3: Glob versions prior to v9 are no longer supported\r\nwarning hexo-renderer-stylus > stylus > glob > inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.\r\nINFO  Start blogging with Hexo!\r\n```\r\n\r\nåˆå§‹åŒ–å®Œæˆåï¼Œæ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹ï¼š\r\n\r\n```bash\r\n~/Desktop/blog\r\nâ¯ tree -L 1\r\n.\r\nâ”œâ”€â”€ _config.landscape.yml\r\nâ”œâ”€â”€ _config.yml\r\nâ”œâ”€â”€ node_modules\r\nâ”œâ”€â”€ package.json\r\nâ”œâ”€â”€ scaffolds\r\nâ”œâ”€â”€ source\r\nâ”œâ”€â”€ themes\r\nâ””â”€â”€ yarn.lock\r\n\r\n5 directories, 4 files\r\n```\r\n\r\n- _config.yml\r\n\r\n  ç½‘ç«™çš„é…ç½®æ–‡ä»¶ã€‚æ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ï¼Œå¦‚ç½‘ç«™æ ‡é¢˜ã€ç½‘ç«™çš„å…³é”®è¯ç­‰ã€‚\r\n\r\n- package.json\r\n\r\n  åº”ç”¨ç¨‹åºçš„ä¾èµ–ä¿¡æ¯ã€‚\r\n  åŒ…æ‹¬ `EJS`ã€`Stylus` å’Œ `Markdown` æ¸²æŸ“å¼•æ“ï¼Œè¿™äº›å·²é»˜è®¤å®‰è£…ã€‚å¦‚æœä¸éœ€è¦ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªç”±ç§»é™¤å®ƒä»¬ã€‚\r\n\r\n- scaffolds\r\n\r\n  æ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼Œ`Hexo` ä¼šæ ¹æ® `scaffold` æ¥åˆ›å»ºæ–‡ä»¶ã€‚\r\n\r\n- source\r\n\r\n  èµ„æºæ–‡ä»¶å¤¹ã€‚ç”¨äºå­˜æ”¾ç”¨æˆ·èµ„æºã€‚é™¤äº† `_posts` æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œæ‰€æœ‰ä»¥ `_`ï¼ˆä¸‹åˆ’çº¿ï¼‰å¼€å¤´çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ä»¥åŠéšè—æ–‡ä»¶å°†è¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° `public` æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚\r\n\r\n- themes\r\n\r\n  ä¸»é¢˜æ–‡ä»¶å¤¹ã€‚`Hexo` ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚\r\n\r\n## é¢„è§ˆåšå®¢\r\n\r\nåœ¨ç»ˆç«¯ä¸­ï¼Œæ‰§è¡Œ `hexo server` å¯åŠ¨æœåŠ¡å™¨ï¼Œå³å¯çœ‹åˆ°ä½ çš„åšå®¢åˆå§‹ç•Œé¢ï¼\r\n\r\né»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š<http://localhost:4000/>ã€‚\r\n\r\n```bash\r\nâ¯ hexo server\r\nINFO  Validating config\r\nINFO  Start processing\r\nINFO  Hexo is running at http://localhost:4000/ . Press Ctrl+C to stop.\r\n```\r\n\r\n## éƒ¨ç½²åšå®¢åˆ° GitHub Pages\r\n\r\nä½¿ç”¨ `GitHub Actions` å°†åšå®¢éƒ¨ç½²åˆ° `GitHub Pages`ã€‚\r\n\r\n**è¯·æ³¨æ„**ï¼šåœ¨ä»¥ä¸‹æ­¥éª¤ä¸­ï¼Œæ‰€æœ‰æ¶‰åŠåˆ° GitHub ç”¨æˆ·åçš„åœ°æ–¹ï¼Œè¯·å°† `username` æ›¿æ¢ä¸ºä½ çš„ `GitHub` ç”¨æˆ·åã€‚\r\n\r\n1. åœ¨ `GitHub` ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `username.github.io` çš„ä»“åº“\r\n2. å‰å¾€ä»“åº“çš„è®¾ç½®é¡µé¢ï¼Œè¿›å…¥ `Settings > Pages`ï¼Œå°† `Source` ä¸­çš„é€‰é¡¹æ›´æ”¹ä¸º `GitHub Actions`ï¼Œç„¶åä¿å­˜è®¾ç½®\r\n3. åˆ›å»º `.github/workflows/pages.yml` æ–‡ä»¶ï¼Œå¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š\r\n\r\n   ```text\r\n   name: Pages\r\n\r\n   on:\r\n      push:\r\n         branches:\r\n            - main # default branch\r\n\r\n   jobs:\r\n      build:\r\n         runs-on: ubuntu-latest\r\n         steps:\r\n            - uses: actions/checkout@v4\r\n            with:\r\n               token: ${{ secrets.GITHUB_TOKEN }}\r\n               # If your repository depends on submodule, please see: https://github.com/actions/checkout\r\n               submodules: recursive\r\n            - name: Use Node.js 20\r\n            uses: actions/setup-node@v4\r\n            - name: Cache NPM dependencies\r\n            uses: actions/cache@v4\r\n            with:\r\n               path: node_modules\r\n               key: ${{ runner.OS }}-npm-cache\r\n               restore-keys: |\r\n                  ${{ runner.OS }}-npm-cache\r\n            - name: Install Dependencies\r\n            run: npm install\r\n            - name: Build\r\n            run: npm run build\r\n            - name: Upload Pages artifact\r\n            uses: actions/upload-pages-artifact@v3\r\n            with:\r\n               path: ./public\r\n      deploy:\r\n         needs: build\r\n         permissions:\r\n            pages: write\r\n            id-token: write\r\n         environment:\r\n            name: github-pages\r\n            url: ${{ steps.deployment.outputs.page_url }}\r\n         runs-on: ubuntu-latest\r\n         steps:\r\n            - name: Deploy to GitHub Pages\r\n            id: deployment\r\n            uses: actions/deploy-pages@v4\r\n   ```\r\n\r\n4. å°†åšå®¢æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶æ¨é€åˆ°è¯¥ä»“åº“\r\n5. å½“ action è¿è¡Œå®Œæˆåï¼Œå‰å¾€ <https://username.github.io> æŸ¥çœ‹å·²éƒ¨ç½²çš„åšå®¢\r\n\r\n### ä¸€é”®éƒ¨ç½²\r\n\r\nä¸ºäº†æ–¹ä¾¿å¿«æ·åœ°å°†æœ¬åœ°åšå®¢å‘å¸ƒåˆ° `GitHub Pages`ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£… [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git) éƒ¨ç½²å·¥å…·ã€‚é€šè¿‡è¯¥å·¥å…·ï¼Œå¯ä»¥ç›´æ¥å°†åšå®¢å‘å¸ƒåˆ° `GitHub Pages`ï¼Œå®ç°å¿«é€Ÿéƒ¨ç½²ã€‚\r\n\r\n1. åœ¨åšå®¢çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… `hexo-deployer-git` æ’ä»¶\r\n\r\n   ```bash\r\n   ~/Desktop/blog\r\n   â¯ npm install hexo-deployer-git --save\r\n   (node:15001) ExperimentalWarning: CommonJS module /usr/local/lib/node_modules/npm/node_modules/debug/src/node.js is loading ES Module /usr/local/lib/node_modules/npm/node_modules/supports-color/index.js using require().\r\n   Support for loading ES Module in require() is an experimental feature and might change at any time\r\n   (Use `node --trace-warnings ...` to show where the warning was created)\r\n\r\n   added 9 packages, and audited 232 packages in 5s\r\n\r\n   29 packages are looking for funding\r\n   run `npm fund` for details\r\n\r\n   found 0 vulnerabilities\r\n   ```\r\n\r\n2. ä¿®æ”¹ `_config.yml` æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®\r\n\r\n   ```text\r\n   deploy:\r\n      type: git\r\n      repo: https://github.com/<username>/<project>\r\n      # example, https://github.com/onnttf/onnttf.github.io\r\n      branch: gh-pages\r\n   ```\r\n\r\n3. æ‰§è¡Œ `hexo clean && hexo deploy` å³å¯\r\n\r\n## æ—¥å¸¸æ›´æ–°åšå®¢\r\n\r\nå½“ä½ å†™äº†æ–°çš„åšå®¢æ–‡ç« ï¼Œæˆ–æ˜¯ä¿®æ”¹äº†åšå®¢çš„ä¸»é¢˜åï¼Œåªéœ€è¦é€šè¿‡ç»ˆç«¯è¿›å…¥æœ¬åœ°åšå®¢çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–°å¹¶éƒ¨ç½²åšå®¢ï¼š\r\n\r\n```bash\r\nhexo clean && hexo deploy\r\n```\r\n\r\næ‰§è¡Œå®Œå‘½ä»¤åï¼Œæ‰€æœ‰åœ¨æœ¬åœ°çš„ä¿®æ”¹éƒ½ä¼šéƒ¨ç½²åˆ° `GitHub Pages`ï¼Œä½ çš„åšå®¢å°†ä¼šè‡ªåŠ¨æ›´æ–°ã€‚\r\n\r\n## æœ€å\r\n\r\nè®©æˆ‘ä»¬æŒç»­æ›´æ–°åšå®¢å†…å®¹ï¼Œåˆ†äº«æˆ‘ä»¬çš„æ‰€æ€æ‰€æƒ³ï¼\r\n",
    "number": 5,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2017-11-26T08:00:00Z",
    "updatedAt": "2025-02-03T15:30:16Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/5",
    "jsonFilePath": "discussions/5-D_kwDONzrbkM4AeLcQ.json",
    "markdownFilePath": "2017/11/5-D_kwDONzrbkM4AeLcQ.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcU",
    "title": "äºŒç»´ç ç”Ÿæˆä¸ç¾åŒ–",
    "body": "åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼ŒäºŒç»´ç ä½œä¸ºä¿¡æ¯ä¼ é€’çš„é‡è¦è½½ä½“ï¼Œå·²æ·±åº¦èå…¥æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ã€‚ä»ç§»åŠ¨æ”¯ä»˜ã€ç¤¾äº¤åˆ†äº«åˆ°èº«ä»½éªŒè¯ï¼ŒäºŒç»´ç ä»¥å…¶å¿«é€Ÿä¾¿æ·çš„ç‰¹ç‚¹ï¼Œæˆä¸ºç°ä»£ç§»åŠ¨åº”ç”¨ä¸å¯æˆ–ç¼ºçš„æ ‡é…åŠŸèƒ½ã€‚\r\n\r\næœ¬æ–‡å°†ç³»ç»Ÿè®²è§£å¦‚ä½•ä½¿ç”¨ [CIQRCodeGenerator](https://developer.apple.com/library/content/documentation/GraphicsImaging/Reference/CoreImageFilterReference/#//apple_ref/doc/filter/ci/CIQRCodeGenerator) å®ç°äºŒç»´ç çš„ç”Ÿæˆä¸ç¾åŒ–ã€‚\r\n\r\n## éœ€æ±‚èƒŒæ™¯\r\n\r\næœ¬æ–‡æºäºä¸€ä¸ªå®é™…é¡¹ç›®éœ€æ±‚ - å¼€å‘ç±»ä¼¼æ”¯ä»˜å®çº¢åŒ…çš„äºŒç»´ç åˆ†äº«åŠŸèƒ½ã€‚\r\n\r\nå…·ä½“è¦æ±‚åŒ…æ‹¬ï¼š\r\n\r\n1. ç”Ÿæˆé«˜æ¸…çš„äºŒç»´ç ï¼Œç¡®ä¿ç¨³å®šçš„è¯†åˆ«æ•ˆæœ\r\n2. åœ¨äºŒç»´ç ä¸­å¤®åµŒå…¥å“ç‰Œ `logo`ï¼Œæå‡å“ç‰Œè¾¨è¯†åº¦\r\n3. æ”¯æŒæ·»åŠ ç²¾ç¾èƒŒæ™¯å›¾ç‰‡ï¼Œè®©äºŒç»´ç æ›´å…·è§†è§‰å¸å¼•åŠ›\r\n4. å®ç°äºŒç»´ç é¢œè‰²çš„çµæ´»å®šåˆ¶ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„è®¾è®¡éœ€æ±‚\r\n\r\nåœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ï¼Œå°†ç³»ç»Ÿä¸”è¯¦ç»†åœ°è®²è§£å®ç°äºŒç»´ç ç”Ÿæˆä¸ç¾åŒ–çš„å®Œæ•´æµç¨‹ã€‚\r\n\r\n## æ ¸å¿ƒåŠŸèƒ½å®ç°\r\n\r\nåœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š\r\n\r\n- **CIQRCodeGenerator**: `CoreImage` æ¡†æ¶æä¾›çš„åŸç”ŸäºŒç»´ç ç”Ÿæˆå™¨\r\n- **çº é”™çº§åˆ«**: äºŒç»´ç çš„å®¹é”™èƒ½åŠ›ï¼Œåˆ†ä¸º L(7%)ã€M(15%)ã€Q(25%)ã€H(30%) å››ä¸ªç­‰çº§\r\n- **æ¸…æ™°åº¦å¤„ç†**: åŸç”Ÿç”Ÿæˆçš„äºŒç»´ç å¯èƒ½æ¨¡ç³Šï¼Œéœ€è¦è¿›è¡Œä¼˜åŒ–\r\n\r\n### ç”ŸæˆäºŒç»´ç \r\n\r\nç”ŸæˆäºŒç»´ç çš„åœºæ™¯éå¸¸å¹¿æ³›ï¼Œä¸ºäº†å®ç°äºŒç»´ç åŠŸèƒ½çš„çµæ´»å¤ç”¨ï¼Œæˆ‘ä»¬å°†äºŒç»´ç ç”Ÿæˆé€»è¾‘å°è£…ä¸º `UIImage` çš„æ‰©å±•ã€‚\r\n\r\næ•´ä¸ªç”Ÿæˆè¿‡ç¨‹ä¸»è¦åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š\r\n\r\n1. å¯¼å…¥ `Core Image` æ¡†æ¶\r\n\r\n   ```objc\r\n   #import <CoreImage/CoreImage.h>\r\n   ```\r\n\r\n2. åˆ©ç”¨ `CIFilter` åˆ›å»ºäºŒç»´ç \r\n\r\n   ```objc\r\n   // åˆ›å»º QR Code ç”Ÿæˆå™¨æ»¤é•œ\r\n   CIFilter *filter = [CIFilter filterWithName:@\"CIQRCodeGenerator\"];\r\n   // å°† filter æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºé»˜è®¤å€¼\r\n   [filter setDefaults];\r\n\r\n   // å°†å¾…ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º UTF-8 æ ¼å¼çš„æ•°æ®\r\n   NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];\r\n   [filter setValue:data forKey:@\"inputMessage\"];\r\n\r\n   // è®¾ç½®äºŒç»´ç çš„çº é”™çº§åˆ«ï¼Œçº é”™çº§åˆ«è¶Šé«˜ï¼ŒäºŒç»´ç çš„æŠ—æŸåèƒ½åŠ›è¶Šå¼º\r\n   // L (7%): é€‚ç”¨äºç¯å¢ƒè¾ƒå¥½çš„åœºæ™¯\r\n   // M (15%): å¸¸è§„ä½¿ç”¨çš„æ¨èçº§åˆ«\r\n   // Q (25%): é€‚åˆå¤æ‚åœºæ™¯æˆ–éœ€è¦æ·»åŠ  Logo\r\n   // H (30%): å¯¹æ¸…æ™°åº¦è¦æ±‚æœ€é«˜çš„åœºæ™¯\r\n   [filter setValue:@\"H\" forKey:@\"inputCorrectionLevel\"];\r\n\r\n   // è·å–ç”Ÿæˆçš„äºŒç»´ç å›¾åƒ\r\n   CIImage *outputImage = [filter outputImage];\r\n   ```\r\n\r\n### æ¸…æ™°åº¦ä¼˜åŒ–\r\n\r\nåŸç”Ÿç”Ÿæˆçš„äºŒç»´ç å›¾åƒåˆ†è¾¨ç‡è¾ƒä½ï¼Œä¸ºäº†è·å¾—æ›´å¥½çš„è¯†åˆ«æ•ˆæœå’Œè§†è§‰ä½“éªŒï¼Œæˆ‘ä»¬æä¾›ä¸¤ç§ä¼˜åŒ–æ–¹æ¡ˆã€‚\r\n\r\n#### CoreGraphics ä¼˜åŒ–æ–¹æ¡ˆ\r\n\r\nè¿™ç§æ–¹æ¡ˆé€šè¿‡ `CoreGraphics` æ¡†æ¶å¯¹äºŒç»´ç å›¾åƒè¿›è¡Œé‡ç»˜å’Œç¼©æ”¾ï¼Œèƒ½æœ‰æ•ˆæå‡å›¾åƒæ¸…æ™°åº¦ã€‚\r\n\r\n```objc\r\n/**\r\n è°ƒæ•´äºŒç»´ç æ¸…æ™°åº¦\r\n\r\n @param img åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param size ç›®æ ‡äºŒç»´ç å°ºå¯¸\r\n @return ä¼˜åŒ–åçš„æ¸…æ™°äºŒç»´ç å›¾ç‰‡\r\n */\r\n- (UIImage *)getHDImgWithCIImage:(CIImage *)img size:(CGSize)size {\r\n    // è®¡ç®—ç»˜åˆ¶åŒºåŸŸå’Œç¼©æ”¾æ¯”ä¾‹\r\n    CGRect extent = CGRectIntegral(img.extent);\r\n    CGFloat scale = MIN(size.width / CGRectGetWidth(extent), size.height / CGRectGetHeight(extent));\r\n\r\n    // åˆ›å»ºç°åº¦è‰²å½©ç©ºé—´çš„ä½å›¾ä¸Šä¸‹æ–‡\r\n    size_t width = CGRectGetWidth(extent) * scale;\r\n    size_t height = CGRectGetHeight(extent) * scale;\r\n    CGColorSpaceRef cs = CGColorSpaceCreateDeviceGray();\r\n    CGContextRef bitmapRef = CGBitmapContextCreate(nil, width, height, 8, 0, cs, (CGBitmapInfo)kCGImageAlphaNone);\r\n\r\n    // å°† CIImage è½¬æ¢ä¸º CGImage\r\n    CIContext *context = [CIContext contextWithOptions:nil];\r\n    CGImageRef bitmapImage = [context createCGImage:img fromRect:extent];\r\n\r\n    // è®¾ç½®å›¾åƒè´¨é‡å¹¶æ‰§è¡Œç¼©æ”¾ç»˜åˆ¶\r\n    CGContextSetInterpolationQuality(bitmapRef, kCGInterpolationNone);\r\n    CGContextScaleCTM(bitmapRef, scale, scale);\r\n    CGContextDrawImage(bitmapRef, extent, bitmapImage);\r\n\r\n    // ç”Ÿæˆæœ€ç»ˆå›¾åƒ\r\n    CGImageRef scaledImage = CGBitmapContextCreateImage(bitmapRef);\r\n\r\n    // æ¸…ç†èµ„æº\r\n    CGContextRelease(bitmapRef);\r\n    CGImageRelease(bitmapImage);\r\n\r\n    // åˆ›å»ºå¹¶è¿”å› UIImage\r\n    UIImage *outputImage = [UIImage imageWithCGImage:scaledImage];\r\n\r\n    // é‡Šæ”¾å›¾åƒèµ„æº\r\n    CGImageRelease(scaledImage);\r\n    CGColorSpaceRelease(cs);\r\n\r\n    return outputImage;\r\n}\r\n```\r\n\r\n#### CIFilter ä¼˜åŒ–æ–¹æ¡ˆ\r\n\r\nè¿™ç§æ–¹æ¡ˆé€šè¿‡ `CIFilter` æ»¤é•œå¯¹äºŒç»´ç å›¾åƒè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥æœ‰æ•ˆæå‡å›¾åƒæ¸…æ™°åº¦ã€‚\r\n\r\n```objc\r\n/**\r\n ä½¿ç”¨ CIFilter è°ƒæ•´äºŒç»´ç æ¸…æ™°åº¦\r\n\r\n @param img åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param size ç›®æ ‡äºŒç»´ç å°ºå¯¸\r\n @return ä¼˜åŒ–åçš„æ¸…æ™°äºŒç»´ç å›¾ç‰‡\r\n */\r\n- (UIImage *)getHDImgWithCIFilterAndCIImage:(CIImage *)img size:(CGSize)size {\r\n    // è®¾ç½®äºŒç»´ç é¢œè‰²\r\n    UIColor *pointColor = [UIColor blackColor];\r\n    UIColor *backgroundColor = [UIColor whiteColor];\r\n\r\n    // åˆ›å»ºé¢œè‰²æ»¤é•œ\r\n    CIFilter *colorFilter = [CIFilter filterWithName:@\"CIFalseColor\"\r\n                                    keysAndValues:\r\n                            @\"inputImage\", img,\r\n                            @\"inputColor0\", [CIColor colorWithCGColor:pointColor.CGColor],\r\n                            @\"inputColor1\", [CIColor colorWithCGColor:backgroundColor.CGColor],\r\n                            nil];\r\n\r\n    CIImage *qrImage = colorFilter.outputImage;\r\n\r\n    // ç»˜åˆ¶æœ€ç»ˆå›¾åƒ\r\n    CGImageRef cgImage = [[CIContext contextWithOptions:nil] createCGImage:qrImage fromRect:qrImage.extent];\r\n    UIGraphicsBeginImageContext(size);\r\n    CGContextRef context = UIGraphicsGetCurrentContext();\r\n    CGContextSetInterpolationQuality(context, kCGInterpolationNone);\r\n    CGContextScaleCTM(context, 1.0, -1.0);\r\n    CGContextDrawImage(context, CGContextGetClipBoundingBox(context), cgImage);\r\n    UIImage *codeImage = UIGraphicsGetImageFromCurrentImageContext();\r\n    UIGraphicsEndImageContext();\r\n\r\n    CGImageRelease(cgImage);\r\n\r\n    return codeImage;\r\n}\r\n```\r\n\r\nä¸‹é¢è¿™å¼ å›¾ç‰‡å±•ç¤ºäº†ç»è¿‡æ¸…æ™°åº¦å¤„ç†åçš„äºŒç»´ç ï¼Œä½ å¯ä»¥å‘ç°æ¯ä¸ªåƒç´ ç‚¹éƒ½æ¸…æ™°å¯è§ï¼Œæ‰«æè¯†åˆ«ä¹Ÿæ›´åŠ ç¨³å®šå¯é ã€‚\r\n\r\n![image](https://file.onnttf.site/2017/12/15/1.jpeg)\r\n\r\nç»è¿‡ä¼˜åŒ–åçš„å›¾åƒè´¨é‡å®Œå…¨å¯ä»¥æ»¡è¶³å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚\r\n\r\n### ç¾åŒ–äºŒç»´ç \r\n\r\nåˆ›å»ºåŸºç¡€äºŒç»´ç åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯¹å…¶è¿›è¡Œç¾åŒ–ï¼Œä¸»è¦åŒ…æ‹¬é¢œè‰²ä¿®æ”¹ã€æ·»åŠ  `logo` å’Œå›¾ç‰‡æ‹¼æ¥ç­‰åŠŸèƒ½ã€‚\r\n\r\n#### ä¿®æ”¹äºŒç»´ç é¢œè‰²\r\n\r\näºŒç»´ç é¢œè‰²ä¿®æ”¹çš„æ ¸å¿ƒåŸç†æ˜¯éå†å¹¶ä¿®æ”¹å›¾åƒçš„æ¯ä¸ªåƒç´ ç‚¹ã€‚æˆ‘ä»¬é€šè¿‡ä½å›¾ä¸Šä¸‹æ–‡æ¥å¤„ç†å›¾åƒæ•°æ®ï¼š\r\n\r\n```objc\r\n/**\r\n ä¿®æ”¹äºŒç»´ç é¢œè‰²\r\n\r\n @param image åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param red çº¢è‰²é€šé“å€¼ (0-255)\r\n @param green ç»¿è‰²é€šé“å€¼ (0-255)\r\n @param blue è“è‰²é€šé“å€¼ (0-255)\r\n @return ä¿®æ”¹é¢œè‰²åçš„äºŒç»´ç å›¾ç‰‡\r\n */\r\n+ (UIImage *)changeColorWithQRCodeImg:(UIImage *)image\r\n                                  red:(NSUInteger)red\r\n                                green:(NSUInteger)green\r\n                                 blue:(NSUInteger)blue {\r\n    const int imageWidth = image.size.width;\r\n    const int imageHeight = image.size.height;\r\n    size_t bytesPerRow = imageWidth * 4;\r\n    uint32_t *rgbImageBuf = (uint32_t *)malloc(bytesPerRow * imageHeight);\r\n\r\n    // åˆ›å»º RGB è‰²å½©ç©ºé—´å’Œä½å›¾ä¸Šä¸‹æ–‡\r\n    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();\r\n    CGContextRef context = CGBitmapContextCreate(rgbImageBuf, imageWidth, imageHeight, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaNoneSkipLast);\r\n\r\n    // ç»˜åˆ¶åŸå§‹å›¾åƒåˆ°ä½å›¾ä¸Šä¸‹æ–‡\r\n    CGContextDrawImage(context, (CGRect){CGPointZero, image.size}, image.CGImage);\r\n\r\n    int pixelNumber = imageHeight * imageWidth;\r\n    // ä¿®æ”¹åƒç´ é¢œè‰²\r\n    [self changeColorOnPixel:rgbImageBuf pixelNum:pixelNumber red:red green:green blue:blue];\r\n\r\n    // åˆ›å»ºæ–°çš„å›¾åƒ\r\n    CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, rgbImageBuf, bytesPerRow, ProviderReleaseData);\r\n    CGImageRef imageRef = CGImageCreate(imageWidth, imageHeight, 8, 32, bytesPerRow, colorSpace, kCGImageAlphaLast | kCGBitmapByteOrder32Little, dataProvider, NULL, true, kCGRenderingIntentDefault);\r\n    UIImage *resultImage = [UIImage imageWithCGImage:imageRef];\r\n\r\n    // é‡Šæ”¾èµ„æº\r\n    CGImageRelease(imageRef);\r\n    CGColorSpaceRelease(colorSpace);\r\n    CGContextRelease(context);\r\n\r\n    return resultImage;\r\n}\r\n\r\n/**\r\n éå†å¹¶ä¿®æ”¹åƒç´ ç‚¹é¢œè‰²\r\n\r\n @param rgbImageBuf åƒç´ æ•°æ®ç¼“å†²åŒº\r\n @param pixelNum åƒç´ æ€»æ•°\r\n @param red çº¢è‰²é€šé“å€¼ (0-255)\r\n @param green ç»¿è‰²é€šé“å€¼ (0-255)\r\n @param blue è“è‰²é€šé“å€¼ (0-255)\r\n */\r\n+ (void)changeColorOnPixel:(uint32_t *)rgbImageBuf\r\n                 pixelNum:(int)pixelNum\r\n                      red:(NSUInteger)red\r\n                   green:(NSUInteger)green\r\n                    blue:(NSUInteger)blue {\r\n    uint32_t *pCurPtr = rgbImageBuf;\r\n\r\n    for (int i = 0; i < pixelNum; i++, pCurPtr++) {\r\n        // è¯†åˆ«äºŒç»´ç çš„æ•°æ®ç‚¹\r\n        if ((*pCurPtr & 0xffffff00) < 0xd0d0d000) {\r\n            uint8_t *ptr = (uint8_t *)pCurPtr;\r\n            ptr[3] = red;\r\n            ptr[2] = green;\r\n            ptr[1] = blue;\r\n        } else {\r\n            // å°†èƒŒæ™¯è®¾ä¸ºé€æ˜\r\n            uint8_t *ptr = (uint8_t *)pCurPtr;\r\n            ptr[0] = 0;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n![image](https://file.onnttf.site/2017/12/15/2.jpeg)\r\n\r\n#### æ·»åŠ  logo\r\n\r\nä¸ºäºŒç»´ç æ·»åŠ  `logo` å¯ä»¥æå‡å“ç‰Œè¯†åˆ«åº¦ã€‚æ³¨æ„ `logo` å¤§å°è¦é€‚ä¸­ï¼Œé¿å…å½±å“äºŒç»´ç çš„è¯†åˆ«ï¼š\r\n\r\n```objc\r\n/**\r\n ä¸ºäºŒç»´ç æ·»åŠ  logo\r\n\r\n @param img åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param size ç›®æ ‡äºŒç»´ç å°ºå¯¸\r\n @param logoImg logo å›¾ç‰‡\r\n @return æ·»åŠ  logo åçš„äºŒç»´ç å›¾ç‰‡\r\n */\r\n- (UIImage *)getHDImgWithCIImage:(CIImage *)img\r\n                            size:(CGSize)size\r\n                         logoImg:(UIImage *)logoImg {\r\n    // è®¡ç®—äºŒç»´ç ç¼©æ”¾æ¯”ä¾‹\r\n    CGRect extent = CGRectIntegral(img.extent);\r\n    CGFloat scale = MIN(size.width / CGRectGetWidth(extent), size.height / CGRectGetHeight(extent));\r\n\r\n    // åˆ›å»ºä½å›¾ä¸Šä¸‹æ–‡\r\n    size_t width = CGRectGetWidth(extent) * scale;\r\n    size_t height = CGRectGetHeight(extent) * scale;\r\n    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();\r\n    CGContextRef bitmapRef = CGBitmapContextCreate(nil, width, height, 8, 0, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaNone);\r\n\r\n    // ç»˜åˆ¶äºŒç»´ç å›¾åƒåˆ°ä¸Šä¸‹æ–‡\r\n    CIContext *context = [CIContext contextWithOptions:nil];\r\n    CGImageRef bitmapImage = [context createCGImage:img fromRect:extent];\r\n    CGContextSetInterpolationQuality(bitmapRef, kCGInterpolationNone);\r\n    CGContextScaleCTM(bitmapRef, scale, scale);\r\n    CGContextDrawImage(bitmapRef, extent, bitmapImage);\r\n\r\n    // ç”ŸæˆäºŒç»´ç å›¾åƒ\r\n    CGImageRef scaledImage = CGBitmapContextCreateImage(bitmapRef);\r\n    UIImage *outputImage = [UIImage imageWithCGImage:scaledImage];\r\n\r\n    // å¼€å§‹ç»˜åˆ¶ logo\r\n    UIGraphicsBeginImageContextWithOptions(outputImage.size, NO, [[UIScreen mainScreen] scale]);\r\n    [outputImage drawInRect:CGRectMake(0, 0, size.width, size.height)];\r\n    // logo å±…ä¸­ç»˜åˆ¶\r\n    [logoImg drawInRect:CGRectMake((size.width - logoImg.size.width) / 2.0,\r\n                                   (size.height - logoImg.size.height) / 2.0,\r\n                                   logoImg.size.width,\r\n                                   logoImg.size.height)];\r\n    UIImage *newPic = UIGraphicsGetImageFromCurrentImageContext();\r\n    UIGraphicsEndImageContext();\r\n\r\n    // æ¸…ç†èµ„æº\r\n    CGContextRelease(bitmapRef);\r\n    CGImageRelease(bitmapImage);\r\n    CGImageRelease(scaledImage);\r\n    CGColorSpaceRelease(colorSpace);\r\n\r\n    return newPic;\r\n}\r\n```\r\n\r\n#### æ‹¼æ¥å›¾ç‰‡\r\n\r\næˆ‘ä»¬è¿˜å¯ä»¥å°†äºŒç»´ç ä¸å…¶ä»–å›¾ç‰‡çµæ´»æ‹¼æ¥ï¼Œä»è€Œå®ç°æ›´ä¸°å¯Œçš„è§†è§‰æ•ˆæœã€‚\r\n\r\nä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†äºŒç»´ç ä¸å…¶ä»–å›¾ç‰‡æŒ‰ç…§æŒ‡å®šä½ç½®ç»„åˆåœ¨ä¸€èµ·ï¼š\r\n\r\n```objc\r\n/**\r\n æ‹¼æ¥ä¸¤å¼ å›¾ç‰‡\r\n\r\n @param img1 åº•å›¾\r\n @param img2 ä¸Šå±‚å›¾ç‰‡\r\n @param location ä¸Šå±‚å›¾ç‰‡ç›¸å¯¹äºåº•å›¾çš„ä½ç½®\r\n @return æ‹¼æ¥åçš„å›¾ç‰‡\r\n */\r\n+ (UIImage *)spliceImg1:(UIImage *)img1\r\n                   img2:(UIImage *)img2\r\n          img2Location:(CGPoint)location {\r\n    CGSize img2Size = img2.size;\r\n\r\n    // åˆ›å»ºç»˜å›¾ä¸Šä¸‹æ–‡\r\n    UIGraphicsBeginImageContextWithOptions(img1.size, NO, [[UIScreen mainScreen] scale]);\r\n\r\n    // ç»˜åˆ¶åº•å›¾\r\n    [img1 drawInRect:CGRectMake(0, 0, img1.size.width, img1.size.height)];\r\n\r\n    // åœ¨æŒ‡å®šä½ç½®ç»˜åˆ¶ä¸Šå±‚å›¾ç‰‡\r\n    [img2 drawInRect:CGRectMake(location.x, location.y, img2Size.width, img2Size.height)];\r\n\r\n    // è·å–æœ€ç»ˆæ‹¼æ¥åçš„å›¾ç‰‡\r\n    UIImage *newPic = UIGraphicsGetImageFromCurrentImageContext();\r\n    UIGraphicsEndImageContext();\r\n\r\n    return newPic;\r\n}\r\n```\r\n\r\nä¸‹å›¾å±•ç¤ºäº†äºŒç»´ç ä¸å›¾ç‰‡ç´ ææ‹¼æ¥åçš„æ•ˆæœã€‚\r\n\r\n![image](https://file.onnttf.site/2017/12/15/3.jpeg)\r\n\r\né€šè¿‡è¿™ç§çµæ´»çš„ç»„åˆæ–¹å¼ï¼Œæˆ‘ä»¬ä¸ä»…ä¿æŒäº†äºŒç»´ç çš„åŠŸèƒ½æ€§ï¼Œè¿˜å¤§å¤§æå‡äº†å…¶è§†è§‰è¡¨ç°åŠ›å’Œå“ç‰Œè¾¨è¯†åº¦ã€‚\r\n\r\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›ä¸€æ­¥ä¼˜åŒ–æ‹¼æ¥æ•ˆæœï¼š\r\n\r\n- è°ƒæ•´å›¾ç‰‡å°ºå¯¸æ¯”ä¾‹ï¼Œç¡®ä¿è§†è§‰é‡ç‚¹çªå‡º\r\n- ç²¾å¿ƒè®¾è®¡å›¾ç‰‡ä½ç½®ï¼Œæ‰“é€ åˆç†çš„è§†è§‰å±‚æ¬¡\r\n- é€‰æ‹©åˆé€‚çš„èƒŒæ™¯å›¾ç‰‡ï¼Œæå‡æ•´ä½“ç¾æ„Ÿ\r\n- æ³¨æ„ä¿æŒäºŒç»´ç è¯†åˆ«åŒºåŸŸçš„æ¸…æ™°åº¦\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨è‹¹æœåŸç”Ÿæ¡†æ¶å®ç°äºŒç»´ç çš„ç”Ÿæˆå’Œç¾åŒ–ï¼Œå¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ çš„å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚\r\n",
    "number": 6,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2017-12-15T08:00:00Z",
    "updatedAt": "2025-02-03T15:30:57Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/6",
    "jsonFilePath": "discussions/6-D_kwDONzrbkM4AeLcU.json",
    "markdownFilePath": "2017/12/6-D_kwDONzrbkM4AeLcU.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcc",
    "title": "WKWebView å®æˆ˜æŒ‡å—",
    "body": "`WKWebView` æ˜¯è‹¹æœæä¾›çš„ç°ä»£åŒ–ç½‘é¡µæµè§ˆæ§ä»¶ï¼Œç”¨äºåœ¨ `iOS` åº”ç”¨ä¸­å±•ç¤ºç½‘é¡µå†…å®¹ã€‚å®ƒä» `iOS 8` å¼€å§‹æ”¯æŒä½¿ç”¨ã€‚\r\n\r\n## ä¸ºä»€ä¹ˆé€‰æ‹© `WKWebView`\r\n\r\nç›¸æ¯”äºä¼ ç»Ÿçš„ `UIWebView`ï¼Œ`WKWebView` å…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š\r\n\r\n1. å“è¶Šçš„æ€§èƒ½è¡¨ç°å’Œç¨³å®šæ€§\r\n2. æ˜¾è‘—é™ä½å†…å­˜å ç”¨\r\n3. å®Œæ•´æ”¯æŒç°ä»£ `HTML5` ç‰¹æ€§\r\n4. æµç•…çš„ `60fps` æ¸²æŸ“å’ŒåŸç”Ÿæ‰‹åŠ¿æ”¯æŒ\r\n5. ä¸°å¯Œçš„ä»£ç†æ–¹æ³•ï¼Œæä¾›æ›´å¼ºå¤§çš„æ§åˆ¶èƒ½åŠ›\r\n6. æ”¯æŒè¿›ç¨‹é—´é€šä¿¡ï¼Œæ›´å®‰å…¨å¯é \r\n\r\næ›´å¤šæŠ€æœ¯ç»†èŠ‚å¯ä»¥æŸ¥çœ‹ [WebKit å®˜æ–¹æ–‡æ¡£](https://developer.apple.com/documentation/webkit)\r\n\r\n## åŸºæœ¬ä½¿ç”¨\r\n\r\n### å¼•å…¥æ¡†æ¶\r\n\r\né¦–å…ˆéœ€è¦å¯¼å…¥ `WebKit` æ¡†æ¶ï¼š\r\n\r\n```objc\r\n#import <WebKit/WebKit.h>\r\n```\r\n\r\n### åˆ›å»ºå’Œé…ç½® WKWebView\r\n\r\n```objc\r\n// åˆ›å»º WKUserContentController ç”¨äº JS äº¤äº’\r\nWKUserContentController *userContentController = [[WKUserContentController alloc] init];\r\n\r\n// æ³¨å…¥ cookies\r\nNSString *js = @\"document.cookie='user=zhangpeng'\";\r\nWKUserScript *cookieScript = [[WKUserScript alloc] initWithSource:js\r\n                                                    injectionTime:WKUserScriptInjectionTimeAtDocumentStart\r\n                                                 forMainFrameOnly:NO];\r\n[userContentController addUserScript:cookieScript];\r\n\r\n// é…ç½® WKWebView\r\nWKWebViewConfiguration *config = [[WKWebViewConfiguration alloc] init];\r\nconfig.userContentController = userContentController;\r\n_config = config;\r\n\r\n// æ³¨å†Œ JS è°ƒç”¨å¤„ç†å™¨\r\nfor (NSString *scriptMessage in self.scriptMessages) {\r\n    [config.userContentController addScriptMessageHandler:self name:scriptMessage];\r\n}\r\n\r\n// åˆ›å»º WKWebView å®ä¾‹\r\nWKWebView *webView = [[WKWebView alloc] initWithFrame:CGRectMake(0, 0, kScreenW, kMainAreaHeightNoTab)\r\n                                        configuration:config];\r\nwebView.UIDelegate = self;        // UI äº¤äº’ä»£ç†\r\nwebView.navigationDelegate = self; // å¯¼èˆªä»£ç†\r\n[self.view addSubview:webView];\r\n_webView = webView;\r\n```\r\n\r\n## ä»£ç†æ–¹æ³•\r\n\r\n### WKNavigationDelegate\r\n\r\n`WKNavigationDelegate` æä¾›é¡µé¢åŠ è½½ç”Ÿå‘½å‘¨æœŸçš„å›è°ƒæ–¹æ³•ï¼š\r\n\r\n```objc\r\n// 1. å†³å®šæ˜¯å¦å…è®¸å¯¼èˆª\r\n- (void)webView:(WKWebView *)webView\r\ndecidePolicyForNavigationAction:(WKNavigationAction *)navigationAction\r\n  decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler {\r\n    NSLog(@\"%s\", __func__);\r\n    decisionHandler(WKNavigationActionPolicyAllow); // å…è®¸å¯¼èˆª\r\n}\r\n\r\n// 2. å¼€å§‹åŠ è½½\r\n- (void)webView:(WKWebView *)webView didStartProvisionalNavigation:(WKNavigation *)navigation {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n\r\n// 3. æ”¶åˆ°å“åº”åå†³å®šæ˜¯å¦ç»§ç»­\r\n- (void)webView:(WKWebView *)webView\r\ndecidePolicyForNavigationResponse:(WKNavigationResponse *)navigationResponse\r\n   decisionHandler:(void (^)(WKNavigationResponsePolicy))decisionHandler {\r\n    NSLog(@\"%s\", __func__);\r\n    decisionHandler(WKNavigationResponsePolicyAllow); // å…è®¸ç»§ç»­åŠ è½½\r\n}\r\n\r\n// 4. å¼€å§‹æ¥æ”¶å†…å®¹\r\n- (void)webView:(WKWebView *)webView didCommitNavigation:(WKNavigation *)navigation {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n\r\n// 5. åŠ è½½å®Œæˆ\r\n- (void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n\r\n// 6. åŠ è½½å¤±è´¥\r\n- (void)webView:(WKWebView *)webView\r\ndidFailNavigation:(WKNavigation *)navigation\r\n       withError:(NSError *)error {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n\r\n// 7. åŠ è½½å†…å®¹å¤±è´¥\r\n- (void)webView:(WKWebView *)webView didFailProvisionalNavigation:(WKNavigation *)navigation {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n```\r\n\r\nå…¶ä»–é‡è¦çš„ä»£ç†æ–¹æ³•ï¼š\r\n\r\n```objc\r\n// å¤„ç†é‡å®šå‘\r\n- (void)webView:(WKWebView *)webView\r\ndidReceiveServerRedirectForProvisionalNavigation:(WKNavigation *)navigation {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n\r\n// å¤„ç† SSL è¯ä¹¦è®¤è¯\r\n- (void)webView:(WKWebView *)webView\r\ndidReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge\r\ncompletionHandler:(void (^)(NSURLSessionAuthChallengeDisposition, NSURLCredential * _Nullable))completionHandler {\r\n    NSLog(@\"%s\", __func__);\r\n    // åˆ›å»ºå‡­è¯å¹¶ä¿¡ä»»æœåŠ¡å™¨è¯ä¹¦\r\n    NSURLCredential *credential = [[NSURLCredential alloc] initWithTrust:challenge.protectionSpace.serverTrust];\r\n    completionHandler(NSURLSessionAuthChallengeUseCredential, credential); // ä½¿ç”¨å‡­è¯ç»§ç»­è®¤è¯\r\n}\r\n\r\n// è¿›ç¨‹ç»ˆæ­¢å¤„ç†\r\n- (void)webViewWebContentProcessDidTerminate:(WKWebView *)webView {\r\n    NSLog(@\"%s\", __func__);\r\n}\r\n```\r\n\r\n### WKUIDelegate\r\n\r\n`WKUIDelegate` ä¸»è¦ç”¨äºå¤„ç† `JavaScript` çš„ `UI` äº¤äº’ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ `alert` å¼¹çª—ï¼š\r\n\r\n```objc\r\n// å¤„ç† JavaScript å¼¹çª—è­¦å‘Š\r\n- (void)webView:(WKWebView *)webView\r\nrunJavaScriptAlertPanelWithMessage:(NSString *)message\r\ninitiatedByFrame:(WKFrameInfo *)frame\r\ncompletionHandler:(void (^)(void))completionHandler {\r\n    // åˆ›å»ºè­¦å‘Šå¼¹çª—\r\n    UIAlertController *alert = [UIAlertController alertControllerWithTitle:@\"æç¤º\"\r\n                                                                   message:message\r\n                                                            preferredStyle:UIAlertControllerStyleAlert];\r\n\r\n    // æ·»åŠ ç¡®å®šæŒ‰é’®\r\n    UIAlertAction *action = [UIAlertAction actionWithTitle:@\"ç¡®å®š\"\r\n                                                     style:UIAlertActionStyleDefault\r\n                                                   handler:nil];\r\n    [alert addAction:action];\r\n\r\n    // æ˜¾ç¤ºå¼¹çª—\r\n    [self presentViewController:alert animated:YES completion:nil];\r\n\r\n    // è°ƒç”¨å®Œæˆå¤„ç†\r\n    completionHandler();\r\n}\r\n```\r\n\r\nè¿˜æœ‰ä¸¤ä¸ªç”¨äºå¤„ç†ç¡®è®¤æ¡†å’Œè¾“å…¥æ¡†çš„æ–¹æ³•ï¼š\r\n\r\n```objc\r\n// å¤„ç† JavaScript ç¡®è®¤æ¡†\r\n- (void)webView:(WKWebView *)webView\r\nrunJavaScriptConfirmPanelWithMessage:(NSString *)message\r\ninitiatedByFrame:(WKFrameInfo *)frame\r\ncompletionHandler:(void (^)(BOOL result))completionHandler {\r\n    // æ˜¾ç¤ºç¡®è®¤æ¡†\r\n    UIAlertController *alert = [UIAlertController alertControllerWithTitle:@\"ç¡®è®¤\"\r\n                                                                   message:message\r\n                                                            preferredStyle:UIAlertControllerStyleAlert];\r\n\r\n    // ç¡®å®šæŒ‰é’®\r\n    UIAlertAction *confirmAction = [UIAlertAction actionWithTitle:@\"ç¡®å®š\"\r\n                                                           style:UIAlertActionStyleDefault\r\n                                                         handler:^(UIAlertAction * _Nonnull action) {\r\n                                                             completionHandler(YES); // ç¡®å®šæ—¶è¿”å› YES\r\n                                                         }];\r\n\r\n    // å–æ¶ˆæŒ‰é’®\r\n    UIAlertAction *cancelAction = [UIAlertAction actionWithTitle:@\"å–æ¶ˆ\"\r\n                                                          style:UIAlertActionStyleCancel\r\n                                                        handler:^(UIAlertAction * _Nonnull action) {\r\n                                                            completionHandler(NO); // å–æ¶ˆæ—¶è¿”å› NO\r\n                                                        }];\r\n\r\n    [alert addAction:confirmAction];\r\n    [alert addAction:cancelAction];\r\n\r\n    // æ˜¾ç¤ºå¼¹çª—\r\n    [self presentViewController:alert animated:YES completion:nil];\r\n}\r\n\r\n// å¤„ç† JavaScript è¾“å…¥æ¡†\r\n- (void)webView:(WKWebView *)webView\r\nrunJavaScriptTextInputPanelWithPrompt:(NSString *)prompt\r\ndefaultText:(nullable NSString *)defaultText\r\ninitiatedByFrame:(WKFrameInfo *)frame\r\ncompletionHandler:(void (^)(NSString * _Nullable result))completionHandler {\r\n    // åˆ›å»ºè¾“å…¥æ¡†å¼¹çª—\r\n    UIAlertController *alert = [UIAlertController alertControllerWithTitle:nil\r\n                                                                   message:prompt\r\n                                                            preferredStyle:UIAlertControllerStyleAlert];\r\n\r\n    // æ·»åŠ æ–‡æœ¬è¾“å…¥æ¡†\r\n    [alert addTextFieldWithConfigurationHandler:^(UITextField * _Nonnull textField) {\r\n        textField.text = defaultText; // è®¾ç½®é»˜è®¤æ–‡æœ¬\r\n    }];\r\n\r\n    // ç¡®å®šæŒ‰é’®\r\n    UIAlertAction *confirmAction = [UIAlertAction actionWithTitle:@\"ç¡®å®š\"\r\n                                                           style:UIAlertActionStyleDefault\r\n                                                         handler:^(UIAlertAction * _Nonnull action) {\r\n                                                             // è¿”å›è¾“å…¥çš„æ–‡æœ¬\r\n                                                             completionHandler(alert.textFields.firstObject.text);\r\n                                                         }];\r\n\r\n    // å–æ¶ˆæŒ‰é’®\r\n    UIAlertAction *cancelAction = [UIAlertAction actionWithTitle:@\"å–æ¶ˆ\"\r\n                                                          style:UIAlertActionStyleCancel\r\n                                                        handler:^(UIAlertAction * _Nonnull action) {\r\n                                                            // å–æ¶ˆæ—¶è¿”å› nil\r\n                                                            completionHandler(nil);\r\n                                                        }];\r\n\r\n    [alert addAction:confirmAction];\r\n    [alert addAction:cancelAction];\r\n\r\n    // æ˜¾ç¤ºå¼¹çª—\r\n    [self presentViewController:alert animated:YES completion:nil];\r\n}\r\n```\r\n\r\n## JavaScript äº¤äº’\r\n\r\n`WKWebView` æä¾›ä¸¤ç§ä¸ `JavaScript` äº¤äº’çš„æ–¹å¼ã€‚\r\n\r\n### MessageHandler æ–¹å¼\r\n\r\né€šè¿‡ `WKScriptMessageHandler` æ¥æ”¶ `JavaScript` æ¶ˆæ¯ï¼š\r\n\r\n```objc\r\n- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message {\r\n    // å¤„ç†JSä¼ æ¥çš„æ¶ˆæ¯\r\n    // é€šè¿‡æŸ¥çœ‹ `WKScriptMessage`ï¼Œå¯ä»¥çœ‹åˆ° `name` å’Œ `body` ä¸¤ä¸ªå±æ€§ï¼Œ`name` å°±æ˜¯æ³¨å…¥çš„ `js` å¯¹è±¡åç§°ï¼Œ`body` å°±æ˜¯å‰ç«¯ä¼ ç»™æˆ‘ä»¬çš„å‚æ•°\r\n    if ([message.name isEqualToString:@\"test1\"]) {\r\n        NSLog(@\"æ”¶åˆ°test1æ¶ˆæ¯ï¼š%@\", message.body);\r\n    } else if ([message.name isEqualToString:@\"test2\"]) {\r\n        NSLog(@\"æ”¶åˆ°test2æ¶ˆæ¯ï¼š%@\", message.body);\r\n    }\r\n}\r\n```\r\n\r\n`JavaScript` è°ƒç”¨ç¤ºä¾‹ï¼š\r\n\r\n```javascript\r\nwindow.webkit.messageHandlers.test1.postMessage({ data: \"Hello\" });\r\n```\r\n\r\n### URL Schema æ–¹å¼\r\n\r\né€šè¿‡æ‹¦æˆªå¯¼èˆªè¯·æ±‚æ¥å¤„ç†è‡ªå®šä¹‰ `URL`ï¼š\r\n\r\n```objc\r\n- (void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler {\r\n    NSURL *url = navigationAction.request.URL;\r\n    if ([url.scheme isEqualToString:@\"myapp\"]) {\r\n        // å¤„ç†è‡ªå®šä¹‰URL\r\n        decisionHandler(WKNavigationActionPolicyCancel);\r\n        return;\r\n    }\r\n    decisionHandler(WKNavigationActionPolicyAllow);\r\n}\r\n```\r\n\r\n## æ³¨æ„äº‹é¡¹\r\n\r\n### Cookie å¤„ç†\r\n\r\n`WKWebView` çš„ `Cookie` éœ€è¦åŒæ—¶å¤„ç†ä¸¤ä¸ªæ–¹é¢ï¼š\r\n\r\n1. `JavaScript` ä¾§ï¼šé€šè¿‡æ³¨å…¥è„šæœ¬è®¾ç½®\r\n\r\n   ```objc\r\n   NSString *js = @\"document.cookie='key=value'\";\r\n   WKUserScript *script = [[WKUserScript alloc] initWithSource:js injectionTime:WKUserScriptInjectionTimeAtDocumentStart forMainFrameOnly:NO];\r\n   [userContentController addUserScript:script];\r\n   ```\r\n\r\n2. `Native` è¯·æ±‚ï¼šæ·»åŠ  `Cookie` å¤´\r\n\r\n   ```objc\r\n   NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];\r\n   [request setValue:@\"key=value\" forHTTPHeaderField:@\"Cookie\"];\r\n   [webView loadRequest:request];\r\n   ```\r\n\r\néœ€è¦æ³¨æ„ `Cookie` æ³¨å…¥çš„ä¸¤ç§æ–¹å¼æœ‰ä¸åŒçš„ä½œç”¨èŒƒå›´ï¼š\r\n\r\n1. `JavaScript` æ³¨å…¥çš„ `Cookie`:\r\n\r\n   - å¯ä»¥é€šè¿‡ `document.cookie` åœ¨ `JavaScript` ä¸­è¯»å–\r\n   - åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­å¯ä»¥çœ‹åˆ°\r\n   - æœåŠ¡ç«¯ä»£ç  (å¦‚ `PHP`) æ— æ³•ç›´æ¥è¯»å–\r\n\r\n2. `NSMutableURLRequest` æ³¨å…¥çš„ `Cookie`:\r\n\r\n   - å¯ä»¥è¢«æœåŠ¡ç«¯ä»£ç  (å¦‚ `PHP` çš„ `$_COOKIE`) ç›´æ¥è¯»å–\r\n   - `JavaScript` æ— æ³•é€šè¿‡ `document.cookie` è®¿é—®\r\n   - åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ä¸å¯è§\r\n\r\nå› æ­¤åœ¨å®é™…å¼€å‘ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“ä½¿ç”¨åœºæ™¯é€‰æ‹©åˆé€‚çš„æ³¨å…¥æ–¹å¼ã€‚å¦‚æœéœ€è¦åŒæ—¶æ”¯æŒå‰ç«¯å’Œåç«¯è®¿é—®ï¼Œåˆ™éœ€è¦åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼æ³¨å…¥ `Cookie`ã€‚\r\n\r\n### å†…å­˜æ³„æ¼é—®é¢˜\r\n\r\n`WKWebView` å¯èƒ½é€ æˆå¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè§£å†³æ–¹æ¡ˆï¼š\r\n\r\n1. åˆ›å»ºå¼±å¼•ç”¨ä»£ç†ç±»ï¼š\r\n\r\n   ```objc\r\n   @interface WeakScriptMessageDelegate : NSObject\r\n   @property (nonatomic, weak) id<WKScriptMessageHandler> scriptDelegate;\r\n   @end\r\n   ```\r\n\r\n2. ä½¿ç”¨å¼±å¼•ç”¨ä»£ç†æ³¨å†Œæ¶ˆæ¯å¤„ç†ï¼š\r\n\r\n   ```objc\r\n   [config.userContentController addScriptMessageHandler:[[WeakScriptMessageDelegate alloc] initWithDelegate:self] name:scriptMessage];\r\n   ```\r\n\r\n3. åœ¨ dealloc ä¸­ç§»é™¤æ¶ˆæ¯å¤„ç†ï¼š\r\n\r\n   ```objc\r\n   [self.config.userContentController removeScriptMessageHandlerForName:scriptMessage];\r\n   ```\r\n\r\n## æœ€å\r\n\r\né€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬è¯¦ç»†ä»‹ç»äº† `WKWebView` çš„ä»¥ä¸‹å‡ ä¸ªé‡è¦æ–¹é¢ï¼š\r\n\r\n1. åŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œé…ç½®é€‰é¡¹\r\n2. ä»£ç†å›è°ƒçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ\r\n3. `JavaScript` äº¤äº’çš„ä¸¤ç§å®ç°æ–¹å¼\r\n4. `Cookie` å¤„ç†çš„æ³¨æ„äº‹é¡¹\r\n5. å†…å­˜ç®¡ç†çš„æœ€ä½³å®è·µ\r\n\r\n`WKWebView` ä½œä¸º `iOS` ç°ä»£åŒ–çš„ `Web` å®¹å™¨ï¼Œå…·æœ‰æ€§èƒ½ä¼˜è¶Šã€åŠŸèƒ½ä¸°å¯Œçš„ç‰¹ç‚¹ã€‚åˆç†ä½¿ç”¨å…¶æä¾›çš„å„é¡¹åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºé«˜è´¨é‡çš„ `Web` æ··åˆåº”ç”¨ã€‚\r\n",
    "number": 7,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2017-12-03T08:00:00Z",
    "updatedAt": "2025-02-03T15:33:22Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/7",
    "jsonFilePath": "discussions/7-D_kwDONzrbkM4AeLcc.json",
    "markdownFilePath": "2017/12/7-D_kwDONzrbkM4AeLcc.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcj",
    "title": "å¦‚ä½•ç›‘å¬ UIScrollView åœæ­¢æ»šåŠ¨",
    "body": "åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›‘å¬ `UIScrollView` çš„åœæ­¢æ»šåŠ¨æ˜¯ä¸€ä¸ªå¸¸è§éœ€æ±‚ã€‚æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨åœæ­¢æ»šåŠ¨æ—¶æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\r\n\r\n- å›¾ç‰‡çš„æŒ‰éœ€åŠ è½½ä¸é¢„åŠ è½½\r\n- åˆ—è¡¨æ•°æ®çš„å¼‚æ­¥é¢„åŠ è½½\r\n- æ»šåŠ¨ç»“æŸåŠ¨ç”»æ•ˆæœ\r\n- æ€§èƒ½ä¼˜åŒ–ä¸èµ„æºé‡Šæ”¾\r\n- æ•°æ®ç»Ÿè®¡ä¸åŸ‹ç‚¹\r\n\r\nè™½ç„¶è‹¹æœæ²¡æœ‰ç›´æ¥æä¾›ç›¸åº”çš„å›è°ƒæ–¹æ³•ï¼Œä½†æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ `Runtime` å®ç°ä¸€ä¸ªç®€å•æ˜“ç”¨ä¸”ä½ä¾µå…¥æ€§çš„ç›‘å¬æ–¹æ¡ˆã€‚\r\n\r\n## Runtime\r\n\r\n[Runtime](https://developer.apple.com/documentation/objectivec/objective_c_runtime) æä¾›äº†åœ¨è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ç±»ã€æ–¹æ³•å’Œæ¶ˆæ¯ä¼ é€’çš„èƒ½åŠ›ã€‚é€šè¿‡ `Runtime`ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š\r\n\r\n- åœ¨è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹æ–¹æ³•å®ç°\r\n- ä¸ºå·²æœ‰ç±»æ·»åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§\r\n- å®ç°æ›´çµæ´»çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶\r\n\r\næœ¬æ–‡å°†ç»“åˆå®é™…åœºæ™¯ï¼Œè¯¦ç»†ä»‹ç»å¦‚ä½•è¿ç”¨ `Runtime` çš„ `Method Swizzling` å®ç°ä¸€ä¸ªç›‘å¬ `UIScrollView` åœæ­¢æ»šåŠ¨çš„æ–¹æ¡ˆã€‚\r\n\r\nç›¸æ¯”ä¼ ç»Ÿæ–¹æ¡ˆï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\r\n\r\n- ä½¿ç”¨ç®€å•ï¼Œæ¥å…¥æˆæœ¬ä½\r\n- ä»£ç ä¾µå…¥æ€§å°ï¼Œæ˜“äºç»´æŠ¤\r\n- è¿è¡Œæ—¶æ€§èƒ½å¼€é”€å°\r\n- å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§\r\n\r\n## UIScrollView åœæ­¢æ»šåŠ¨çš„åœºæ™¯åˆ†æ\r\n\r\nåŸºäºå¤§é‡ç”¨æˆ·äº¤äº’æ•°æ®åˆ†æï¼Œåœæ­¢æ»šåŠ¨ä¸»è¦å¯ä»¥å½’çº³ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š\r\n\r\n1. å¿«é€Ÿæ»‘åŠ¨åçš„æƒ¯æ€§åœæ­¢\r\n\r\n   - ç”¨æˆ·å¿«é€Ÿæ»‘åŠ¨åæ¾å¼€æ‰‹æŒ‡\r\n   - `ScrollView` æ ¹æ®æ»‘åŠ¨é€Ÿåº¦è¿›è¡Œå‡é€Ÿ\r\n   - åœ¨ç‰©ç†å¼•æ“ä½œç”¨ä¸‹è‡ªç„¶åœæ­¢\r\n   - å¸¸è§äºå¿«é€Ÿæµè§ˆé•¿åˆ—è¡¨åœºæ™¯\r\n\r\n2. äº¤äº’å¼å¼ºåˆ¶åœæ­¢\r\n\r\n   - ç”¨æˆ·åœ¨æƒ¯æ€§æ»šåŠ¨è¿‡ç¨‹ä¸­\r\n   - é€šè¿‡æŒ‰å‹å±å¹•è¿›è¡Œåˆ¶åŠ¨\r\n   - ç«‹å³ç»ˆæ­¢å½“å‰æ»šåŠ¨çŠ¶æ€\r\n   - å¤šç”¨äºç´§æ€¥åœæ­¢æˆ–ä½ç½®è°ƒæ•´\r\n\r\n3. ç²¾ç¡®å¼ç¼“æ…¢åœæ­¢\r\n\r\n   - ç”¨æˆ·é€šè¿‡ç¼“æ…¢æ‹–åŠ¨å†…å®¹\r\n   - ç²¾ç¡®æ§åˆ¶å†…å®¹åç§»é‡\r\n   - åœ¨ç›®æ ‡ä½ç½®ç›´æ¥æ¾æ‰‹\r\n   - é€‚ç”¨äºç²¾ç¡®å®šä½éœ€æ±‚\r\n\r\n## æ ¸å¿ƒä»£ç†æ–¹æ³•ä¸å®ç°æ€è·¯\r\n\r\nä¸ºäº†å‡†ç¡®æ•è·è¿™äº›åœæ­¢äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åˆç†è¿ç”¨ä»¥ä¸‹ä»£ç†æ–¹æ³•ï¼š\r\n\r\n```objc\r\n// å³å°†å¼€å§‹å‡é€Ÿæ»šåŠ¨\r\n- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView;\r\n\r\n// æ»šåŠ¨å‡é€Ÿç»“æŸ\r\n- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView;\r\n\r\n// æ‹–æ‹½ç»“æŸï¼Œdecelerate è¡¨ç¤ºæ˜¯å¦å°†è¦è¿›å…¥å‡é€Ÿè¿‡ç¨‹\r\n- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate;\r\n```\r\n\r\né€šè¿‡è¿™äº›ä»£ç†æ–¹æ³•çš„ç»„åˆè°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¯¹æ¯ç§åœæ­¢äº‹ä»¶çš„ç²¾ç¡®è¯†åˆ«ã€‚\r\n\r\n## Runtime æ–¹æ¡ˆå®ç°è¯¦è§£\r\n\r\né€šè¿‡ `Runtime` å®ç° `UIScrollView` åœæ­¢æ»šåŠ¨çš„ç›‘å¬ï¼Œæœ¬èŠ‚å°†è¯¦ç»†ä»‹ç»è¿™å¥—æ–¹æ¡ˆçš„å…·ä½“å®ç°ç»†èŠ‚ã€‚\r\n\r\n`UIScrollView` ä¸ºæˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªçŠ¶æ€ï¼Œé€šè¿‡å®ƒä»¬æˆ‘ä»¬å¯ä»¥ç²¾ç¡®åˆ¤æ–­æ»šåŠ¨è§†å›¾çš„å½“å‰çŠ¶æ€ï¼š\r\n\r\n```objc\r\n@property(nonatomic,readonly,getter=isTracking) BOOL tracking;     // æ‰‹æŒ‡æ˜¯å¦è§¦æ‘¸å±å¹•\r\n@property(nonatomic,readonly,getter=isDragging) BOOL dragging;     // æ˜¯å¦æ­£åœ¨æ‹–æ‹½æ»‘åŠ¨\r\n@property(nonatomic,readonly,getter=isDecelerating) BOOL decelerating;  // æ˜¯å¦åœ¨å‡é€Ÿè¿‡ç¨‹ä¸­\r\n```\r\n\r\n### ç›‘å¬åœæ­¢æ»šåŠ¨çš„æ ¸å¿ƒé€»è¾‘\r\n\r\né€šè¿‡ç»„åˆ `tracking`ã€`dragging` å’Œ `decelerating` è¿™ä¸‰ä¸ªçŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥å‡†ç¡®è¯†åˆ« `UIScrollView` åœæ­¢æ»šåŠ¨çš„æ—¶æœºã€‚å…·ä½“åˆ¤æ–­é€»è¾‘å¦‚ä¸‹ï¼š\r\n\r\n```objc\r\n- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {\r\n    // åˆ¤æ–­å‡é€Ÿåœæ­¢ï¼šæ‰‹æŒ‡æœªè§¦æ‘¸ + æœªæ‹–æ‹½ + æœªå‡é€Ÿ\r\n    BOOL scrollToScrollStop = !scrollView.tracking && !scrollView.dragging && !scrollView.decelerating;\r\n    if (scrollToScrollStop) {\r\n        [self scrollViewDidEndScroll];\r\n    }\r\n}\r\n\r\n- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {\r\n    if (!decelerate) {\r\n        // åˆ¤æ–­æ‹–æ‹½åœæ­¢ï¼šæ‰‹æŒ‡è§¦æ‘¸ + æœªæ‹–æ‹½ + æœªå‡é€Ÿ\r\n        BOOL dragToDragStop = scrollView.tracking && !scrollView.dragging && !scrollView.decelerating;\r\n        if (dragToDragStop) {\r\n            [self scrollViewDidEndScroll];\r\n        }\r\n    }\r\n}\r\n\r\n- (void)scrollViewDidEndScroll {\r\n    NSLog(@\"åœæ­¢æ»šåŠ¨è§¦å‘ï¼ï¼ï¼\");\r\n}\r\n```\r\n\r\n### æ·»åŠ åœæ­¢æ»šåŠ¨çš„å›è°ƒ\r\n\r\n1. å°è£…å¥å£®çš„ `Hook` å·¥å…·æ–¹æ³•\r\n\r\n   ```objc\r\n   static void Hook_Method(Class originalClass, SEL originalSel,\r\n                         Class replacedClass, SEL replacedSel, SEL noneSel) {\r\n       // è·å–åŸå§‹æ–¹æ³•\r\n       Method originalMethod = class_getInstanceMethod(originalClass, originalSel);\r\n       Method replacedMethod = class_getInstanceMethod(replacedClass, replacedSel);\r\n\r\n       // å¤„ç†åŸå§‹æ–¹æ³•ä¸å­˜åœ¨çš„æƒ…å†µ\r\n       if (!originalMethod) {\r\n           Method noneMethod = class_getInstanceMethod(replacedClass, noneSel);\r\n           class_addMethod(originalClass, originalSel,\r\n                         method_getImplementation(noneMethod),\r\n                         method_getTypeEncoding(noneMethod));\r\n           return;\r\n       }\r\n\r\n       // æ·»åŠ æ›¿æ¢æ–¹æ³•\r\n       BOOL addMethod = class_addMethod(originalClass, replacedSel,\r\n                                      method_getImplementation(replacedMethod),\r\n                                      method_getTypeEncoding(replacedMethod));\r\n\r\n       // äº¤æ¢æ–¹æ³•å®ç°\r\n       if (addMethod) {\r\n           Method newMethod = class_getInstanceMethod(originalClass, replacedSel);\r\n           method_exchangeImplementations(originalMethod, newMethod);\r\n       }\r\n   }\r\n   ```\r\n\r\n2. å¯¹ `UIScrollView` çš„ä»£ç†æ–¹æ³•è¿›è¡Œæ›¿æ¢\r\n\r\n   ```objc\r\n   + (void)load {\r\n       static dispatch_once_t onceToken;\r\n       dispatch_once(&onceToken, ^{\r\n           // ç¡®ä¿æ–¹æ³•æ›¿æ¢åªæ‰§è¡Œä¸€æ¬¡\r\n           Method originalMethod = class_getInstanceMethod([UIScrollView class], @selector(setDelegate:));\r\n           Method replaceMethod = class_getInstanceMethod([UIScrollView class], @selector(hook_setDelegate:));\r\n           method_exchangeImplementations(originalMethod, replaceMethod);\r\n       });\r\n   }\r\n\r\n   // æ›¿æ¢ setDelegate æ–¹æ³•ï¼Œæ³¨å…¥è‡ªå®šä¹‰é€»è¾‘\r\n   - (void)hook_setDelegate:(id<UIScrollViewDelegate>)delegate {\r\n       // è°ƒç”¨åŸå§‹ setDelegate æ–¹æ³•ï¼ˆé€šè¿‡æ–¹æ³•äº¤æ¢å®ç°ï¼‰\r\n       [self hook_setDelegate:delegate];\r\n\r\n       // ä»…å¯¹ UIScrollView å®ä¾‹è¿›è¡Œæ–¹æ³•æ³¨å…¥\r\n       if ([self isMemberOfClass:[UIScrollView class]]) {\r\n           NSLog(@\"æ˜¯ UIScrollViewï¼Œæ³¨å…¥è‡ªå®šä¹‰é€»è¾‘\");\r\n\r\n           // Hook scrollViewDidEndDecelerating: æ–¹æ³•\r\n           Hook_Method(\r\n               [delegate class],\r\n               @selector(scrollViewDidEndDecelerating:),\r\n               [self class],\r\n               @selector(p_scrollViewDidEndDecelerating:),\r\n               @selector(add_scrollViewDidEndDecelerating:)\r\n           );\r\n\r\n           // Hook scrollViewDidEndDragging:willDecelerate: æ–¹æ³•\r\n           Hook_Method(\r\n               [delegate class],\r\n               @selector(scrollViewDidEndDragging:willDecelerate:),\r\n               [self class],\r\n               @selector(p_scrollViewDidEndDragging:willDecelerate:),\r\n               @selector(add_scrollViewDidEndDragging:willDecelerate:)\r\n           );\r\n       } else {\r\n           NSLog(@\"ä¸æ˜¯ UIScrollViewï¼Œè·³è¿‡æ³¨å…¥é€»è¾‘\");\r\n       }\r\n   }\r\n\r\n   #pragma mark - Replace Method\r\n\r\n   // æ›¿æ¢ scrollViewDidEndDecelerating: æ–¹æ³•\r\n   - (void)p_scrollViewDidEndDecelerating:(UIScrollView *)scrollView {\r\n       NSLog(@\"%s\", __func__);\r\n\r\n       // è°ƒç”¨åŸå§‹æ–¹æ³•\r\n       [self p_scrollViewDidEndDecelerating:scrollView];\r\n\r\n       // åˆ¤æ–­å‡é€Ÿåœæ­¢ï¼šæ‰‹æŒ‡æœªè§¦æ‘¸ + æœªæ‹–æ‹½ + æœªå‡é€Ÿ\r\n       BOOL scrollToScrollStop = !scrollView.tracking && !scrollView.dragging && !scrollView.decelerating;\r\n       if (scrollToScrollStop) {\r\n           [self stopScroll:scrollView];\r\n       }\r\n   }\r\n\r\n   // æ›¿æ¢ scrollViewDidEndDragging:willDecelerate: æ–¹æ³•\r\n   - (void)p_scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {\r\n       NSLog(@\"%s\", __func__);\r\n\r\n       // è°ƒç”¨åŸå§‹æ–¹æ³•\r\n       [self p_scrollViewDidEndDragging:scrollView willDecelerate:decelerate];\r\n\r\n       if (!decelerate) {\r\n           // åˆ¤æ–­æ‹–æ‹½åœæ­¢ï¼šæ‰‹æŒ‡è§¦æ‘¸ + æœªæ‹–æ‹½ + æœªå‡é€Ÿ\r\n           BOOL dragToDragStop = scrollView.tracking && !scrollView.dragging && !scrollView.decelerating;\r\n           if (dragToDragStop) {\r\n               [self stopScroll:scrollView];\r\n           }\r\n       }\r\n   }\r\n\r\n   #pragma mark - Add Method\r\n\r\n   // å®ç° scrollViewDidEndDecelerating: æ–¹æ³•\r\n   - (void)add_scrollViewDidEndDecelerating:(UIScrollView *)scrollView {\r\n       NSLog(@\"%s\", __func__);\r\n\r\n       // åˆ¤æ–­å‡é€Ÿåœæ­¢ï¼šæ‰‹æŒ‡æœªè§¦æ‘¸ + æœªæ‹–æ‹½ + æœªå‡é€Ÿ\r\n       BOOL scrollToScrollStop = !scrollView.tracking && !scrollView.dragging && !scrollView.decelerating;\r\n       if (scrollToScrollStop) {\r\n           [self stopScroll:scrollView];\r\n       }\r\n   }\r\n\r\n   // å®ç° scrollViewDidEndDragging:willDecelerate: æ–¹æ³•\r\n   - (void)add_scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {\r\n       NSLog(@\"%s\", __func__);\r\n\r\n       if (!decelerate) {\r\n           // åˆ¤æ–­æ‹–æ‹½åœæ­¢ï¼šæ‰‹æŒ‡è§¦æ‘¸ + æœªæ‹–æ‹½ + æœªå‡é€Ÿ\r\n           BOOL dragToDragStop = scrollView.tracking && !scrollView.dragging && !scrollView.decelerating;\r\n           if (dragToDragStop) {\r\n               [self stopScroll:scrollView];\r\n           }\r\n       }\r\n   }\r\n\r\n   #pragma mark - åœæ­¢æ»šåŠ¨çš„å¤„ç†é€»è¾‘\r\n\r\n   // åœæ­¢æ»šåŠ¨æ—¶æ‰§è¡Œçš„ç»Ÿä¸€å¤„ç†é€»è¾‘\r\n   - (void)stopScroll:(UIScrollView *)scrollView {\r\n       NSLog(@\"æ»šåŠ¨åœæ­¢äº‹ä»¶è§¦å‘ï¼Œæ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘\");\r\n       // åœ¨æ­¤æ·»åŠ åœæ­¢æ»šåŠ¨æ—¶çš„å¤„ç†ä»£ç ï¼Œä¾‹å¦‚é€šçŸ¥æˆ–å›è°ƒ\r\n   }\r\n   ```\r\n\r\n3. æ·»åŠ åœæ­¢æ»šåŠ¨çš„å›è°ƒ\r\n\r\n   ```objc\r\n   // å®šä¹‰å›è°ƒ block ç±»å‹\r\n   typedef void(^ScrollStopBlock)(UIScrollView *scrollView);\r\n\r\n   // å®šä¹‰å›è°ƒå±æ€§\r\n   @property (nonatomic, copy, nullable) ScrollStopBlock stopScrollBlock;\r\n\r\n   // ç»Ÿä¸€çš„åœæ­¢å›è°ƒæ–¹æ³•\r\n   - (void)stopScroll:(UIScrollView *)scrollView {\r\n       if (self.stopScrollBlock) {\r\n           // ç¡®ä¿å›è°ƒåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ\r\n           dispatch_async(dispatch_get_main_queue(), ^{\r\n               self.stopScrollBlock(scrollView);\r\n           });\r\n       }\r\n   }\r\n   ```\r\n\r\n### ä½¿ç”¨æ–¹å¼\r\n\r\nç»è¿‡ä¸Šè¿°å°è£…ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡ä¸€ç§ç®€æ´çš„æ–¹å¼æ¥ç›‘å¬æ»šåŠ¨åœæ­¢äº‹ä»¶ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªå®Œæ•´è€Œå®ç”¨çš„ç¤ºä¾‹æ¥å±•ç¤ºå…·ä½“ç”¨æ³•ï¼š\r\n\r\n```objc\r\n// 1. åˆ›å»ºå¹¶é…ç½® ScrollView\r\nUIScrollView *scrollView = [[UIScrollView alloc] init];\r\nscrollView.frame = self.view.bounds;\r\nscrollView.delegate = self;\r\n[self.view addSubview:scrollView];\r\n\r\n// 2. é…ç½®æ»šåŠ¨å†…å®¹\r\nUIView *contentView = [[UIView alloc] init];\r\n// è®¾ç½®å†…å®¹è§†å›¾å®½åº¦ä¸ºå±å¹•å®½åº¦çš„3å€ï¼Œä¾¿äºæ¨ªå‘æ»šåŠ¨\r\ncontentView.frame = CGRectMake(0, 0, self.view.bounds.size.width * 3, self.view.bounds.size.height);\r\n[scrollView addSubview:contentView];\r\nscrollView.contentSize = contentView.frame.size;\r\n\r\n// 3. æ·»åŠ ä¸šåŠ¡å¤„ç†å›è°ƒ\r\nscrollView.stopScrollBlock = ^(UIScrollView *scrollView) {\r\n    // åœ¨è¿™é‡Œå¤„ç†åœæ­¢æ»šåŠ¨åçš„ä¸šåŠ¡é€»è¾‘\r\n    NSLog(@\"ScrollViewåœæ­¢æ»šåŠ¨ - å½“å‰åç§»é‡: %@\", NSStringFromCGPoint(scrollView.contentOffset));\r\n};\r\n```\r\n\r\né€šè¿‡ä»¥ä¸Šç®€æ´çš„é…ç½®ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„æ»šåŠ¨åœæ­¢äº‹ä»¶ç›‘å¬æ–¹æ¡ˆã€‚è¿™ç§å®ç°æ–¹å¼å…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š\r\n\r\n1. **ä½¿ç”¨ä¾¿æ·**: ä»…éœ€è®¾ç½®ä¸€ä¸ª block å›è°ƒå³å¯å®Œæˆæ‰€æœ‰åŠŸèƒ½\r\n2. **åŠŸèƒ½å…¨é¢**: è‡ªåŠ¨å¤„ç†æ‹–æ‹½åœæ­¢ã€å‡é€Ÿåœæ­¢ç­‰å¤šç§æ»šåŠ¨åœºæ™¯\r\n3. **è§£è€¦è®¾è®¡**: å°†æ»šåŠ¨æ£€æµ‹ä¸ä¸šåŠ¡é€»è¾‘å®Œå…¨åˆ†ç¦»\r\n4. **æ˜“äºç»´æŠ¤**: æ ¸å¿ƒé€»è¾‘å·²å°è£…ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡å®ç°\r\n5. **æ‰©å±•æ€§å¼º**: å¯ä»¥æ–¹ä¾¿åœ°æ·»åŠ æ›´å¤šè‡ªå®šä¹‰å¤„ç†é€»è¾‘\r\n\r\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“çš„åœæ­¢æ»šåŠ¨å®ç°ç»†èŠ‚ï¼Œå¯ä»¥å°†ç²¾åŠ›å®Œå…¨é›†ä¸­åœ¨ä¸šåŠ¡é€»è¾‘å¼€å‘ä¸Šã€‚\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•é€šè¿‡ `Runtime` å®ç°ä¸€ä¸ªç›‘å¬ `UIScrollView` åœæ­¢æ»šåŠ¨çš„æ–¹æ¡ˆã€‚è¿™ç§æ–¹å¼å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\r\n\r\n- ä»£ç ä¾µå…¥æ€§ä½ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä¸šåŠ¡é€»è¾‘\r\n- ä½¿ç”¨æ–¹ä¾¿ç›´è§‚ï¼Œåªéœ€è®¾ç½®ä¸€ä¸ª `block` å›è°ƒ\r\n- æ€§èƒ½å½±å“å°ï¼Œè¿è¡Œæ—¶å¼€é”€å¯æ§\r\n- æ‰©å±•æ€§å¼ºï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½\r\n\r\nä½ åœ¨å®é™…å¼€å‘ä¸­æ˜¯å¦é‡åˆ°è¿‡ç±»ä¼¼çš„éœ€æ±‚ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒå’Œè§£å†³æ–¹æ¡ˆï¼Ÿ\r\n",
    "number": 8,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-01-14T08:00:00Z",
    "updatedAt": "2025-02-03T15:35:16Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/8",
    "jsonFilePath": "discussions/8-D_kwDONzrbkM4AeLcj.json",
    "markdownFilePath": "2018/1/8-D_kwDONzrbkM4AeLcj.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcp",
    "title": "æ·±å…¥ç†è§£ URIã€URL å’Œ URN",
    "body": "![image](https://file.onnttf.site/2018/02/24/1.png)\r\n\r\nåœ¨è½¯ä»¶å¼€å‘å’Œç½‘ç»œåº”ç”¨ä¸­ï¼Œ`URI`ã€`URL` ä»¥åŠ `URN` è¿™ä¸‰ä¸ªé‡è¦æ¦‚å¿µè™½ç„¶çœ‹ä¼¼ç›¸ä¼¼ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨ç€æœ¬è´¨çš„åŒºåˆ«ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™å‡ ä¸ªæ¦‚å¿µçš„å·®å¼‚ä¸è”ç³»ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨å®ƒä»¬ã€‚\r\n\r\n## URI - ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦\r\n\r\n**URI**ï¼ˆUniversal Resource Identifierï¼‰æ˜¯ç”¨æ¥**å”¯ä¸€æ ‡è¯†äº’è”ç½‘ä¸Šçš„èµ„æº**çš„å­—ç¬¦ä¸²ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå°±åƒæ˜¯äº’è”ç½‘ä¸Šæ¯ä¸ªèµ„æºçš„\"èº«ä»½è¯\"ï¼Œå¯ä»¥è®©ç”¨æˆ·ç²¾ç¡®åœ°å®šä½å’Œè®¿é—®ä»»ä½•èµ„æºï¼ˆæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯ç½‘ç»œèµ„æºï¼‰ã€‚\r\n\r\n`URI` ä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†æ„æˆï¼š\r\n\r\n- è®¿é—®èµ„æºçš„å‘½åæœºåˆ¶ï¼ˆ`scheme`ï¼‰\r\n- å­˜æ”¾èµ„æºçš„ä¸»æœºåï¼ˆ`authority`ï¼‰\r\n- èµ„æºçš„å…·ä½“è·¯å¾„ï¼ˆ`path`ï¼‰\r\n- å¯é€‰çš„æŸ¥è¯¢å‚æ•°ï¼ˆ`query`ï¼‰\r\n- å¯é€‰çš„ç‰‡æ®µæ ‡è¯†ç¬¦ï¼ˆ`fragment`ï¼‰\r\n\r\n## URL - ç»Ÿä¸€èµ„æºå®šä½ç¬¦\r\n\r\n**URL**ï¼ˆUniversal Resource Locatorï¼‰æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ `URI` å½¢å¼ï¼Œå®ƒä¸ä»…èƒ½**å”¯ä¸€æ ‡è¯†èµ„æº**ï¼Œè¿˜èƒ½æ˜ç¡®æŒ‡å‡º**å¦‚ä½•å®šä½å’Œè·å–è¿™ä¸ªèµ„æº**ã€‚å¯ä»¥å°† `URL` ç†è§£ä¸ºèµ„æºåœ¨äº’è”ç½‘ä¸Šçš„\"é—¨ç‰Œåœ°å€\"ã€‚\r\n\r\nä¸€ä¸ªå®Œæ•´çš„ `URL` é€šå¸¸åŒ…å«ä»¥ä¸‹ç»„æˆéƒ¨åˆ†ï¼š\r\n\r\n- åè®®ï¼ˆå¦‚ `https://`ï¼‰ï¼šæŒ‡å®šè®¿é—®èµ„æºçš„æ–¹å¼\r\n- ä¸»æœºåï¼ˆå¦‚ `www.example.com`ï¼‰ï¼šæŒ‡å®šèµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨\r\n- ç«¯å£å·ï¼ˆå¦‚ `:443`ï¼‰ï¼šå¯é€‰ï¼ŒæŒ‡å®šæœåŠ¡å™¨ä¸Šçš„å…·ä½“æœåŠ¡\r\n- è·¯å¾„ï¼ˆå¦‚ `/blog/post.html`ï¼‰ï¼šæŒ‡å‘å…·ä½“èµ„æº\r\n- æŸ¥è¯¢å‚æ•°ï¼ˆå¦‚ `?id=123`ï¼‰ï¼šå¯é€‰ï¼Œä¼ é€’é¢å¤–ä¿¡æ¯\r\n- é”šç‚¹ï¼ˆå¦‚ `#section1`ï¼‰ï¼šå¯é€‰ï¼ŒæŒ‡å‘èµ„æºå†…çš„ç‰¹å®šä½ç½®\r\n\r\n## URN - ç»Ÿä¸€èµ„æºåç§°\r\n\r\n**URN**ï¼ˆUniversal Resource Nameï¼‰æ˜¯å¦ä¸€ç§å½¢å¼çš„ `URI`ï¼Œå®ƒé€šè¿‡**æ°¸ä¹…ä¸”å”¯ä¸€çš„åç§°æ¥æ ‡è¯†èµ„æº**ï¼Œä½†ä¸åŒ…å«è·å–èµ„æºçš„å…·ä½“æ–¹æ³•ã€‚è¿™å°±åƒæ˜¯ç»™èµ„æºèµ·äº†ä¸€ä¸ªæ°¸ä¹…çš„\"åå­—\"ã€‚\r\n\r\n`URN` å…·æœ‰ä»¥ä¸‹æ˜¾è‘—ç‰¹ç‚¹ï¼š\r\n\r\n- å…·æœ‰ç»Ÿä¸€çš„å‰ç¼€ `urn:`\r\n- å‘½åç©ºé—´æ ‡è¯†ç¬¦ï¼ˆå¦‚ `isbn:`ï¼‰\r\n- å‘½åç©ºé—´ç‰¹å®šå­—ç¬¦ä¸²ï¼ˆå¦‚å›¾ä¹¦çš„ `ISBN` ç¼–å·ï¼‰\r\n- ä½ç½®æ— å…³æ€§ï¼šå³ä½¿èµ„æºä½ç½®æ”¹å˜ï¼Œ`URN` ä»ç„¶æœ‰æ•ˆ\r\n- æŒä¹…æ€§ï¼šä¸€æ—¦åˆ†é…å°±æ°¸ä¹…æœ‰æ•ˆ\r\n- éœ€è¦ä¸“é—¨çš„è§£æç³»ç»Ÿå°† `URN` è½¬æ¢ä¸ºå®é™…å¯è®¿é—®çš„åœ°å€\r\n\r\n## ä¸‰è€…çš„å…³ç³»\r\n\r\nè®©æˆ‘ä»¬é€šè¿‡è¯¦ç»†çš„åˆ†ææ¥ç†è§£ `URI`ã€`URL` å’Œ `URN` ä¹‹é—´çš„å…³ç³»ã€‚\r\n\r\n### å±‚çº§å…³ç³»\r\n\r\n`URI` æ˜¯æœ€åŸºç¡€å’Œæœ€å¹¿æ³›çš„æ¦‚å¿µï¼Œè€Œ `URL` å’Œ `URN` æ˜¯ `URI` çš„ä¸¤ç§å…·ä½“å®ç°å½¢å¼ã€‚å¯ä»¥å°†å®ƒä»¬çš„å…³ç³»æƒ³è±¡æˆä¸€ä¸ªå®¶æ—ï¼š\r\n\r\n- `URI` æ˜¯çˆ¶ç±»ï¼ˆè¶…é›†ï¼‰\r\n- `URL` å’Œ `URN` æ˜¯å­ç±»ï¼ˆå­é›†ï¼‰\r\n\r\n### åŠŸèƒ½å®šä½\r\n\r\nè¿™ä¸‰è€…å„è‡ªæ‰¿æ‹…ç€ä¸åŒçš„è§’è‰²ï¼š\r\n\r\n- `URI`ï¼šä¸“æ³¨äºèµ„æºçš„å”¯ä¸€æ ‡è¯†\r\n- `URL`ï¼šä¾§é‡äºèµ„æºçš„å®šä½å’Œè®¿é—®æ–¹æ³•\r\n- `URN`ï¼šç€é‡äºèµ„æºçš„æ°¸ä¹…å‘½å\r\n\r\n### ç”ŸåŠ¨ç±»æ¯”\r\n\r\nä¸ºäº†æ›´å½¢è±¡åœ°ç†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥å¯¹æ¯”ï¼š\r\n\r\n1. `URI` å°±åƒèº«ä»½è¯å·\r\n\r\n   - èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†ä¸€ä¸ªäºº\r\n   - æ˜¯æœ€åŸºæœ¬çš„è¯†åˆ«æ–¹å¼\r\n\r\n2. `URL` å°±åƒè¯¦ç»†ä½å€\r\n\r\n   - ä¸ä»…èƒ½ç¡®å®šæ˜¯è°\r\n   - è¿˜èƒ½å‡†ç¡®å‘Šè¯‰ä½ å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªäºº\r\n   - åŒ…å«å…·ä½“çš„è®¿é—®æ–¹å¼ï¼ˆæ¯”å¦‚ä¹˜åä»€ä¹ˆäº¤é€šå·¥å…·ï¼‰\r\n\r\n3. `URN` å°±åƒäººçš„å§“å\r\n   - å¯ä»¥æ ‡è¯†è¿™ä¸ªäºº\r\n   - å…·æœ‰æŒä¹…æ€§ï¼ˆåå­—é€šå¸¸ä¸ä¼šæ”¹å˜ï¼‰\r\n   - ä½†ä»…å‡­å§“åå¯èƒ½æ— æ³•ç›´æ¥æ‰¾åˆ°è¿™ä¸ªäºº\r\n\r\n### å…³é”®è¦ç‚¹æ€»ç»“\r\n\r\n- `URL` å¿…å®šæ˜¯ `URI`ï¼Œä½† `URI` ä¸ä¸€å®šæ˜¯ `URL`\r\n- `URN` ä¹Ÿæ˜¯ `URI` çš„ä¸€ç§ï¼Œä½†ä¸ `URL` çš„å…³æ³¨ç‚¹ä¸åŒ\r\n- ä¸‰è€…å…±åŒæ„æˆäº†äº’è”ç½‘èµ„æºæ ‡è¯†å’Œè®¿é—®çš„å®Œæ•´ä½“ç³»\r\n\r\n## æœ€å\r\n\r\nç†è§£ `URI`ã€`URL` å’Œ `URN` çš„æ¦‚å¿µåŠå…¶å…³ç³»å¯¹äºç½‘ç»œå¼€å‘å’Œèµ„æºç®¡ç†è‡³å…³é‡è¦ã€‚`URI` ä½œä¸ºç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„æ¦‚å¿µï¼Œè€Œ `URL` å’Œ `URN` åˆ™æ˜¯å…¶ä¸¤ç§ä¸åŒçš„å®ç°æ–¹å¼ã€‚`URL` ä¾§é‡äºæä¾›èµ„æºçš„è®¿é—®æ–¹æ³•å’Œä½ç½®ä¿¡æ¯ï¼Œè€Œ `URN` åˆ™æ³¨é‡æä¾›èµ„æºçš„æ°¸ä¹…æ ‡è¯†åç§°ã€‚è¿™ä¸‰ä¸ªæ¦‚å¿µå…±åŒæ„æˆäº†äº’è”ç½‘èµ„æºå®šä½å’Œæ ‡è¯†çš„å®Œæ•´ä½“ç³»ï¼Œåœ¨å®é™…åº”ç”¨ä¸­å„è‡ªå‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚\r\n",
    "number": 9,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-02-24T08:00:00Z",
    "updatedAt": "2025-02-03T15:36:00Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/9",
    "jsonFilePath": "discussions/9-D_kwDONzrbkM4AeLcp.json",
    "markdownFilePath": "2018/2/9-D_kwDONzrbkM4AeLcp.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLcu",
    "title": "iOS æ¶ˆæ¯è½¬å‘æœºåˆ¶",
    "body": "åœ¨ `iOS` å¼€å‘ä¸­ï¼Œå½“å¯¹è±¡æ”¶åˆ°æ— æ³•ç†è§£çš„æ¶ˆæ¯æ—¶ï¼ˆå³å‡ºç° `unrecognized selector sent to instance 0x87` é”™è¯¯ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯åŠ¨æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚è¿™å¥—ç²¾å¿ƒè®¾è®¡çš„æœºåˆ¶ä¸ºå¼€å‘è€…æä¾›äº†å¤šä¸ªå¤„ç†æœºä¼šï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¼˜é›…ä¸”çµæ´»åœ°å¤„ç†è¿™ç±»å¼‚å¸¸æƒ…å†µã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™ä¸ªè½¬å‘æµç¨‹çš„å®Œæ•´å®ç°æœºåˆ¶åŠå…¶å®è·µåº”ç”¨ã€‚\r\n\r\n## æ¶ˆæ¯è½¬å‘çš„å®Œæ•´æµç¨‹\r\n\r\næ¶ˆæ¯è½¬å‘æ˜¯ `Runtime` ä¸­ä¼˜é›…å¤„ç†æ–¹æ³•æœªæ‰¾åˆ°å¼‚å¸¸çš„é‡è¦æœºåˆ¶ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªé˜¶æ®µï¼š\r\n\r\n1. åŠ¨æ€æ–¹æ³•è§£æï¼ˆ`Dynamic Method Resolution`ï¼‰\r\n\r\n   å½“å¯¹è±¡æ”¶åˆ°æœªçŸ¥æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆä¼šè¯¢é—®è¯¥å¯¹è±¡æ˜¯å¦èƒ½å¤ŸåŠ¨æ€æ·»åŠ æ–¹æ³•å®ç°æ¥å¤„ç†ã€‚è¿™ä¸ºæˆ‘ä»¬æä¾›äº†è¿è¡Œæ—¶åŠ¨æ€æ‰©å±•ç±»åŠŸèƒ½çš„æœºä¼šã€‚\r\n\r\n2. æ¶ˆæ¯è½¬å‘ï¼ˆ`Message Forwarding`ï¼‰\r\n\r\n   å¦‚æœåŠ¨æ€æ–¹æ³•è§£ææœªèƒ½è§£å†³é—®é¢˜ï¼Œåˆ™ä¼šè¿›å…¥æ­£å¼çš„è½¬å‘å¤„ç†ï¼š\r\n\r\n   - å¿«é€Ÿè½¬å‘è·¯å¾„ï¼ˆ`Fast Forwarding Path`ï¼‰\r\n\r\n     - é€šè¿‡ `forwardingTargetForSelector:` å¯»æ‰¾èƒ½å¤„ç†è¯¥æ¶ˆæ¯çš„å¤‡ç”¨æ¥æ”¶è€…\r\n     - è¿™æ˜¯æœ€é«˜æ•ˆçš„è½¬å‘æ–¹å¼ï¼Œç›´æ¥å°†æ¶ˆæ¯è½¬äº¤ç»™å…¶ä»–å¯¹è±¡\r\n\r\n   - å®Œæ•´è½¬å‘æœºåˆ¶ï¼ˆ`Normal Forwarding Mechanism`ï¼‰\r\n\r\n     - åœ¨æ²¡æœ‰åˆé€‚çš„å¤‡ç”¨æ¥æ”¶è€…æ—¶å¯åŠ¨\r\n     - å°†æ¶ˆæ¯å®Œæ•´å°è£…ä¸º `NSInvocation` å¯¹è±¡ï¼Œæ”¯æŒæ›´çµæ´»çš„å¤„ç†æ–¹å¼\r\n     - è™½ç„¶å¼€é”€è¾ƒå¤§ï¼Œä½†æä¾›äº†æœ€å¤§çš„å¤„ç†è‡ªç”±åº¦\r\n\r\n## åŠ¨æ€æ–¹æ³•è§£æ\r\n\r\nåœ¨æ¶ˆæ¯è½¬å‘çš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œç³»ç»Ÿä¼šé€šè¿‡åŠ¨æ€æ–¹æ³•è§£ææœºåˆ¶å°è¯•åŠ¨æ€æ·»åŠ æ–¹æ³•å®ç°ã€‚æ ¹æ®å¾…å¤„ç†çš„æ–¹æ³•ç±»å‹ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ä¹‹ä¸€ï¼š\r\n\r\nå¤„ç†ç±»æ–¹æ³•æ—¶è°ƒç”¨ï¼š\r\n\r\n```objc\r\n+ (BOOL)resolveClassMethod:(SEL)sel;\r\n```\r\n\r\nå¤„ç†å®ä¾‹æ–¹æ³•æ—¶è°ƒç”¨ï¼š\r\n\r\n```objc\r\n+ (BOOL)resolveInstanceMethod:(SEL)sel;\r\n```\r\n\r\nè¿™ä¸ªé˜¶æ®µæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `Runtime API` åŠ¨æ€æ·»åŠ æ–¹æ³•å®ç°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„ç¤ºä¾‹ï¼š\r\n\r\n```objc\r\n/**\r\n * åŠ¨æ€è§£ææœªå®ç°çš„å®ä¾‹æ–¹æ³•ã€‚\r\n * å½“è°ƒç”¨ä¸€ä¸ªæœªå®ç°çš„å®ä¾‹æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œå…è®¸åŠ¨æ€æ·»åŠ æ–¹æ³•å®ç°ã€‚\r\n *\r\n * @param sel å¾…å¤„ç†çš„æ–¹æ³•é€‰æ‹©å™¨\r\n * @return å¦‚æœæˆåŠŸåŠ¨æ€æ·»åŠ äº†æ–¹æ³•ï¼Œè¿”å› YESï¼›å¦åˆ™è¿”å› NOã€‚\r\n */\r\n+ (BOOL)resolveInstanceMethod:(SEL)sel {\r\n    // æ£€æŸ¥æ˜¯å¦æ˜¯ç›®æ ‡æœªå®ç°çš„æ–¹æ³•ï¼ˆè¿™é‡Œä»¥ `someMethod:` ä¸ºä¾‹ï¼‰\r\n    if (sel == @selector(someMethod:)) {\r\n        // åŠ¨æ€æ·»åŠ æ–¹æ³•çš„å®ç°\r\n        class_addMethod(self,\r\n                        sel,\r\n                        (IMP)dynamicMethodIMP, // æ–¹æ³•å®ç°æŒ‡é’ˆ\r\n                        \"v@:\");               // æ–¹æ³•ç­¾åï¼ˆvoid è¿”å›å€¼ï¼Œæ¥å— id å’Œ SEL å‚æ•°ï¼‰\r\n        return YES; // æ ‡è®°æˆåŠŸå¤„ç†\r\n    }\r\n\r\n    // å¦‚æœæ— æ³•å¤„ç†è¯¥æ–¹æ³•ï¼Œåˆ™è¿”å› NOï¼Œè½¬äº¤ç»™ä¸‹ä¸€æ­¥æ–¹æ³•è½¬å‘æœºåˆ¶\r\n    return NO;\r\n}\r\n\r\n/**\r\n * åŠ¨æ€æ·»åŠ çš„æ–¹æ³•å®ç°ã€‚\r\n *\r\n * @param self å½“å‰å¯¹è±¡\r\n * @param _cmd å½“å‰è°ƒç”¨çš„æ–¹æ³•é€‰æ‹©å™¨\r\n */\r\nvoid dynamicMethodIMP(id self, SEL _cmd) {\r\n    // æ–¹æ³•çš„å…·ä½“é€»è¾‘\r\n    NSLog(@\"åŠ¨æ€æ·»åŠ çš„æ–¹æ³•è¢«è°ƒç”¨ï¼\");\r\n}\r\n```\r\n\r\n## æ¶ˆæ¯è½¬å‘å¤„ç†\r\n\r\n### å¿«é€Ÿæ¶ˆæ¯è½¬å‘\r\n\r\nå½“åŠ¨æ€æ–¹æ³•è§£æå¤±è´¥åï¼Œç³»ç»Ÿä¼šå°è¯•å¿«é€Ÿè½¬å‘è·¯å¾„ã€‚é€šè¿‡å®ç° `forwardingTargetForSelector:` æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¶ˆæ¯ä¼˜é›…åœ°è½¬å‘ç»™å…¶ä»–å¯¹è±¡å¤„ç†ï¼š\r\n\r\n```objc\r\n/**\r\n * å¿«é€Ÿæ¶ˆæ¯è½¬å‘\r\n * å½“å¯¹è±¡æ¥æ”¶åˆ°ä¸€ä¸ªæ— æ³•å“åº”çš„æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œå…è®¸è¿”å›å¦ä¸€ä¸ªå¯ä»¥å¤„ç†è¯¥æ¶ˆæ¯çš„å¯¹è±¡ã€‚\r\n *\r\n * @param aSelector å¾…è½¬å‘çš„æ–¹æ³•é€‰æ‹©å™¨\r\n * @return èƒ½å¤„ç†è¯¥æ¶ˆæ¯çš„å¯¹è±¡ï¼›è¿”å› nil æ—¶ï¼Œæ¶ˆæ¯ä¼šè¿›å…¥å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æµç¨‹ã€‚\r\n */\r\n- (id)forwardingTargetForSelector:(SEL)aSelector {\r\n    // æ£€æŸ¥æ˜¯å¦æ˜¯éœ€è¦è½¬å‘çš„ç›®æ ‡æ–¹æ³•\r\n    if (aSelector == @selector(targetMethod:)) {\r\n        // è¿”å›èƒ½å¤„ç†è¯¥æ–¹æ³•çš„å¯¹è±¡\r\n        return [[HandlerClass alloc] init];\r\n    }\r\n\r\n    // æœªåŒ¹é…åˆ°ç›®æ ‡æ–¹æ³•ï¼Œè¿”å› nilï¼Œè¿›å…¥å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æµç¨‹\r\n    return nil;\r\n}\r\n```\r\n\r\n### å®Œæ•´æ¶ˆæ¯è½¬å‘\r\n\r\nå½“å¿«é€Ÿè½¬å‘è¿”å› `nil` æ—¶ï¼Œç³»ç»Ÿä¼šå¯åŠ¨å®Œæ•´çš„è½¬å‘æœºåˆ¶ã€‚è¿™ä¸ªé˜¶æ®µä¼šå°†æ¶ˆæ¯å®Œæ•´åœ°å°è£…åˆ° `NSInvocation` å¯¹è±¡ä¸­ï¼Œæä¾›æ›´çµæ´»çš„å¤„ç†æ–¹å¼ï¼š\r\n\r\n```objc\r\n/**\r\n * å®Œæ•´æ¶ˆæ¯è½¬å‘\r\n * å½“å¯¹è±¡æ— æ³•å¿«é€Ÿè½¬å‘æ¶ˆæ¯æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œå…è®¸æ‰‹åŠ¨æŒ‡å®šæ¶ˆæ¯çš„å¤„ç†å¯¹è±¡æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚\r\n *\r\n * @param invocation åŒ…å«å¾…è½¬å‘æ¶ˆæ¯çš„è°ƒç”¨å¯¹è±¡ï¼Œå°è£…äº†æ–¹æ³•è°ƒç”¨çš„æ‰€æœ‰ä¿¡æ¯ã€‚\r\n */\r\n- (void)forwardInvocation:(NSInvocation *)invocation {\r\n    // è·å–å½“å‰æ–¹æ³•é€‰æ‹©å™¨\r\n    SEL selector = invocation.selector;\r\n\r\n    // åˆ›å»ºæ½œåœ¨çš„æ¶ˆæ¯æ¥æ”¶è€…\r\n    id target = [HandlerClass new];\r\n\r\n    // æ£€æŸ¥ç›®æ ‡å¯¹è±¡æ˜¯å¦èƒ½å¤Ÿå¤„ç†è¯¥æ¶ˆæ¯\r\n    if ([target respondsToSelector:selector]) {\r\n        // å°†æ¶ˆæ¯è½¬å‘ç»™ç›®æ ‡å¯¹è±¡å¤„ç†\r\n        [invocation invokeWithTarget:target];\r\n    } else {\r\n        // å¦‚æœæ²¡æœ‰å¯¹è±¡èƒ½å¤„ç†è¯¥æ¶ˆæ¯ï¼Œè°ƒç”¨çˆ¶ç±»çš„é»˜è®¤å®ç°\r\n        [super forwardInvocation:invocation];\r\n\r\n        // æˆ–è€…æŠ›å‡ºæœªè¯†åˆ«é€‰æ‹©å™¨çš„å¼‚å¸¸\r\n        // [self doesNotRecognizeSelector:selector];\r\n    }\r\n}\r\n\r\n/**\r\n * æä¾›æ–¹æ³•ç­¾åä»¥æ”¯æŒå®Œæ•´æ¶ˆæ¯è½¬å‘ã€‚\r\n * ç³»ç»Ÿåœ¨è°ƒç”¨ `forwardInvocation:` ä¹‹å‰ä¼šè°ƒç”¨æ­¤æ–¹æ³•ä»¥è·å–æ¶ˆæ¯çš„ç­¾åã€‚\r\n *\r\n * @param aSelector å¾…è·å–ç­¾åçš„æ–¹æ³•é€‰æ‹©å™¨\r\n * @return æ–¹æ³•çš„ç­¾åã€‚å¦‚æœè¿”å› nilï¼Œåˆ™ä¸ä¼šè°ƒç”¨ `forwardInvocation:`ã€‚\r\n */\r\n- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector {\r\n    // å°è¯•è·å–å½“å‰ç±»çš„ç­¾å\r\n    NSMethodSignature *signature = [super methodSignatureForSelector:aSelector];\r\n    if (!signature) {\r\n        // å¦‚æœå½“å‰ç±»æ²¡æœ‰æä¾›ç­¾åï¼Œä»ç›®æ ‡å¤„ç†ç±»å°è¯•è·å–ç­¾å\r\n        signature = [HandlerClass instanceMethodSignatureForSelector:aSelector];\r\n    }\r\n    return signature;\r\n}\r\n```\r\n\r\n## æœ€å\r\n\r\né€šè¿‡è¿™å¥—å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥ä¼˜é›…åœ°å¤„ç†\"æ–¹æ³•æœªæ‰¾åˆ°\"çš„å¼‚å¸¸æƒ…å†µï¼Œè¿˜å¯ä»¥ï¼š\r\n\r\n- å®ç°æ›´çµæ´»çš„æ¶ˆæ¯æ´¾å‘æœºåˆ¶\r\n- åœ¨è¿è¡Œæ—¶åŠ¨æ€æ‰©å±•ç±»çš„åŠŸèƒ½\r\n- ä¼˜åŒ–ä»£ç æ¶æ„ï¼Œæé«˜ä»£ç å¤ç”¨æ€§\r\n- å¢å¼ºåº”ç”¨çš„å®¹é”™èƒ½åŠ›å’Œå¥å£®æ€§\r\n\r\nè¿™äº›ç‰¹æ€§ä½¿æ¶ˆæ¯è½¬å‘æˆä¸º `iOS` å¼€å‘ä¸­ä¸€ä¸ªå¼ºå¤§è€Œå®ç”¨çš„æœºåˆ¶ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„è½¬å‘æ–¹å¼ï¼Œæ—¢ä¿è¯ä»£ç è´¨é‡ï¼Œåˆç¡®ä¿è¿è¡Œæ•ˆç‡ã€‚\r\n",
    "number": 10,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-04-02T08:00:00Z",
    "updatedAt": "2025-02-03T15:36:33Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/10",
    "jsonFilePath": "discussions/10-D_kwDONzrbkM4AeLcu.json",
    "markdownFilePath": "2018/4/10-D_kwDONzrbkM4AeLcu.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLdF",
    "title": "macOS ç³»ç»Ÿé‡è£…æŒ‡å—",
    "body": "è™½ç„¶ `macOS` ç³»ç»Ÿçš„ç¨³å®šæ€§å·²ç»éå¸¸ä¼˜ç§€ï¼Œä½†åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦é‡è£…ç³»ç»Ÿã€‚æœ¬æ–‡å°†å¸®åŠ©ä½ äº†è§£ `macOS` ç³»ç»Ÿé‡è£…çš„å‡ ç§æ–¹å¼å’Œç›¸å…³æ³¨æ„äº‹é¡¹ï¼Œå¸®åŠ©ä½ è½»æ¾å®Œæˆç³»ç»Ÿé‡è£…ã€‚\r\n\r\n## ä¸ºä»€ä¹ˆéœ€è¦é‡è£…ç³»ç»Ÿ\r\n\r\n- ç³»ç»Ÿè‡ƒè‚¿é—®é¢˜\r\n\r\n  éšç€ä½¿ç”¨æ—¶é—´å¢é•¿ï¼Œæˆ‘ä»¬ä¸å¯é¿å…åœ°ä¼šå®‰è£…å¤§é‡è½¯ä»¶ã€æ’ä»¶å’Œç¯å¢ƒé…ç½®ã€‚è™½ç„¶è¿™äº›ç´¯ç§¯å¯èƒ½ä¸ä¼šå¯¼è‡´ç³»ç»Ÿå˜æ…¢ï¼Œä½†å¯¹äºè¿½æ±‚\"å¹²å‡€\"ç³»ç»Ÿçš„ç”¨æˆ·æ¥è¯´å´æ˜¯ä¸€ç§å›°æ‰°ã€‚\r\n\r\n  è¿™ç§æƒ…å†µä¸‹ï¼Œé‡è£…ç³»ç»Ÿä¸å¤±ä¸ºä¸€ä¸ªå½»åº•è§£å†³é—®é¢˜çš„æ–¹æ¡ˆã€‚\r\n\r\n- `Beta` ç‰ˆæœ¬çš„çƒ¦æ¼\r\n\r\n  å¯¹äºå–œæ¬¢å°é²œçš„ç”¨æˆ·æ¥è¯´ï¼Œå‡çº§åˆ°æœ€æ–°çš„ `Beta` ç‰ˆç³»ç»Ÿå¾€å¾€å……æ»¡è¯±æƒ‘ã€‚ç„¶è€Œ `Beta` ç‰ˆæœ¬å¯èƒ½å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œæ­¤æ—¶ä½ é¢ä¸´ä¸¤ä¸ªé€‰æ‹©ï¼š\r\n\r\n  - ç­‰å¾…æ›´ç¨³å®šçš„æ–°ç‰ˆæœ¬å‘å¸ƒ\r\n  - é™çº§å›ç¨³å®šç‰ˆæœ¬ï¼ˆéœ€è¦å®Œæ•´å¤‡ä»½æ•°æ®ï¼‰\r\n\r\n## ä¸‰ç§é‡è£…æ–¹å¼\r\n\r\næœ¬æ–‡ä»¥ `macOS High Sierra` ä¸ºä¾‹ï¼Œä»‹ç»ä»¥ä¸‹ä¸‰ç§é‡è£…æ–¹æ¡ˆã€‚\r\n\r\n### App Store å®‰è£…ï¼ˆæ¨èï¼‰\r\n\r\nè·å–ç³»ç»Ÿé•œåƒæœ‰ä¸¤ç§æ–¹å¼ï¼š\r\n\r\n- ç›´æ¥åœ¨ `App Store` æœç´¢ä¸‹è½½\r\n- é€šè¿‡[å®˜æ–¹é“¾æ¥](https://search.itunes.apple.com/WebObjects/MZContentLink.woa/wa/link?mt=11&path=mac%2fmacoshighsierra)ä¸‹è½½\r\n\r\nä¸‹è½½å®ŒæˆåæŒ‰æç¤ºæ“ä½œå³å¯\r\n\r\n### åœ¨çº¿æ¢å¤\r\n\r\né‡å¯æ—¶æŒ‰ä¸åŒç»„åˆé”®å¯è¿›å…¥ä¸åŒçš„æ¢å¤æ¨¡å¼ï¼š\r\n\r\n| æŒ‰é”®ç»„åˆ                       | åŠŸèƒ½è¯´æ˜             |\r\n| ------------------------------ | -------------------- |\r\n| `Command + R`                  | å®‰è£…æœ€è¿‘çš„å·²å®‰è£…ç‰ˆæœ¬ |\r\n| `Option + Command + R`         | å‡çº§è‡³æœ€æ–°å…¼å®¹ç‰ˆæœ¬   |\r\n| `Shift + Option + Command + R` | å®‰è£…å‡ºå‚ç‰ˆæœ¬         |\r\n\r\nè¿›å…¥æ¢å¤æ¨¡å¼åï¼Œå¯ä»¥ï¼š\r\n\r\n1. ä½¿ç”¨ç£ç›˜å·¥å…·æŠ¹æ‰ç£ç›˜ï¼ˆå¯é€‰ï¼‰\r\n2. é€‰æ‹©é‡æ–°å®‰è£…ç³»ç»Ÿ\r\n3. æŒ‰ç…§å‘å¯¼å®Œæˆå®‰è£…\r\n\r\n### U ç›˜å®‰è£…\r\n\r\nè¿™ç§æ–¹å¼é€‚åˆç½‘ç»œä¸ç¨³å®šçš„æƒ…å†µï¼š\r\n\r\n1. ä¸‹è½½ç³»ç»Ÿé•œåƒ\r\n2. åˆ¶ä½œå¯åŠ¨ç›˜\r\n\r\n   ```bash\r\n   sudo /Applications/Install\\ macOS\\ High\\ Sierra.app/Contents/Resources/createinstallmedia --volume /Volumes/MyVolume --applicationpath /Applications/Install\\ macOS\\ High\\ Sierra.app\r\n   ```\r\n\r\n3. é€šè¿‡ U ç›˜å¯åŠ¨å¹¶å®‰è£…ç³»ç»Ÿ\r\n\r\n   1. å°† U ç›˜æ’åˆ°ç”µè„‘ä¸Š\r\n   2. è¿›å…¥æ¢å¤æ¨¡å¼ï¼Œå°†å¯åŠ¨ç£ç›˜æ”¹ä¸ºæˆ‘ä»¬åˆ¶ä½œçš„å¯åŠ¨ç›˜ï¼Œå¯åŠ¨ç›˜çš„ä¿®æ”¹å¯ä»¥å‚è€ƒé™„ä»¶\r\n   3. ä»\"å®ç”¨å·¥å…·\"çª—å£ä¸­é€‰æ‹©\"å®‰è£… macOS\"ï¼ˆæˆ–\"å®‰è£… OS X\"ï¼‰ï¼Œç„¶åç‚¹æŒ‰\"ç»§ç»­\"ï¼ŒæŒ‰ç…§å±å¹•ä¸Šçš„è¯´æ˜è¿›è¡Œæ“ä½œ\r\n\r\n## æœ€å\r\n\r\næ— è®ºé€‰æ‹©å“ªç§é‡è£…æ–¹å¼ï¼Œåœ¨å¼€å§‹ä¹‹å‰éƒ½è¯·æ³¨æ„ï¼š\r\n\r\n1. å¤‡ä»½é‡è¦æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ `Time Machine` æˆ–æ‰‹åŠ¨å¤‡ä»½\r\n2. è®°å½•å·²å®‰è£…çš„è½¯ä»¶åˆ—è¡¨ï¼Œæ–¹ä¾¿é‡è£…åæ¢å¤\r\n3. ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å’Œç¨³å®šçš„ç½‘ç»œç¯å¢ƒ\r\n\r\né‡è£…ç³»ç»Ÿè™½ç„¶éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œä½†èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬è·å¾—ä¸€ä¸ªå…¨æ–°ã€å¹²å‡€çš„ä½¿ç”¨ç¯å¢ƒã€‚å¦‚æœä½ é‡åˆ°æ— æ³•è§£å†³çš„ç³»ç»Ÿé—®é¢˜ï¼Œæˆ–æ˜¯æƒ³å½»åº•æ¸…ç†ç³»ç»Ÿï¼Œä¸å¦¨å°è¯•é‡è£…ä¸€æ¬¡ã€‚\r\n",
    "number": 13,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nc-Kw",
          "name": "macOS",
          "url": "https://github.com/onnttf/blog/labels/macOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-06-16T08:00:00Z",
    "updatedAt": "2025-02-03T15:40:54Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/13",
    "jsonFilePath": "discussions/13-D_kwDONzrbkM4AeLdF.json",
    "markdownFilePath": "2018/6/13-D_kwDONzrbkM4AeLdF.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLdH",
    "title": "åŠ¨æ€æ›´æ¢ App å›¾æ ‡",
    "body": "ä» `iOS 10.3` å¼€å§‹ï¼ŒApple æä¾›äº†åŠ¨æ€æ›´æ¢åº”ç”¨å›¾æ ‡çš„åŠŸèƒ½ã€‚è¿™ä¸ªåŠŸèƒ½è®©æˆ‘ä»¬å¯ä»¥åœ¨ä¸å‘ç‰ˆçš„æƒ…å†µä¸‹æ›´æ¢ App å›¾æ ‡ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›é™åˆ¶éœ€è¦æ³¨æ„ï¼š\r\n\r\n1. æ‰€æœ‰å¯æ›¿æ¢çš„å›¾æ ‡å¿…é¡»é¢„å…ˆæ‰“åŒ…åˆ°é¡¹ç›®ä¸­\r\n2. æ›´æ¢å›¾æ ‡æ—¶éœ€è¦è·å¾—ç”¨æˆ·æˆæƒï¼ˆè™½ç„¶æœ‰ç»•è¿‡æ–¹æ³•ä½†ä¸å»ºè®®ä½¿ç”¨ï¼‰\r\n\r\nå°½ç®¡å­˜åœ¨è¿™äº›é™åˆ¶ï¼Œä½†è¿™ä¸ªåŠŸèƒ½ä»ç„¶èƒ½ä¸ºç”¨æˆ·ä½“éªŒå¸¦æ¥æ˜¾è‘—æå‡ï¼š\r\n\r\n1. åœ¨èŠ‚å‡æ—¥æœŸé—´å¯ä»¥æ— éœ€å‘ç‰ˆå³å¯æ›´æ¢åº”å­£å›¾æ ‡\r\n2. åœ¨é‡å¤§æ´»åŠ¨æœŸé—´å¯ä»¥åŠæ—¶æ›´æ¢è¥é”€å›¾æ ‡ï¼Œæ— éœ€æ‹…å¿ƒå‘ç‰ˆé£é™©\r\n\r\n**æ³¨æ„**ï¼šæ›´æ¢å›¾æ ‡ä¼šåŒæ­¥æ›´æ–°åº”ç”¨åœ¨é€šçŸ¥æ ã€è®¾ç½®ç•Œé¢ç­‰æ‰€æœ‰åœºæ™¯ä¸‹çš„å›¾æ ‡ã€‚\r\n\r\n## å‡†å¤‡æ›¿æ¢å›¾æ ‡\r\n\r\néœ€è¦å°†å¾…æ›¿æ¢çš„å›¾æ ‡æ–‡ä»¶æ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆä¸èƒ½æ”¾åœ¨ `.xcassets` ä¸­ï¼‰ã€‚å»ºè®®æŒ‰å¦‚ä¸‹æ ¼å¼å‘½åå›¾æ ‡æ–‡ä»¶ï¼š\r\nä¾‹å¦‚ `<xx20x20@2x.png>`ã€`<xx20x20@3x.png>` ç­‰ï¼Œè¿™æ ·åœ¨é…ç½® `Info.plist` æ—¶ä¼šæ›´æ–¹ä¾¿ã€‚\r\n\r\n![image](https://file.onnttf.site/2018/07/10/1.jpg)\r\n\r\n**æç¤º**ï¼šç†è®ºä¸Šä¹Ÿå¯ä»¥åªæä¾›ä¸€å¥—å›¾æ ‡æ–‡ä»¶ï¼Œå‘½åä¸º `<xx@2x.png>`ã€`<xx@3x.png>` ç­‰ã€‚ä½†ä¸ºäº†æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œå»ºè®®æä¾›å®Œæ•´çš„å°ºå¯¸ç³»åˆ—ã€‚å› ä¸ºç³»ç»Ÿä¼šå¯¹å¤§å°ºå¯¸å›¾æ ‡è¿›è¡Œå‹ç¼©æ¥é€‚é…å°å°ºå¯¸åœºæ™¯ã€‚\r\n\r\n## ä¿®æ”¹ `Info.plist`\r\n\r\nè¦å®ç°åŠ¨æ€æ¢å›¾æ ‡åŠŸèƒ½ï¼Œéœ€è¦åœ¨ `Info.plist` ä¸­è¿›è¡Œå¿…è¦çš„é…ç½®ï¼š\r\n\r\n![image](https://file.onnttf.site/2018/07/10/2.jpg)\r\n\r\n- CFBundleIcons\r\n\r\n  åŒ…å«æ‰€æœ‰åº”ç”¨å›¾æ ‡ä¿¡æ¯çš„å­—å…¸\r\n\r\n- CFBundlePrimaryIcon\r\n\r\n  ä¸»å›¾æ ‡é…ç½®ï¼Œå¦‚æœåœ¨ `Assets.xcassets` ä¸­å·²é…ç½®åˆ™ä¼šè¢«è‡ªåŠ¨ä½¿ç”¨\r\n\r\n- CFBundleAlternateIcons\r\n\r\n  å¯æ›¿æ¢å›¾æ ‡çš„é…ç½®æ•°ç»„\r\n\r\n- UIPrerenderedIcon\r\n\r\n  æ˜¯å¦é¢„æ¸²æŸ“ï¼Œè‹¥æœªè®¾ç½®æˆ–è®¾ä¸º `NO` åˆ™ç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ å…‰æ³½æ•ˆæœ\r\n\r\nè¯¦ç»†çš„é…ç½®è¯´æ˜è¯·å‚è€ƒ [CFBundleIcons, CFBundlePrimaryIcon, CFBundleAlternateIcons](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW10)ã€‚\r\n\r\n**æ³¨æ„**ï¼šå¦‚éœ€æ”¯æŒ iPadï¼Œéœ€è¦åœ¨ `CFBundleIcons~ipad` ä¸­è¿›è¡Œç›¸åŒé…ç½®ã€‚\r\n\r\n## ç¼–å†™ä»£ç \r\n\r\nç³»ç»Ÿæä¾›äº†ä»¥ä¸‹å‡ ä¸ªå…³é”® `API`ï¼š\r\n\r\n```objc\r\n// If false, alternate icons are not supported for the current process.\r\n// æ£€æŸ¥æ˜¯å¦æ”¯æŒæ›´æ¢å›¾æ ‡\r\n@property (readonly, nonatomic) BOOL supportsAlternateIcons NS_EXTENSION_UNAVAILABLE(\"Extensions may not have alternate icons\") API_AVAILABLE(ios(10.3), tvos(10.2));\r\n\r\n// Pass `nil` to use the primary application icon. The completion handler will be invoked asynchronously on an arbitrary background queue; be sure to dispatch back to the main queue before doing any further UI work.\r\n// æ›´æ¢å›¾æ ‡\r\n- (void)setAlternateIconName:(nullable NSString *)alternateIconName completionHandler:(nullable void (^)(NSError *_Nullable error))completionHandler NS_EXTENSION_UNAVAILABLE(\"Extensions may not have alternate icons\") API_AVAILABLE(ios(10.3), tvos(10.2));\r\n\r\n// If `nil`, the primary application icon is being used.\r\n// å½“å‰å›¾æ ‡çš„åç§°\r\n@property (nullable, readonly, nonatomic) NSString *alternateIconName NS_EXTENSION_UNAVAILABLE(\"Extensions may not have alternate icons\") API_AVAILABLE(ios(10.3), tvos(10.2));\r\n```\r\n\r\nè¿™äº› `API` ä½¿ç”¨èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š\r\n\r\n```objc\r\n- (void)setAlternateIconName:(nullable NSString *)alternateIconName completionHandler:(nullable void (^)(NSError *_Nullable error))completionHandler\r\n```\r\n\r\nå…¶ä¸­çš„ `alternateIconName` å‚æ•°éœ€è¦ä¸ `Info.plist` ä¸­é…ç½®çš„åç§°ä¿æŒä¸€è‡´ï¼Œå¦‚ç¤ºä¾‹ä¸­çš„ `female` æˆ– `male`ã€‚\r\n\r\n## ä»£ç ç¤ºä¾‹\r\n\r\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„å›¾æ ‡ç®¡ç†å·¥å…·ç±»å®ç°ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ [DynamicAppIconDemo](https://github.com/onnttf/DynamicAppIconDemo) æŸ¥çœ‹ `FSAppIconManager` çš„æºç ï¼š\r\n\r\n```objc\r\n+ (NSString *)getCurrentAppIconName {\r\n    if (@available(iOS 10.3, *)) {\r\n        return ([UIApplication sharedApplication].alternateIconName.length == 0) ? @\"\" : [UIApplication sharedApplication].alternateIconName;\r\n    } else {\r\n        // Fallback on earlier versions\r\n        return @\"\";\r\n    }\r\n}\r\n\r\n+ (BOOL)canChangeAppIcon {\r\n    if (@available(iOS 10.3, *)) {\r\n        return [[UIApplication sharedApplication] supportsAlternateIcons];\r\n    } else {\r\n        // Fallback on earlier versions\r\n        return NO;\r\n    }\r\n}\r\n\r\n+ (void)changeAppIconWithIconName:(NSString *)iconName completionHandler:(void (^)(NSError * _Nullable))completionHandler {\r\n    if (@available(iOS 10.3, *)) {\r\n        [[UIApplication sharedApplication] setAlternateIconName:iconName completionHandler:^(NSError * _Nullable error) {\r\n            if (!error) {\r\n                completionHandler(nil);\r\n            } else {\r\n                completionHandler(error);\r\n            }\r\n        }];\r\n    } else {\r\n        // Fallback on earlier versions\r\n        NSDictionary *userInfo = @{\r\n            NSLocalizedDescriptionKey: NSLocalizedString(@\"AppIcon change failed\", nil),\r\n            NSLocalizedFailureReasonErrorKey: NSLocalizedString(@\"The current system version does not support replacing the AppIcon.\", nil),\r\n            NSLocalizedRecoverySuggestionErrorKey: NSLocalizedString(@\"\", nil)\r\n        };\r\n        NSError *error = [NSError errorWithDomain:@\"\"\r\n                                             code:34001\r\n                                         userInfo:userInfo];\r\n        completionHandler(error);\r\n    }\r\n}\r\n```\r\n\r\n## App Icon ç›¸å…³çš„èµ„æ–™\r\n\r\n### å±æ€§è¦æ±‚\r\n\r\n| Attribute   | Value                                                                                                                                                  |\r\n| :---------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| Format      | PNG                                                                                                                                                    |\r\n| Color space | sRGB or P3 (see [Color Management](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/color/#color-management))           |\r\n| Layers      | Flattened with no transparency                                                                                                                         |\r\n| Resolution  | Varies. See [Image Size and Resolution](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/image-size-and-resolution/) |\r\n| Shape       | Square with no rounded corners                                                                                                                         |\r\n\r\n### å°ºå¯¸è§„æ ¼\r\n\r\n| Device or context | Icon size                             |\r\n| :---------------- | :------------------------------------ |\r\n| iPhone            | 180px Ã— 180px (60pt Ã— 60pt @3x)       |\r\n|                   | 120px Ã— 120px (60pt Ã— 60pt @2x)       |\r\n| iPad Pro          | 167px Ã— 167px (83.5pt Ã— 83.5pt @2x)   |\r\n| iPad, iPad mini   | 152px Ã— 152px (76pt Ã— 76pt @2x)       |\r\n| App Store         | 1024px Ã— 1024px (1024pt Ã— 1024pt @1x) |\r\n\r\n### Spotlightã€Settings å’Œ Notification å›¾æ ‡å°ºå¯¸\r\n\r\n| Device or context         | Spotlight icon size             | Settings icon size            | Notification icon size        |\r\n| :------------------------ | :------------------------------ | :---------------------------- | :---------------------------- |\r\n| iPhone                    | 120px Ã— 120px (40pt Ã— 40pt @3x) | 87px Ã— 87px (29pt Ã— 29pt @3x) | 60px Ã— 60px (20pt Ã— 20pt @3x) |\r\n|                           | 80px Ã— 80px (40pt Ã— 40pt @2x)   | 58px Ã— 58px (29pt Ã— 29pt @2x) | 40px Ã— 40px (20pt Ã— 20pt @2x) |\r\n| iPad Pro, iPad, iPad mini | 80px Ã— 80px (40pt Ã— 40pt @2x)   | 58px Ã— 58px (29pt Ã— 29pt @2x) | 40px Ã— 40px (20pt Ã— 20pt @2x) |\r\n\r\n### æ³¨æ„äº‹é¡¹\r\n\r\nå…³äº `Settings` å›¾æ ‡çš„ç‰¹åˆ«è¯´æ˜ï¼šè¯·å‹¿æ‰‹åŠ¨ä¸ºå…¶æ·»åŠ è¾¹æ¡†æˆ–é®ç½©æ•ˆæœï¼Œå› ä¸ºç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå›¾æ ‡æ·»åŠ  1 åƒç´ å®½çš„æè¾¹ï¼Œä»¥ç¡®ä¿å›¾æ ‡åœ¨ç™½è‰²èƒŒæ™¯ä¸Šèƒ½å¤Ÿæ¸…æ™°æ˜¾ç¤ºã€‚è¿™æ ·çš„è‡ªåŠ¨å¤„ç†å¯ä»¥ä¿è¯å›¾æ ‡åœ¨ç³»ç»Ÿè®¾ç½®ç•Œé¢ä¸­æœ‰ç»Ÿä¸€çš„å±•ç¤ºæ•ˆæœã€‚\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº† `iOS` åŠ¨æ€æ›´æ¢åº”ç”¨å›¾æ ‡çš„å®ç°æ–¹æ³•ï¼Œä»å‡†å¤‡å›¾æ ‡æ–‡ä»¶ã€é…ç½® `Info.plist` åˆ°ç¼–å†™ä»£ç ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å®Œæ•´çš„æŠ€æœ¯æŒ‡å—ã€‚\r\n\r\nè™½ç„¶è¿™ä¸ªåŠŸèƒ½æœ‰ä¸€äº›ä½¿ç”¨é™åˆ¶ï¼Œä½†å®ƒä¸ºæå‡ç”¨æˆ·ä½“éªŒæä¾›äº†çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åˆç†è¿ç”¨è¿™ä¸€åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨èŠ‚å‡æ—¥æˆ–è¥é”€æ´»åŠ¨æœŸé—´ï¼Œæ— éœ€å‘ç‰ˆå³å¯åŠ¨æ€æ›´æ–°åº”ç”¨å›¾æ ‡ï¼Œè®©åº”ç”¨ç•Œé¢æ›´å…·å¸å¼•åŠ›å’Œæ—¶æ•ˆæ€§ã€‚\r\n\r\nå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°è¿ç”¨è¿™ä¸€åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´ä¸°å¯Œçš„åº”ç”¨ä½“éªŒã€‚\r\n",
    "number": 14,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-07-10T08:00:00Z",
    "updatedAt": "2025-02-03T15:41:40Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/14",
    "jsonFilePath": "discussions/14-D_kwDONzrbkM4AeLdH.json",
    "markdownFilePath": "2018/7/14-D_kwDONzrbkM4AeLdH.md"
  },
  {
    "id": "D_kwDONzrbkM4AeLdJ",
    "title": "æ‰“é€ é«˜æ•ˆç¾è§‚çš„ç»ˆç«¯å·¥å…·ï¼šiTerm2 é…ç½®å…¨æ”»ç•¥",
    "body": "ä¸æƒ³åœ¨é»‘æ¼†æ¼†çš„ç»ˆç«¯é‡Œæ•²å‘½ä»¤ï¼Ÿæœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ æ‰“é€ ä¸€ä¸ªé¢œå€¼ä¸å®åŠ›å¹¶å­˜çš„ç»ˆç«¯ç¯å¢ƒã€‚\r\n\r\n## iTerm2 å®‰è£…æŒ‡å—\r\n\r\nä»[å®˜ç½‘](https://iterm2.com/downloads.html)ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…ã€‚\r\n\r\n## Oh My Zsh - è®©ç»ˆç«¯æ›´æ™ºèƒ½é«˜æ•ˆ\r\n\r\n`Oh My Zsh` æ˜¯ä¸€ä¸ªä»¤äººæƒŠå¹çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒä¸ä»…èƒ½ç¾åŒ–ä½ çš„ç»ˆç«¯ç•Œé¢ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½æ˜¾è‘—æå‡ä½ çš„å·¥ä½œæ•ˆç‡ã€‚åŸºäº `Zsh shell`ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ä¸»é¢˜ä¸å®ç”¨æ’ä»¶ç”Ÿæ€ç³»ç»Ÿã€‚æƒ³äº†è§£æ›´å¤šç²¾å½©ç‰¹æ€§ï¼Ÿè®¿é—®[å®˜æ–¹ç½‘ç«™](https://ohmyz.sh/)ã€‚\r\n\r\n### ä¸€é”®å®‰è£…\r\n\r\n```bash\r\nsh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\r\n```\r\n\r\n### æ‰“é€ ä¸ªæ€§åŒ–ç»ˆç«¯\r\n\r\n1. ä¸»é¢˜ç¾åŒ–\r\n\r\n   - [å†…ç½®ä¸»é¢˜](https://github.com/robbyrussell/oh-my-zsh/wiki/themes)\r\n   - [æ‰©å±•ä¸»é¢˜](https://github.com/robbyrussell/oh-my-zsh/wiki/External-themes)\r\n\r\n2. æ’ä»¶å®‰è£…\r\n\r\n   - [æ’ä»¶åˆ—è¡¨ 1](https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins)\r\n   - [æ’ä»¶åˆ—è¡¨ 2](https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins-Overview)\r\n\r\n#### å‘½ä»¤è¯­æ³•é«˜äº®\r\n\r\nå‘½ä»¤è¡Œä¸­çš„å‘½ä»¤é«˜äº®æ˜¯é€šè¿‡ `zsh-syntax-highlighting` å®ç°ï¼Œå®‰è£… `zsh-syntax-highlighting` çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ [Install zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md)ã€‚\r\n\r\n#### æ–‡ä»¶å’Œç›®å½•çš„å½©è‰²æ˜¾ç¤º\r\n\r\næ–‡ä»¶å’Œç›®å½•çš„å½©è‰²æ˜¾ç¤ºæ˜¯é€šè¿‡ `coreutils` å®ç°ï¼Œå®‰è£… `coreutils` çš„æ–¹æ³•å¾ˆç®€å•ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ï¼š\r\n\r\n1. [coreutils README-install](https://github.com/coreutils/coreutils/blob/master/README-install)\r\n2. [coreutils ä»‹ç»](https://blog.csdn.net/lengye7/article/details/80270379)\r\n\r\n## æœ€å\r\n\r\né€šè¿‡ä»¥ä¸Šçš„é…ç½®å’Œä¼˜åŒ–ï¼Œä½ çš„ç»ˆç«¯ä¸ä»…å˜å¾—æ›´åŠ ç¾è§‚ï¼Œè€Œä¸”åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿä¼šæ›´åŠ é«˜æ•ˆã€‚`iTerm2` é…åˆ `Oh My Zsh`ï¼Œå†åŠ ä¸Šå„ç§å®ç”¨çš„æ’ä»¶å’Œä¸»é¢˜ï¼Œå¯ä»¥æå¤§åœ°æå‡å‘½ä»¤è¡Œçš„ä½¿ç”¨ä½“éªŒã€‚å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®åŠ©ä½ æ‰“é€ ä¸€ä¸ªå¾—å¿ƒåº”æ‰‹çš„ç»ˆç«¯ç¯å¢ƒï¼Œè®©æ—¥å¸¸å¼€å‘å·¥ä½œäº‹åŠåŠŸå€\r\n",
    "number": 15,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nc-Kw",
          "name": "macOS",
          "url": "https://github.com/onnttf/blog/labels/macOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2018-12-18T08:00:00Z",
    "updatedAt": "2025-02-05T01:48:41Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/15",
    "jsonFilePath": "discussions/15-D_kwDONzrbkM4AeLdJ.json",
    "markdownFilePath": "2018/12/15-D_kwDONzrbkM4AeLdJ.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNZb",
    "title": "Charles è¯ä¹¦å®‰è£…æŒ‡å—",
    "body": "`Charles` æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ç½‘ç»œè°ƒè¯•å·¥å…·ï¼Œå®ƒé›† `HTTP` ä»£ç†æœåŠ¡å™¨ã€`HTTP` ç›‘è§†å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨äºä¸€ä½“ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡ `Charles` ç›‘æ§æ‰€æœ‰çš„ `HTTP`ã€`HTTPS` é€šä¿¡ï¼ŒåŒ…æ‹¬è¯·æ±‚ã€å“åº”ä»¥åŠå®Œæ•´çš„å¤´ä¿¡æ¯ï¼ˆ`cookies`ã€ç¼“å­˜ç­‰ï¼‰ã€‚\r\n\r\n## Charles æ ¸å¿ƒåŠŸèƒ½\r\n\r\n1. **ç½‘ç»œè¯·æ±‚ç›‘æ§**ï¼šå®æ—¶æŠ“å– `HTTP/HTTPS` è¯·æ±‚å’Œå“åº”\r\n2. **è°ƒè¯•è¾…åŠ©**ï¼šæ”¯æŒè¯·æ±‚é‡å‘ï¼Œæ–¹ä¾¿åç«¯æ¥å£è°ƒè¯•\r\n3. **å‚æ•°ä¿®æ”¹**ï¼šå¯æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚å‚æ•°ï¼Œçµæ´»æ§åˆ¶è¯·æ±‚å†…å®¹\r\n4. **ç½‘ç»œæ¨¡æ‹Ÿ**ï¼šæ”¯æŒæ¨¡æ‹Ÿå„ç§ç½‘ç»œç¯å¢ƒï¼ˆ`2G`/`3G`/`4G`ï¼‰ï¼Œæµ‹è¯•åº”ç”¨è¡¨ç°\r\n5. **æœ¬åœ°/è¿œç¨‹æ˜ å°„**ï¼šå¯å°†çº¿ä¸Šèµ„æºæ˜ å°„åˆ°æœ¬åœ°ï¼Œä¾¿äºå¼€å‘è°ƒè¯•\r\n6. **ç§»åŠ¨ç«¯æ”¯æŒ**ï¼šå®Œæ•´æ”¯æŒç§»åŠ¨è®¾å¤‡çš„æŠ“åŒ…éœ€æ±‚\r\n7. **è¯·æ±‚ç¼–è¾‘**ï¼šæ”¯æŒåŠ¨æ€ä¿®æ”¹å’Œæ‹¦æˆªç½‘ç»œè¯·æ±‚\r\n\r\n## è¯ä¹¦å®‰è£…æŒ‡å—\r\n\r\nè¦ä½¿ç”¨ Charles çš„å…¨éƒ¨åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®Œæˆè¯ä¹¦å®‰è£…ï¼š\r\n\r\n![image](https://file.onnttf.site/2019/01/02/1.jpg)\r\n\r\n### PC ç«¯è¯ä¹¦å®‰è£…\r\n\r\n1. **å®‰è£…è¯ä¹¦**\r\n\r\n   è¿›å…¥ `Charles` èœå•ï¼š`Help -> SSL Proxying -> Install Charles Root Certificate`\r\n\r\n   ç³»ç»Ÿä¼šæç¤ºé€‰æ‹©è¯ä¹¦å­˜å‚¨ä½ç½®ï¼Œè¯·æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„é’¥åŒ™ä¸²ï¼š\r\n\r\n   ![image](https://file.onnttf.site/2019/01/02/2.jpg)\r\n\r\n2. **ä¿¡ä»»è¯ä¹¦**\r\n\r\n   - æ‰“å¼€ç³»ç»Ÿçš„\"é’¥åŒ™ä¸²è®¿é—®\"\r\n   - åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ `Charles` å®šä½è¯ä¹¦\r\n   - åŒå‡» `Charles Proxy CA` è¯ä¹¦\r\n   - å±•å¼€\"ä¿¡ä»»\"é€‰é¡¹ï¼Œå°†è¯ä¹¦ä¿¡ä»»çº§åˆ«è®¾ç½®ä¸º\"å§‹ç»ˆä¿¡ä»»\"\r\n\r\n   ![image](https://file.onnttf.site/2019/01/02/3.jpg)\r\n\r\n### iOS æ¨¡æ‹Ÿå™¨è¯ä¹¦å®‰è£…\r\n\r\n1. **å®‰è£…è¯ä¹¦**\r\n\r\n   `Charles` èœå•æ“ä½œï¼š`Help -> SSL Proxying -> Install Charles Root Certificate in iOS Simulators`\r\n\r\n2. **ä¿¡ä»»è¯ä¹¦**\r\n\r\n   åœ¨æ¨¡æ‹Ÿå™¨ä¸­ä¾æ¬¡æ‰“å¼€ï¼š`Settings -> General -> About -> Certificate Trust Settings`\r\n\r\n   æ‰¾åˆ° `Charles` è¯ä¹¦å¹¶å¯ç”¨ä¿¡ä»»å¼€å…³ï¼š\r\n\r\n   ![image](https://file.onnttf.site/2019/01/02/4.jpg)\r\n\r\n### ç§»åŠ¨è®¾å¤‡è¯ä¹¦å®‰è£…\r\n\r\n1. **å®‰è£…è¯ä¹¦**\r\n\r\n   åœ¨ `Charles` ä¸­æ‰“å¼€è¯ä¹¦å®‰è£…å‘å¯¼ï¼š`Help -> SSL Proxying -> Install Charles Root Certificate on a Mobile Device or Remote Browser`\r\n\r\n   ![image](https://file.onnttf.site/2019/01/02/5.jpg)\r\n\r\n   å®‰è£…æ­¥éª¤ï¼š\r\n\r\n   - ç¡®ä¿ç§»åŠ¨è®¾å¤‡ä¸è¿è¡Œ `Charles` çš„ç”µè„‘å¤„äºåŒä¸€ç½‘ç»œ\r\n   - åœ¨ç§»åŠ¨è®¾å¤‡çš„ `WiFi` è®¾ç½®ä¸­é…ç½®ä»£ç†æœåŠ¡å™¨\r\n   - è¾“å…¥ `Charles` æ˜¾ç¤ºçš„ä»£ç†åœ°å€ï¼š`xxx.xx.xxx.xxx:xxxx`\r\n   - ä½¿ç”¨ç§»åŠ¨è®¾å¤‡æµè§ˆå™¨è®¿é—® [chls.pro/ssl](https://github.com/onnttf/blog/tree/322c1a6adda8dd6be880c9622823871046e6654b/mac/chls.pro/ssl/README.md) ä¸‹è½½å®‰è£…è¯ä¹¦\r\n\r\n2. **ä¿¡ä»»è¯ä¹¦**\r\n\r\n   åœ¨ç§»åŠ¨è®¾å¤‡ä¸­ä¾æ¬¡æ‰“å¼€ï¼šè®¾ç½® -> é€šç”¨ -> å…³äºæœ¬æœº -> è¯ä¹¦ä¿¡ä»»è®¾ç½®\r\n\r\n   æ‰¾åˆ°å¹¶å¯ç”¨ `Charles` è¯ä¹¦çš„ä¿¡ä»»é€‰é¡¹ï¼š\r\n\r\n   ![image](https://file.onnttf.site/2019/01/02/7.jpg)\r\n",
    "number": 16,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4nYwyw",
          "name": "iOS",
          "url": "https://github.com/onnttf/blog/labels/iOS"
        },
        {
          "id": "LA_kwDONzrbkM8AAAAB4nc-Kw",
          "name": "macOS",
          "url": "https://github.com/onnttf/blog/labels/macOS"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2019-01-02T08:00:00Z",
    "updatedAt": "2025-02-05T10:56:07Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/16",
    "jsonFilePath": "discussions/16-D_kwDONzrbkM4AeNZb.json",
    "markdownFilePath": "2019/1/16-D_kwDONzrbkM4AeNZb.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNZd",
    "title": "+load å’Œ +initialize çš„ç‰¹ç‚¹ä¸åŒºåˆ«",
    "body": "`+load` å’Œ `+initialize` æ˜¯ `Objective-C` ä¸­ä¸¤ä¸ªé‡è¦çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå®ƒä»¬æœ‰ç€ä¸åŒçš„ä½¿ç”¨åœºæ™¯å’Œç‰¹ç‚¹ã€‚\r\n\r\n|          | `+load`                            | `+initialize`                                |\r\n| -------- | ---------------------------------- | -------------------------------------------- |\r\n| è°ƒç”¨æ—¶æœº | ç±»ã€åˆ†ç±»è¢«åŠ è½½åˆ°è¿è¡Œæ—¶æ—¶ç«‹å³è°ƒç”¨   | ç±»ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°æ¶ˆæ¯æ—¶æ‡’åŠ è½½è°ƒç”¨               |\r\n| è°ƒç”¨æ–¹å¼ | ç›´æ¥é€šè¿‡å‡½æ•°åœ°å€è°ƒç”¨ï¼Œæ›´å¿«é€Ÿ       | é€šè¿‡ `objc_msgSend` æ¶ˆæ¯å‘é€æœºåˆ¶è°ƒç”¨ï¼Œæ›´çµæ´» |\r\n| è°ƒç”¨é¡ºåº | ç¼–è¯‘é¡ºåºå†³å®šï¼Œä¸¥æ ¼éµå¾ªç»§æ‰¿é“¾       | ç»§æ‰¿é“¾é¡ºåºè°ƒç”¨ï¼Œæ¯ä¸ªç±»ä»…è°ƒç”¨ä¸€æ¬¡             |\r\n| ä½¿ç”¨åœºæ™¯ | è¿è¡Œæ—¶æ–¹æ³•æ›¿æ¢ã€å…³è”å¯¹è±¡ç­‰åº•å±‚æ“ä½œ | ç±»çš„ä¸€èˆ¬æ€§åˆå§‹åŒ–å·¥ä½œ                         |\r\n\r\n## +load\r\n\r\n`+load` æ–¹æ³•ä¸»è¦ç”¨äºç±»çš„æ—©æœŸè®¾ç½®ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\r\n\r\n1. åœ¨ `main()` å‡½æ•°æ‰§è¡Œå‰å°±ä¼šè°ƒç”¨ï¼ŒæŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºè°ƒç”¨ï¼ŒåŠ è½½æ—¶æœºæœ€æ—©\r\n2. ç»§æ‰¿é“¾ä¸Šçš„è°ƒç”¨é¡ºåºä¸ºï¼šçˆ¶ç±» -> å­ç±» -> åˆ†ç±»\r\n3. é€šè¿‡å‡½æ•°æŒ‡é’ˆç›´æ¥è°ƒç”¨ï¼Œæ€§èƒ½è¾ƒå¥½\r\n4. é€‚åˆè¿›è¡Œ `Method Swizzling` ç­‰è¿è¡Œæ—¶æ“ä½œ\r\n5. æ¯ä¸ªç±»çš„ `+load` æ–¹æ³•ä»…ä¼šè°ƒç”¨ä¸€æ¬¡\r\n\r\n## +initialize\r\n\r\n`+initialize` æ–¹æ³•ç”¨äºç±»çš„å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç‰¹ç‚¹å¦‚ä¸‹ï¼š\r\n\r\n1. é‡‡ç”¨æ¶ˆæ¯å‘é€æœºåˆ¶è°ƒç”¨ï¼Œæ”¯æŒç»§æ‰¿å’ŒåŠ¨æ€ç‰¹æ€§\r\n2. è°ƒç”¨é¡ºåºéµå¾ªç»§æ‰¿é“¾ï¼šçˆ¶ç±» -> å­ç±»\r\n3. æ‡’åŠ è½½ç‰¹æ€§ - ä»…åœ¨é¦–æ¬¡ä½¿ç”¨ç±»æ—¶è°ƒç”¨ï¼Œæé«˜æ€§èƒ½\r\n4. çº¿ç¨‹å®‰å…¨ï¼Œè¿è¡Œæ—¶ä¿è¯æ¯ä¸ªç±»åªåˆå§‹åŒ–ä¸€æ¬¡\r\n5. å­ç±»è‹¥æœªå®ç°ä¼šç»§æ‰¿çˆ¶ç±»å®ç°\r\n6. é€‚åˆå¤„ç†ç±»çš„ä¸€èˆ¬åˆå§‹åŒ–å·¥ä½œ\r\n",
    "number": 17,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2019-03-11T08:00:00Z",
    "updatedAt": "2025-02-05T10:56:42Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/17",
    "jsonFilePath": "discussions/17-D_kwDONzrbkM4AeNZd.json",
    "markdownFilePath": "2019/3/17-D_kwDONzrbkM4AeNZd.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNZn",
    "title": "Ubuntu å®‰è£… MySQL æŒ‡å—",
    "body": "## å®‰è£…æ­¥éª¤\r\n\r\n### å®‰è£… MySQL APT é…ç½®åŒ…\r\n\r\n1. è®¿é—® [MySQL APT Repository](https://dev.mysql.com/downloads/repo/apt/)ï¼Œæ‰¾åˆ°æœ€æ–°çš„é…ç½®åŒ…\r\n2. ç‚¹å‡» `Download` æŒ‰é’®å¹¶å¤åˆ¶ `No thanks, just start my download` çš„ä¸‹è½½é“¾æ¥\r\n3. ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½å¹¶å®‰è£…é…ç½®åŒ…ï¼š\r\n\r\n   ```bash\r\n   # ä¸‹è½½é…ç½®åŒ…\r\n   wget https://dev.mysql.com/get/mysql-apt-config_0.8.12-1_all.deb\r\n   # å®‰è£…é…ç½®åŒ…\r\n   sudo dpkg -i mysql-apt-config_0.8.12-1_all.deb\r\n   ```\r\n\r\n4. åœ¨é…ç½®ç•Œé¢ä¸­é€‰æ‹© `MySQL 5.7` ç‰ˆæœ¬ï¼ŒæŒ‰ `OK` ç¡®è®¤\r\n\r\n   ![image](https://file.onnttf.site/2019/04/03/1.jpg)\r\n\r\n### å®‰è£… MySQL\r\n\r\n```bash\r\n# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨\r\nsudo apt-get update\r\n# å®‰è£… MySQL\r\nsudo apt-get install mysql-server mysql-common mysql-client\r\n```\r\n\r\n> æ³¨æ„ï¼šå®‰è£…è¿‡ç¨‹ä¸­ç³»ç»Ÿä¼šå¼¹å‡º `root` å¯†ç è®¾ç½®ç•Œé¢ï¼Œè¯·è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„å¯†ç å¹¶ç‰¢è®°ã€‚å¦‚æœæ²¡æœ‰å‡ºç°å¯†ç è®¾ç½®ç•Œé¢ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæ‚¨å¯ä»¥åœ¨å®Œæˆå®‰è£…åæŒ‰ç…§åç»­æ­¥éª¤ä¸­çš„è¯´æ˜è¿›è¡Œå¯†ç è®¾ç½®ã€‚ç¡®ä¿é€‰æ‹©çš„å¯†ç å…·æœ‰è¶³å¤Ÿçš„å¤æ‚åº¦ï¼Œå»ºè®®åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ã€‚\r\n\r\n### éªŒè¯å®‰è£…\r\n\r\n`MySQL` å®‰è£…å®Œæˆåä¼šè‡ªåŠ¨å¯åŠ¨ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥çŠ¶æ€ï¼š\r\n\r\n```bash\r\nsudo systemctl status mysql\r\n```\r\n\r\nå¸¸ç”¨æœåŠ¡å‘½ä»¤ï¼š\r\n\r\n```bash\r\nsudo systemctl start mysql   # å¯åŠ¨\r\nsudo systemctl stop mysql    # åœæ­¢\r\nsudo systemctl restart mysql # é‡å¯\r\n```\r\n\r\n### å®‰å…¨é…ç½®\r\n\r\n#### ä¿®æ”¹ root å¯†ç \r\n\r\n```bash\r\n# ä»¥ root èº«ä»½ç™»å½• MySQL\r\nsudo mysql\r\n\r\n# ä¿®æ”¹éªŒè¯æ–¹å¼å’Œå¯†ç \r\nmysql> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'æ‚¨çš„æ–°å¯†ç ';\r\nmysql> FLUSH PRIVILEGES;\r\nmysql> EXIT;\r\n```\r\n\r\n#### åˆ›å»ºæ–°ç”¨æˆ·\r\n\r\n```bash\r\nmysql> CREATE USER 'ç”¨æˆ·å'@'%' IDENTIFIED BY 'å¯†ç ';\r\n```\r\n\r\n> `%` è¡¨ç¤ºå…è®¸è¿œç¨‹è®¿é—®ï¼Œ`localhost` è¡¨ç¤ºä»…å…è®¸æœ¬åœ°è®¿é—®\r\n\r\n### ä¼˜åŒ–é…ç½®\r\n\r\n#### è®¾ç½® `UTF-8` å­—ç¬¦é›†\r\n\r\nç¼–è¾‘ `/etc/mysql/mysql.conf.d/mysqld.cnf`ï¼š\r\n\r\n```ini\r\n[client]\r\ndefault-character-set=utf8mb4\r\n\r\n[mysql]\r\ndefault-character-set=utf8mb4\r\n\r\n[mysqld]\r\ncharacter-set-server=utf8mb4\r\ncollation-server=utf8mb4_unicode_ci\r\n```\r\n\r\n#### é…ç½®è¿œç¨‹è®¿é—®\r\n\r\n1. ç¼–è¾‘é…ç½®æ–‡ä»¶\r\n\r\n   ```bash\r\n   sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf\r\n   # æ³¨é‡Šæ‰ bind-address = 127.0.0.1\r\n   ```\r\n\r\n2. æˆæƒè¿œç¨‹è®¿é—®\r\n\r\n   ```bash\r\n   mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'å¯†ç ' WITH GRANT OPTION;\r\n   mysql> FLUSH PRIVILEGES;\r\n   ```\r\n\r\n3. é‡å¯ `MySQL`ï¼š\r\n\r\n   ```bash\r\n   sudo systemctl restart mysql\r\n   ```\r\n\r\n## å¸¸è§é—®é¢˜æ’æŸ¥\r\n\r\n1. æ— æ³•è¿œç¨‹è¿æ¥\r\n\r\n   - æ£€æŸ¥é˜²ç«å¢™é…ç½®\r\n   - éªŒè¯ `bind-address` è®¾ç½®\r\n   - ç¡®è®¤ç”¨æˆ·æƒé™\r\n\r\n2. å­—ç¬¦é›†é—®é¢˜\r\n\r\n   - ä½¿ç”¨ `SHOW VARIABLES LIKE 'character%';` æ£€æŸ¥é…ç½®\r\n   - ç¡®ä¿åº”ç”¨ç«¯ä½¿ç”¨æ­£ç¡®çš„å­—ç¬¦é›†\r\n\r\n## å‚è€ƒèµ„æ–™\r\n\r\n1. [MySQL å®˜æ–¹æ–‡æ¡£](https://dev.mysql.com/doc/)\r\n2. [Ubuntu MySQL å®‰è£…æŒ‡å—](https://ubuntu.com/server/docs/databases-mysql)\r\n",
    "number": 18,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2019-04-03T08:00:00Z",
    "updatedAt": "2025-02-05T10:59:15Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/18",
    "jsonFilePath": "discussions/18-D_kwDONzrbkM4AeNZn.json",
    "markdownFilePath": "2019/4/18-D_kwDONzrbkM4AeNZn.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNZp",
    "title": "10 åˆ†é’Ÿåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª CocoaPods å…¬æœ‰åº“",
    "body": "æƒ³è®©ä½ çš„ä»£ç è¢«å…¨ä¸–ç•Œçš„å¼€å‘è€…ä½¿ç”¨å—ï¼Ÿæœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»ºã€é…ç½®å¹¶å‘å¸ƒä¸€ä¸ª `CocoaPods` å…¬æœ‰åº“ã€‚\r\n\r\n## æ³¨å†Œ CocoaPods è´¦å·\r\n\r\n### åˆ›å»ºè´¦å·\r\n\r\n```bash\r\n# ä½¿ç”¨ --verbose å‚æ•°å¯ä»¥çœ‹åˆ°è¯¦ç»†çš„æ³¨å†Œè¿‡ç¨‹ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜\r\n$ pod trunk register {ä½ çš„é‚®ç®±} '{ä½ çš„ç”¨æˆ·å}' --verbose\r\n# ... æ›´å¤šè¿æ¥ä¿¡æ¯ ...\r\nopening connection to trunk.cocoapods.org:443...\r\n[!] Please verify the session by clicking the link in the verification email\r\n```\r\n\r\n### éªŒè¯é‚®ç®±\r\n\r\n1. æ‰“å¼€é‚®ç®±æŸ¥æ”¶æ ‡é¢˜ä¸º **[CocoaPods] Confirm your session** çš„éªŒè¯é‚®ä»¶\r\n2. ç‚¹å‡»éªŒè¯é“¾æ¥ï¼Œå®Œæˆæ³¨å†Œ\r\n\r\n### éªŒè¯æ³¨å†ŒçŠ¶æ€\r\n\r\n```bash\r\n$ pod trunk me\r\n  - Name:     YOURNAME\r\n  - Email:    YOURMAIL\r\n  - Since:    May 23rd, 2018 03:02\r\n  - Pods:\r\n    - PodName\r\n  - Sessions:\r\n    - June 20th, 08:17     -        October 26th, 08:39. IP: xxx.xxx.xxx.xxx\r\n```\r\n\r\n## åˆ›å»ºå…¬æœ‰ Pod åº“\r\n\r\n### åˆ›å»º GitHub ä»“åº“\r\n\r\n1. åœ¨ `GitHub` åˆ›å»ºæ–°ä»“åº“\r\n2. è®°å½•é‡è¦ä¿¡æ¯\r\n\r\n   - ä»“åº“ä¸»é¡µï¼š<<https://github.com/{GitHub> ç”¨æˆ·å}/{Pod åç§°}>\r\n   - Clone åœ°å€ï¼š<<https://github.com/{GitHub> ç”¨æˆ·å}/{Pod åç§°}.git>\r\n\r\n### ä½¿ç”¨ pod è„šæ‰‹æ¶åˆ›å»º pod åº“\r\n\r\n```bash\r\n$ pod lib create {YOURPODNAME}\r\nCloning `https://github.com/CocoaPods/pod-template.git` into `YOURPODNAME`.\r\nConfiguring YOURPODNAME template.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\n\r\n------------------------------\r\n\r\nTo get you started we need to ask a few questions, this should only take a minute.\r\n\r\nIf this is your first time we recommend running through with the guide:\r\n - https://guides.cocoapods.org/making/using-pod-lib-create.html\r\n ( hold cmd and click links to open in a browser. )\r\n\r\n\r\nWhat platform do you want to use?? [ iOS / macOS ]\r\n > {iOS}\r\n\r\nWhat language do you want to use?? [ Swift / ObjC ]\r\n > {ObjC}\r\n\r\nWould you like to include a demo application with your library? [ Yes / No ]\r\n > {Yes}\r\n\r\nWhich testing frameworks will you use? [ Specta / Kiwi / None ]\r\n > {None}\r\n\r\nWould you like to do view based testing? [ Yes / No ]\r\n > {No}\r\n\r\nWhat is your class prefix?\r\n > {Prefix}\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\n\r\nRunning pod install on your new library.\r\n\r\nAnalyzing dependencies\r\nFetching podspec for `YOURPODNAME` from `../`\r\nDownloading dependencies\r\nInstalling YOURPODNAME (0.1.0)\r\nGenerating Pods project\r\nIntegrating client project\r\n```\r\n\r\n### é…ç½® .podspec\r\n\r\n`.podspec` æ–‡ä»¶æ˜¯ä½ çš„ `Pod` åº“çš„æ ¸å¿ƒé…ç½®ä¿¡æ¯ï¼ŒåŒ…å«äº†ç‰ˆæœ¬ã€ä½œè€…ã€ä¾èµ–ç­‰é‡è¦å…ƒæ•°æ®ï¼Œéœ€è¦ä»”ç»†é…ç½®æ¯ä¸€é¡¹ï¼š\r\n\r\n```ruby\r\nPod::Spec.new do |s|\r\n  s.name             = '{Pod åç§°}'              # Pod åç§°\r\n  s.version          = '0.1.0'                # ç‰ˆæœ¬å·\r\n  s.summary          = 'ä¸€å¥è¯æè¿°ä½ çš„ Pod'      # ç®€çŸ­æè¿°\r\n  s.description      = <<-DESC                # è¯¦ç»†æè¿°\r\n                       è¯¦ç»†æè¿°ä½ çš„ Pod èƒ½åšä»€ä¹ˆï¼Œ\r\n                       æœ‰ä»€ä¹ˆç‰¹ç‚¹å’Œä¼˜åŠ¿ã€‚\r\n                       DESC\r\n  s.homepage         = 'https://github.com/{GitHub ç”¨æˆ·å}/{Pod åç§°}'\r\n  s.license          = { :type => 'MIT', :file => 'LICENSE' }\r\n  s.author           = { '{ä½œè€…}' => '{é‚®ç®±}' }\r\n  s.source           = { :git => 'ä½ çš„ä»“åº“åœ°å€.git', :tag => s.version.to_s }\r\n  s.ios.deployment_target = '8.0'\r\n  s.source_files = '{Pod åç§°}/Classes/**/*'\r\nend\r\n```\r\n\r\n### éªŒè¯ä¸å‘å¸ƒ\r\n\r\n1. éªŒè¯é…ç½®\r\n\r\n   ```bash\r\n   pod lib lint\r\n   ```\r\n\r\n2. æäº¤ä»£ç \r\n\r\n   ```bash\r\n   git add .\r\n   git commit -m \"åˆå§‹åŒ– Pod åº“\"\r\n   git push\r\n   ```\r\n\r\n3. åˆ›å»ºå‘å¸ƒç‰ˆæœ¬\r\n\r\n   ```bash\r\n   git tag -a 0.1.0 -m 'ç¬¬ä¸€ä¸ªç‰ˆæœ¬'\r\n   git push origin --tags\r\n   ```\r\n\r\n4. å‘å¸ƒåˆ° `CocoaPods`\r\n\r\n   ```bash\r\n   $ pod trunk push\r\n\r\n   [!] Found podspec `YOURPODNAME.podspec`\r\n   Updating spec repo `master`\r\n   Validating podspec\r\n   -> YOURPODNAME (0.1.0)\r\n       - NOTE  | xcodebuild:  note: Using new build system\r\n       - NOTE  | [iOS] xcodebuild:  note: Planning build\r\n       - NOTE  | [iOS] xcodebuild:  note: Constructing build description\r\n       - NOTE  | xcodebuild:  note: Execution policy exception registration failed and was skipped: Error Domain=NSPOSIXErrorDomain Code=1 \"Operation not permitted\"\r\n       - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically.\r\n\r\n   Updating spec repo `master`\r\n\r\n   --------------------------------------------------------------------------------\r\n   ğŸ‰  Congrats\r\n\r\n   ğŸš€  YOURPODNAME (0.1.0) successfully published\r\n   ğŸ“…  June 18th, 10:30\r\n   ğŸŒ  https://cocoapods.org/pods/YOURPODNAME\r\n   ğŸ‘  Tell your friends!\r\n   --------------------------------------------------------------------------------\r\n   ```\r\n\r\n## å¦‚ä½•åœ¨é¡¹ç›®ä¸­é›†æˆä½ çš„ Pod\r\n\r\nè‡³æ­¤ï¼Œä½ å·²æˆåŠŸå‘å¸ƒäº†è‡ªå·±çš„ç¬¬ä¸€ä¸ª `CocoaPods` å…¬æœ‰åº“ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å…¶ä»–å¼€å‘è€…å¦‚ä½•ä½¿ç”¨å®ƒï¼š\r\n\r\n1. åœ¨é¡¹ç›®çš„ `Podfile` ä¸­æ·»åŠ ä¾èµ–\r\n\r\n   ```ruby\r\n   # ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬\r\n   pod '{ä½ çš„ Pod åç§°}'\r\n\r\n   # æˆ–æŒ‡å®šç‰ˆæœ¬\r\n   pod '{ä½ çš„ Pod åç§°}', '~> 0.1.0'\r\n   ```\r\n\r\n2. æ‰§è¡Œå®‰è£…å‘½ä»¤\r\n\r\n   ```bash\r\n   pod install\r\n   ```\r\n\r\n3. åœ¨ä»£ç ä¸­å¯¼å…¥å¹¶ä½¿ç”¨\r\n\r\n   ```objc\r\n   // Objective-C\r\n   #import <ä½ çš„ Pod åç§°/å¤´æ–‡ä»¶åç§°.h>\r\n\r\n   // Swift\r\n   import ä½ çš„ Pod åç§°\r\n   ```\r\n\r\n## æœ€å\r\n\r\nä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥æŒç»­æ”¹è¿›ä½ çš„åº“ï¼š\r\n\r\n- æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹\r\n- ä¸æ–­ä¼˜åŒ–ä»£ç è´¨é‡\r\n- åŠæ—¶å¤„ç†ç”¨æˆ·åé¦ˆå’Œ `issue`\r\n- å®šæœŸå‘å¸ƒæ–°ç‰ˆæœ¬ä¿®å¤é—®é¢˜å’Œå¢åŠ åŠŸèƒ½\r\n\r\nå¸Œæœ›ä½ èƒ½åœ¨å¼€æºç¤¾åŒºæ”¶è·æˆé•¿ï¼Œè®©æ›´å¤šå¼€å‘è€…å—ç›Šäºä½ çš„ä»£ç ï¼\r\n",
    "number": 19,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2019-06-21T08:00:00Z",
    "updatedAt": "2025-02-05T10:59:38Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/19",
    "jsonFilePath": "discussions/19-D_kwDONzrbkM4AeNZp.json",
    "markdownFilePath": "2019/6/19-D_kwDONzrbkM4AeNZp.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNZs",
    "title": "å¦‚ä½•ä¿æŒ SSH æœåŠ¡ä¸æ‰çº¿",
    "body": "åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œä¿æŒ `SSH` æœåŠ¡ä¸æ‰çº¿æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„éœ€æ±‚ã€‚å¸¸è§ä¿æŒ `SSH` æœåŠ¡ä¸æ‰çº¿çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š\r\n\r\n1. æœåŠ¡ç«¯å‘é€å¿ƒè·³åŒ…\r\n2. å®¢æˆ·ç«¯å‘é€å¿ƒè·³åŒ…\r\n\r\nè¿™ä¸¤ç§æ–¹æ¡ˆéƒ½èƒ½æœ‰æ•ˆè§£å†³ `SSH` è¿æ¥æ–­å¼€çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿™ä¸¤ç§æ–¹æ¡ˆçš„å…·ä½“é…ç½®æ–¹æ³•ã€‚\r\n\r\n## æœåŠ¡ç«¯å‘é€å¿ƒè·³åŒ…\r\n\r\n1. ç™»å½•æœåŠ¡å™¨åï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶\r\n\r\n   ```bash\r\n   sudo vim /etc/ssh/sshd_config\r\n   ```\r\n\r\n2. æ£€æŸ¥å¹¶é…ç½®å¿ƒè·³åŒ…ç›¸å…³å‚æ•°\r\n\r\n   1. æ‰¾åˆ°ä»¥ä¸‹ä¸¤ä¸ªå…³é”®é…ç½®é¡¹ï¼ˆå¦‚æœ‰ `#`ï¼Œéœ€è¦å»æ‰ï¼‰\r\n\r\n      - `ClientAliveInterval` - æ§åˆ¶æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å¿ƒè·³åŒ…çš„æ—¶é—´é—´éš”\r\n      - `ClientAliveCountMax` - è®¾ç½®å¿ƒè·³åŒ…æ£€æµ‹å¤±è´¥çš„æœ€å¤§é‡è¯•æ¬¡æ•°\r\n\r\n   2. æ¨èçš„å‚æ•°é…ç½®\r\n\r\n      ```ini\r\n      # æ¯ 30 ç§’å‘é€ä¸€æ¬¡å¿ƒè·³åŒ…æ£€æµ‹ï¼Œå¯ä»¥åŠæ—¶å‘ç°è¿æ¥å¼‚å¸¸\r\n      ClientAliveInterval 30\r\n      # å…è®¸è¿ç»­ 3 æ¬¡å¿ƒè·³åŒ…å¤±è´¥ï¼Œåœ¨ç½‘ç»œæ³¢åŠ¨æ—¶ä»ä¿æŒç¨³å®š\r\n      ClientAliveCountMax 3\r\n      ```\r\n\r\n3. ä¿å­˜é…ç½®æ–‡ä»¶\r\n\r\n   - æŒ‰ `ESC` é”®é€€å‡ºç¼–è¾‘æ¨¡å¼\r\n   - è¾“å…¥ `:wq` ä¿å­˜æ–‡ä»¶å¹¶é€€å‡º\r\n   - å¦‚é‡åˆ°æƒé™é—®é¢˜ï¼Œä½¿ç”¨ `:w!` å¼ºåˆ¶ä¿å­˜\r\n\r\n4. é‡å¯ `SSH` æœåŠ¡åº”ç”¨æ–°é…ç½®\r\n\r\n   ```bash\r\n   sudo systemctl restart ssh\r\n   ```\r\n\r\n> æ ¸å¿ƒå‚æ•°è¯¦è§£ï¼š\r\n>\r\n> **ClientAliveInterval**\r\n>\r\n> - åŠŸèƒ½ï¼šæœåŠ¡å™¨å®šæ—¶å‘é€å¿ƒè·³åŒ…æ£€æµ‹å®¢æˆ·ç«¯æ˜¯å¦å­˜æ´»\r\n> - å•ä½ï¼šç§’ï¼ˆsï¼‰\r\n> - é»˜è®¤ï¼š`0`ï¼ˆç¦ç”¨ï¼‰\r\n> - å»ºè®®ï¼š`30` ç§’ï¼ˆå¹³è¡¡æ€§èƒ½ä¸åŠæ—¶æ€§ï¼‰\r\n> - è¯´æ˜ï¼šè¶…è¿‡è®¾å®šæ—¶é—´æœªæ”¶åˆ°å®¢æˆ·ç«¯å“åº”ï¼Œåˆ™å‘é€å¿ƒè·³åŒ…\r\n>\r\n> **ClientAliveCountMax**\r\n>\r\n> - åŠŸèƒ½ï¼šå…è®¸å¿ƒè·³æ£€æµ‹å¤±è´¥çš„æœ€å¤§æ¬¡æ•°\r\n> - é»˜è®¤ï¼š`3`\r\n> - å»ºè®®ï¼š`3` æ¬¡ï¼ˆå¯é æ€§ä¸èµ„æºæ¶ˆè€—çš„æœ€ä½³å¹³è¡¡ï¼‰\r\n> - ä½œç”¨ï¼šé˜²æ­¢ä¸´æ—¶ç½‘ç»œæ³¢åŠ¨é€ æˆè¿æ¥æ–­å¼€\r\n> - è¯´æ˜ï¼šå®é™…æœ€å¤§è¶…æ—¶æ—¶é—´ = é—´éš” Ã— æ¬¡æ•°\r\n\r\n## å®¢æˆ·ç«¯å‘é€å¿ƒè·³åŒ…\r\n\r\n1. è¿›å…¥å®¢æˆ·ç«¯çš„ `SSH` é…ç½®ç›®å½•\r\n\r\n   ```bash\r\n   cd ~/.ssh/\r\n   ```\r\n\r\n2. æ‰“å¼€é…ç½®æ–‡ä»¶\r\n\r\n   ```bash\r\n   vim config\r\n   ```\r\n\r\n3. æ·»åŠ ä»¥ä¸‹å¿ƒè·³é…ç½®å‚æ•°å¹¶ä¿å­˜\r\n\r\n   ```ini\r\n   # é…ç½®å®¢æˆ·ç«¯æ¯ 30 ç§’å‘é€ä¸€æ¬¡å¿ƒè·³åŒ…\r\n   ServerAliveInterval 30\r\n   # å…è®¸æœ€å¤š 120 æ¬¡é‡è¯•\r\n   ServerAliveCountMax 120\r\n   ```\r\n\r\n4. ä¿å­˜å¹¶é€€å‡º\r\n\r\n   - æŒ‰ `ESC` é”®é€€å‡ºç¼–è¾‘æ¨¡å¼\r\n   - è¾“å…¥ `:wq` ä¿å­˜å¹¶é€€å‡º\r\n\r\n> æ ¸å¿ƒå‚æ•°è¯´æ˜ï¼š\r\n>\r\n> **ServerAliveInterval**\r\n>\r\n> - åŠŸèƒ½ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”\r\n> - å•ä½ï¼šç§’ï¼ˆsï¼‰\r\n> - é»˜è®¤å€¼ï¼š`0`ï¼ˆè¡¨ç¤ºç¦ç”¨ï¼‰\r\n> - å»ºè®®å€¼ï¼š`20-60` ç§’\r\n> - æ³¨æ„ï¼šè®¾ç½®è¿‡å°ä¼šå¢åŠ æœåŠ¡å™¨è´Ÿè½½\r\n>\r\n> **ServerAliveCountMax**\r\n>\r\n> - åŠŸèƒ½ï¼šå®¢æˆ·ç«¯å…è®¸å¿ƒè·³æ£€æµ‹å¤±è´¥çš„æœ€å¤§æ¬¡æ•°\r\n> - é»˜è®¤å€¼ï¼š`3`\r\n> - å»ºè®®å€¼ï¼šæ ¹æ®éœ€è¦è®¾ç½®ï¼Œé€šå¸¸ `100-999`\r\n> - è¯´æ˜ï¼šå®é™…æœ€å¤§ä¿æŒæ—¶é—´ = é—´éš” Ã— æ¬¡æ•°\r\n\r\n## å¦‚ä½•é€‰æ‹©æœ€ä½³æ–¹æ¡ˆ\r\n\r\nä¸¤ç§æ–¹æ¡ˆå„æœ‰ä¼˜åŠ¿ï¼Œé€‰æ‹©å“ªç§ä¸»è¦å–å†³äºæ‚¨çš„å…·ä½“ä½¿ç”¨åœºæ™¯ï¼š\r\n\r\n- **ä¸€å°æœåŠ¡å™¨è¿æ¥å¤šä¸ªå®¢æˆ·ç«¯**\r\n\r\n  æ¨èæœåŠ¡ç«¯å¿ƒè·³æ–¹æ¡ˆï¼Œåªéœ€åœ¨æœåŠ¡å™¨é…ç½®ä¸€æ¬¡ï¼Œå¯¹æ‰€æœ‰å®¢æˆ·ç«¯ç”Ÿæ•ˆ\r\n\r\n- **ä¸€å°å®¢æˆ·ç«¯è¿æ¥å¤šå°æœåŠ¡å™¨**\r\n\r\n  æ¨èå®¢æˆ·ç«¯å¿ƒè·³æ–¹æ¡ˆï¼Œåªéœ€åœ¨å®¢æˆ·ç«¯é…ç½®ä¸€æ¬¡ï¼Œå¯¹æ‰€æœ‰æœåŠ¡å™¨è¿æ¥ç”Ÿæ•ˆ\r\n",
    "number": 20,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2020-03-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:00:10Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/20",
    "jsonFilePath": "discussions/20-D_kwDONzrbkM4AeNZs.json",
    "markdownFilePath": "2020/3/20-D_kwDONzrbkM4AeNZs.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNZw",
    "title": "å¦‚ä½•æ¸…ç† Git ä»“åº“",
    "body": "## Git ä»“åº“ä½“ç§¯å¢é•¿çš„åŸå› \r\n\r\nGit é€šè¿‡ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè®°å½•æ–‡ä»¶çš„æ¯ä¸€ä¸ªå˜æ›´ã€‚å³ä½¿åªä¿®æ”¹äº†æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹ï¼ŒGit ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ `blob` å¯¹è±¡æ¥å­˜å‚¨æ›´æ–°åçš„æ–‡ä»¶å†…å®¹ã€‚æ¯æ¬¡æäº¤éƒ½ä¼šç”Ÿæˆæ–°å¯¹è±¡ï¼Œå¯¼è‡´ä»“åº“ä½“ç§¯ä¸æ–­å¢åŠ ã€‚éšç€é¡¹ç›®å¼€å‘çš„æ·±å…¥ï¼Œè¿™äº›å¯¹è±¡ä¼šè¶Šæ¥è¶Šå¤šã€‚\r\n\r\nè™½ç„¶ Git ä¼šåœ¨ `git gc` æ‰“åŒ…æˆ– `git push` æ—¶è‡ªåŠ¨è¿›è¡Œæ‰“åŒ…å‹ç¼©ï¼Œå°† `blob` å¯¹è±¡åˆå¹¶æˆåŒ…æ–‡ä»¶å¹¶ä½¿ç”¨å¢é‡ç¼–ç åªä¿å­˜å·®å¼‚å†…å®¹ï¼Œä½†ä»“åº“ä½“ç§¯ä»ä¼šéšç€ä½¿ç”¨é€æ¸å¢é•¿ã€‚å› æ­¤éœ€è¦å®šæœŸæ¸…ç†æ¥ä¿æŒä»“åº“è½»é‡ã€‚\r\n\r\n## æ¸…ç†æ–¹æ³•\r\n\r\n### æ¸…ç†å¤§æ–‡ä»¶\r\n\r\nè¿™ç§æ–¹æ³•ä¸»è¦ç”¨äºæ¸…ç†å ç”¨ç©ºé—´è¾ƒå¤§æˆ–ä¸å†éœ€è¦çš„æ–‡ä»¶ï¼ˆä»¥ä¸‹ç§°ä¸ºå†—ä½™æ–‡ä»¶ï¼‰åŠå…¶æäº¤è®°å½•ã€‚**æ³¨æ„ï¼šä»¥ä¸‹æ“ä½œä¼šçœŸå®åˆ é™¤æ–‡ä»¶ï¼Œè¯·è°¨æ…æ“ä½œï¼**\r\n\r\n1. å®šä½å†—ä½™æ–‡ä»¶\r\n\r\n   ä½¿ç”¨ [git-rev-list](https://git-scm.com/docs/git-rev-list) å’Œ [git-verify-pack](https://git-scm.com/docs/git-verify-pack) å‘½ä»¤æŸ¥æ‰¾æœ€å ç©ºé—´çš„æ–‡ä»¶ï¼š\r\n\r\n   ```bash\r\n   git rev-list --objects --all | \\\r\n   grep \"$(git verify-pack -v .git/objects/pack/*.idx | \\\r\n   sort -k 3 -n | tail -5 | awk '{print $1}')\"\r\n   ```\r\n\r\n2. åˆ é™¤å†—ä½™æ–‡ä»¶\r\n\r\n   ä½¿ç”¨ [git-filter-branch](https://git-scm.com/docs/git-filter-branch) åˆ é™¤å†—ä½™æ–‡ä»¶ï¼š\r\n\r\n   ```bash\r\n   git filter-branch --force --index-filter \\\r\n   'git rm -r --cached --ignore-unmatch æ–‡ä»¶å' \\\r\n   --prune-empty -- --all\r\n   ```\r\n\r\n   **æ‰§è¡Œåˆ é™¤å‰åŠ¡å¿…ä»”ç»†æ£€æŸ¥æ–‡ä»¶åˆ—è¡¨ï¼**\r\n\r\n3. å½»åº•æ¸…ç†\r\n\r\n   æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å½»åº•æ¸…ç†ä»“åº“ï¼Œåˆ é™¤å¤‡ä»½å¼•ç”¨ã€è¿‡æœŸçš„ reflog è®°å½•ï¼Œå¹¶å¯¹ä»“åº“è¿›è¡Œåƒåœ¾å›æ”¶ï¼š\r\n\r\n   ```bash\r\n   # åˆ é™¤å¤‡ä»½çš„å¼•ç”¨\r\n   git for-each-ref --format='delete %(refname)' refs/original | git update-ref --stdin\r\n   # æ¸…ç†è¿‡æœŸçš„ reflog è®°å½•\r\n   git reflog expire --expire=now --all\r\n   # è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œæ¸…ç†ä¸å¯è¾¾å¯¹è±¡\r\n   git gc --prune=now\r\n   ```\r\n\r\n4. ç¡®è®¤æ— è¯¯åï¼Œæ¨é€æ›´æ–°åˆ°è¿œç¨‹ä»“åº“\r\n\r\n   ```bash\r\n   git push --force\r\n   ```\r\n\r\n### é‡ç½®ä»“åº“\r\n\r\nè¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿä½†æ¿€è¿›çš„è§£å†³æ–¹æ¡ˆï¼Œä¼š**å®Œå…¨æ¸…é™¤ä»“åº“çš„æ‰€æœ‰å†å²è®°å½•**ã€‚ç”±äºæ“ä½œä¸å¯é€†ï¼Œå»ºè®®ä»…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ï¼š\r\n\r\n- ä»“åº“ä½“ç§¯è¿‡å¤§ä¸”å†å²è®°å½•ä¸å†é‡è¦\r\n- éœ€è¦å½»åº•æ¸…é™¤æ•æ„Ÿä¿¡æ¯\r\n- é‡æ–°å¼€å§‹ä¸€ä¸ªå¹²å‡€çš„ç‰ˆæœ¬å†å²\r\n\r\næ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š\r\n\r\n1. æ¸…ç†æ‰€æœ‰è¿œç¨‹åˆ†æ”¯\r\n\r\n   ```bash\r\n   # åˆ é™¤é™¤äº† master ä¹‹å¤–çš„æ‰€æœ‰è¿œç¨‹åˆ†æ”¯\r\n   git branch -r | grep origin | grep -v '>' | grep -v master | xargs -L1 | awk '{sub(/origin\\//,\"\");print}'| xargs git push origin --delete\r\n   ```\r\n\r\n2. é‡æ–°åˆå§‹åŒ–ä»“åº“\r\n\r\n   ```bash\r\n   # åˆ é™¤æ—§çš„ .git ç›®å½•å¹¶åˆå§‹åŒ–æ–°ä»“åº“\r\n   rm -rf .git\r\n   git init\r\n   git add .\r\n   git commit -m \"Initial commit: Reset repository\"\r\n   ```\r\n\r\n3. é‡æ–°å…³è”è¿œç¨‹ä»“åº“\r\n\r\n   ```bash\r\n   # æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€å¹¶å¼ºåˆ¶æ¨é€\r\n   git remote add origin <ä»“åº“åœ°å€>\r\n   git push -f origin master\r\n   ```\r\n\r\n**æ³¨æ„ï¼š** æ­¤æ“ä½œä¼šæ°¸ä¹…åˆ é™¤æ‰€æœ‰æäº¤å†å²ã€åˆ†æ”¯ä¿¡æ¯å’Œæ ‡ç­¾ã€‚\r\n",
    "number": 21,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2020-07-28T08:00:00Z",
    "updatedAt": "2025-02-05T11:00:43Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/21",
    "jsonFilePath": "discussions/21-D_kwDONzrbkM4AeNZw.json",
    "markdownFilePath": "2020/7/21-D_kwDONzrbkM4AeNZw.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNb-",
    "title": "Shell å’Œè„šæœ¬",
    "body": "**æœ¬æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŸæ–‡é“¾æ¥**ï¼š[Shell](https://missing.csail.mit.edu/2019/shell/)\r\n\r\nShell æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ã€æ–‡æœ¬åŒ–çš„è®¡ç®—æœºæ¥å£ã€‚\r\n\r\nShell æç¤ºç¬¦ï¼šå½“ä½ æ‰“å¼€ç»ˆç«¯æ—¶çœ‹åˆ°çš„ä¸€åˆ‡ã€‚å¯ä»¥è®©ç”¨æˆ·æ‰§è¡Œçš„ç¨‹åºå’Œå‘½ä»¤ï¼Œå¸¸è§çš„æœ‰ï¼š\r\n\r\n- `cd` æ”¹å˜ç›®å½•\r\n- `ls` åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•\r\n- `mv` å’Œ `cp` ç§»åŠ¨å’Œå¤åˆ¶æ–‡ä»¶\r\n\r\nä½†æ˜¯ Shell å…è®¸ä½ åšæ›´å¤šçš„äº‹æƒ…ï¼›ä½ å¯ä»¥è°ƒç”¨è®¡ç®—æœºä¸Šçš„ä»»ä½•ç¨‹åºï¼Œå¹¶ä¸”å‘½ä»¤è¡Œå·¥å…·çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†å®Œæˆä½ å¯èƒ½æƒ³åšçš„ä»»ä½•äº‹æƒ…ã€‚å®ƒä»¬å¾€å¾€æ¯”å®ƒä»¬çš„å›¾å½¢ç•Œé¢å¯¹æ‰‹æ›´æœ‰æ•ˆç‡ã€‚æˆ‘ä»¬è¿™é—¨è¯¾ä¼šè®²åˆ°å¾ˆå¤šã€‚\r\n\r\nShell æä¾›äº¤äº’å¼ç¼–ç¨‹è¯­è¨€\"è„šæœ¬\"ã€‚æœ‰å¾ˆå¤šç§ Shellï¼š\r\n\r\n- ä½ å¯èƒ½ç”¨è¿‡ `sh` æˆ–è€… `bash`\r\n- å’Œè¯­è¨€ç›¸å…³çš„ Shellï¼š`csh`\r\n- æˆ–è€…æ›´å¥½ç”¨çš„ Shellï¼š`fish`ã€`zsh`ã€`ksh`\r\n\r\nåœ¨è¿™ä¸ªè¯¾å ‚ä¸Šï¼Œæˆ‘ä»¬å°†å…³æ³¨æ— å¤„ä¸åœ¨çš„ `sh` å’Œ `bash`ï¼Œä½†æ˜¯ä½¿ç”¨å…¶ä»–çš„ Shell æ„Ÿè§‰æ›´å¥½ã€‚æˆ‘å–œæ¬¢ `fish`ã€‚\r\n\r\nåœ¨ä½ çš„å·¥å…·ç®±ä¸­ï¼ŒShell ç¨‹åºæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚å¯ä»¥ç›´æ¥åœ¨æç¤ºç¬¦ä¸‹ç¼–å†™ç¨‹åºï¼Œä¹Ÿå¯ä»¥å°†ç¨‹åºå†™å…¥æ–‡ä»¶ã€‚\r\n\r\né€šè¿‡ `#!/bin/sh` + `chmod +x` å°† Shell ç¨‹åºå˜æˆå¯ä»¥æ‰§è¡Œçš„ã€‚\r\n\r\n## ä½¿ç”¨ Shell å·¥ä½œ\r\n\r\nå°†ä¸€ä¸ªå‘½ä»¤è¿è¡Œå¤šæ¬¡ï¼š\r\n\r\n```bash\r\nfor i in $(seq 1 5); do echo hello; done\r\n```\r\n\r\næœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥å±•å¼€æ¥è®²ï¼š\r\n\r\n- `for x in list; do BODY; done`\r\n  - `;` ç»ˆæ­¢ä¸€ä¸ªå‘½ä»¤ -- ç›¸å½“äºæ¢è¡Œ\r\n  - éå† `list`ï¼Œå°†æ¯ä¸ªå€¼èµ‹å€¼ç»™ `x`ï¼Œç„¶åè¿è¡Œ\r\n  - åˆ†å‰²æ ‡å¿—ç¬¦æ˜¯\"ç©ºæ ¼\"ï¼Œæˆ‘ä»¬ç¨åä¼šè®²åˆ°\r\n  - Shell ä¸­æ²¡æœ‰èŠ±æ‹¬å·ï¼Œæ‰€ä»¥ä½¿ç”¨ `do` + `done`\r\n- `$(seq 1 5)`\r\n\r\n  - è¿è¡Œ `seq` å‘½ä»¤ï¼Œå‚æ•°åˆ†åˆ«ä¸º 1 å’Œ 5\r\n  - ä½¿ç”¨æ‹¬å·å†…å‘½ä»¤çš„è¾“å‡ºæ›¿æ¢ `$()`\r\n  - ç›¸å½“äº\r\n\r\n    ```bash\r\n    for i in 1 2 3 4 5\r\n    ```\r\n\r\n- `echo hello`\r\n  - Shell è„šæœ¬ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å‘½ä»¤\r\n  - åœ¨æœ¬ä¾‹ä¸­ï¼Œè¿è¡Œ `echo` å‘½ä»¤ï¼Œå°†æ‰“å°è¯¥å‘½ä»¤çš„å‚æ•° `hello`\r\n  - æ‰€æœ‰å‘½ä»¤éƒ½å¯ä»¥åœ¨ `$PATH` æœç´¢åˆ°\r\n\r\næˆ‘ä»¬å¯ä»¥ä¸¾ä¸ªä¾‹å­ï¼š\r\n\r\n```bash\r\nfor f in $(ls); do echo $f; done\r\n```\r\n\r\nå°†æ‰“å°å½“å‰ç›®å½•ä¸­çš„æ¯ä¸ªæ–‡ä»¶åã€‚å¯ä»¥ä½¿ç”¨ `=` è®¾ç½®å˜é‡çš„å€¼ï¼ˆ`=` ä¸¤è¾¹ä¸éœ€è¦ç©ºæ ¼ï¼‰\r\n\r\n```bash\r\nfoo=bar\r\necho $foo\r\n```\r\n\r\nè¿™é‡Œä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šçš„å˜é‡ï¼š\r\n\r\n- `$1` - `$9`ï¼šè„šæœ¬çš„å‚æ•°\r\n- `$0`ï¼šè„šæœ¬çš„åç§°\r\n- `$#`ï¼šè„šæœ¬çš„å‚æ•°ä¸ªæ•°\r\n- `$$`ï¼šå½“å‰è„šæœ¬çš„è¿›ç¨‹ ID\r\n\r\nåªæ‰“å°ç›®å½•ï¼š\r\n\r\n```bash\r\nfor f in $(ls); do if test -d $f; then echo dir $f; fi; done\r\n```\r\n\r\nè¿™é‡Œå±•å¼€æ¥è®²ï¼š\r\n\r\n- `if CONDITION; then BODY; fi`\r\n\r\n  - `CONDITION` æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œå¦‚æœè¿”å›æ—¶ä¸º 0ï¼ˆ`success`ï¼‰ï¼Œå°±ä¼šæ‰§è¡Œ `BODY`\r\n  - ä¹Ÿå¯ä»¥ç»§ç»­æ‰§è¡Œ `else` æˆ–è€… `elif`\r\n  - åŒæ ·ï¼Œæ²¡æœ‰èŠ±æ‹¬å·ï¼Œæ‰€ä»¥ä½¿ç”¨ `then` å’Œ `fi`\r\n\r\n- `test` æ˜¯å¦å¤–ä¸€ä¸ªå‘½ä»¤ï¼Œæä¾›å„å¼å„æ ·çš„æ£€æŸ¥ä¸å¯¹æ¯”åŠŸèƒ½ï¼Œé€€å‡ºæ—¶ä¼šè¿”å›å¯¹æ¯”ç»“æœï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™è¿”å› 0ï¼ˆ`$?`ï¼‰\r\n\r\n  - `man COMMAND` ä¼šå¯¹ä½ æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œæ¯”å¦‚ï¼š`man test`\r\n  - ä¹Ÿå¯ä»¥ä½¿ç”¨ `[` + `]` æ‰§è¡Œï¼Œæ¯”å¦‚ï¼š`[ -d $f ]`\r\n    - æŸ¥çœ‹ä¸€ä¸‹ `man test` å’Œ `which [` çš„æ‰§è¡Œç»“æœ\r\n\r\nå¯æ˜¯ç­‰ç­‰ï¼ç»“æœæ˜¯é”™è¯¯çš„ï¼å¦‚æœæœ‰ä¸ªæ–‡ä»¶å«åš\"æˆ‘çš„æ–‡æ¡£æ€ä¹ˆåŠ\"ï¼Ÿ\r\n\r\n- `for f in $(ls)` å±•å¼€ä¸º `for f in My Documents`\r\n- å…ˆä»¥ `My` ä¸º `test` çš„æ‰§è¡Œå‚æ•°ï¼Œç„¶åä»¥ `Documents` ä½œä¸ºå‚æ•°\r\n- è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼\r\n- Shell è„šæœ¬ä¸­å¯¼è‡´å‡ºç°é—®é¢˜æœ€å¤šçš„åŸå› \r\n\r\n## å‚æ•°åˆ†å‰²\r\n\r\nBash æ˜¯é€šè¿‡ç©ºæ ¼åˆ†å‰²å‚æ•°ï¼›ä½†è¿™å¹¶ä¸æ€»æ˜¯ä½ æƒ³è¦çš„ï¼\r\n\r\n- éœ€è¦ä½¿ç”¨å¼•å·å¤„ç† `for f in \"My Documents\"` ä¸­ `f` çš„ç©ºæ ¼ï¼Œæ‰èƒ½æ­£ç¡®åœ°æ‰§è¡Œ\r\n- å…¶ä»–åœ°æ–¹ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ï¼Œä½ çœ‹åˆ°è¿‡å—ï¼Ÿæ¯”å¦‚ `test -d $f`ï¼šå¦‚æœ `$f` ä¸­åŒ…å«ç©ºæ ¼ï¼Œ`test` å°†ä¼šå‘ç”Ÿé”™è¯¯ï¼\r\n- `echo` ç¢°å·§æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºæŒ‰ç©ºæ ¼åˆ†éš”è¿æ¥ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶ååŒ…å«æ¢è¡Œç¬¦ï¼Œæ€ä¹ˆåŠï¼Ÿå˜æˆç©ºæ ¼ï¼\r\n- å¼•å·ç”¨äºæ‰€æœ‰ä¸å¸Œæœ›è¢«æ‹†åˆ†çš„å‚æ•°\r\n- æˆ‘ä»¬è¯¥å¦‚ä½•ä¿®å¤ä¸Šé¢çš„è„šæœ¬å‘¢ï¼Ÿä½ è®¤ä¸º `for f in \"$(ls)\"` æ€ä¹ˆæ ·ï¼Ÿ\r\n\r\nç­”æ¡ˆæ˜¯é€šé…ç¬¦ï¼\r\n\r\n- Bash çŸ¥é“å¦‚ä½•ä½¿ç”¨æ¨¡æ¿æŸ¥æ‰¾æ–‡ä»¶\r\n\r\n  - `*` ä»»æ„å­—ç¬¦ä¸²\r\n  - `?` ä»»æ„å­—ç¬¦\r\n  - `{a,b,c}` è¿™äº›å­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ª\r\n\r\n- `for f in *`ï¼šè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶\r\n\r\n- åœ¨ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œæ¯ä¸ªåŒ¹é…çš„æ–‡ä»¶éƒ½å°†å˜æˆè‡ªå·±çš„å‚æ•°\r\n\r\n  - åœ¨ä½¿ç”¨æ—¶ï¼Œä»éœ€è¦ç¡®ä¿å¼•å·çš„æ­£ç¡®ä½¿ç”¨ï¼š`test -d \"$f\"`\r\n\r\n- å¯ä»¥ä½¿ç”¨è¿™äº›æé«˜é€šé…ç¬¦æ•ˆç‡\r\n\r\n  - `for f in a*`ï¼šå½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰€æœ‰ä»¥ `a` å¼€å¤´çš„æ–‡ä»¶\r\n  - `for f in foo/*.txt`ï¼š`foo` æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰€æœ‰ä»¥ `.txt` ç»“å°¾çš„æ–‡ä»¶\r\n  - `for f in foo/*/p??.txt`ï¼šåœ¨ `foo` çš„å­æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥ `p` å¼€å¤´çš„ä¸‰ä¸ªå­—æ¯çš„æ–‡ä»¶\r\n\r\nç©ºæ ¼çš„é—®é¢˜ä¸æ­¢äºæ­¤ï¼š\r\n\r\n- `if [ $foo = \"bar\" ]; then` -- çœ‹çœ‹è¿™ä¸ªé—®é¢˜ï¼Ÿ\r\n- å¦‚æœ `$foo` æ˜¯ç©ºçš„å‘¢ï¼Ÿ`[` çš„å‚æ•°æ˜¯ `=` å’Œ `bar`...\r\n- å¯ä»¥ç”¨ `[ x$foo = \"xbar\" ]` æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ•ˆç‡ä½\r\n- ç›¸åï¼Œä½¿ç”¨ `[[`ï¼šä¸€ä¸ª Bash å†…ç½®çš„å…·æœ‰ç‰¹æ®Šè§£æçš„æ¯”è¾ƒå™¨\r\n\r\n  - ä¹Ÿå¯ä»¥ä½¿ç”¨ `&&` ä»£æ›¿ `-a`ï¼Œ`-o` è¿æ¥ `||` ç­‰ç­‰\r\n\r\n## å¯ç»„åˆæ€§\r\n\r\nShell ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œéƒ¨åˆ†åŸå› åœ¨äºå®ƒçš„å¯ç»„åˆæ€§ã€‚å¯ä»¥å°†å¤šä¸ªç¨‹åºé“¾æ¥åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯è®©ä¸€ä¸ªç¨‹åºåšæ¯ä¸€ä»¶äº‹æƒ…ã€‚\r\n\r\nå…³é”®å­—æ˜¯ `|`ã€‚\r\n\r\n`a|b` è¡¨ç¤ºåŒæ—¶è¿è¡Œ `a` å’Œ `b`ï¼Œå°† `a` çš„æ‰€æœ‰è¾“å‡ºï¼Œå½“ä½œ `b` çš„è¾“å…¥ï¼Œæ‰“å° `b` çš„è¾“å‡ºã€‚\r\n\r\nä½ å¯åŠ¨çš„æ‰€æœ‰ç¨‹åºï¼ˆ\"è¿›ç¨‹\"ï¼‰éƒ½æœ‰ä¸‰ä¸ª\"æµ\"ï¼š\r\n\r\n- `STDIN`ï¼šå½“ç¨‹åºè¯»å–è¾“å…¥æ—¶ï¼Œå®ƒä»è¿™é‡Œå¼€å§‹\r\n- `STDOUT`ï¼šå½“ç¨‹åºæ‰“å°ä¸œè¥¿æ—¶ï¼Œå®ƒå°±åœ¨è¿™é‡Œ\r\n- `STDERR`ï¼šç¨‹åºå¯ä»¥é€‰æ‹©ä½¿ç”¨çš„ç¬¬äºŒä¸ªè¾“å‡º\r\n- é»˜è®¤çš„ï¼Œ`STDIN` æ˜¯ä½ çš„é”®ç›˜è¾“å…¥ï¼Œ`STDOUT` å’Œ `STDERR` éƒ½æ˜¯ä½ çš„ç»ˆç«¯ã€‚ä½†æ˜¯ä½ å¯ä»¥æ”¹å˜å®ƒä»¬ï¼\r\n\r\n  - `a | b` å°† `a` çš„è¾“å‡ºå½“ä½œ `b` çš„è¾“å…¥\r\n  - åŒæ ·è¿˜æœ‰\r\n\r\n    - `a > foo`ï¼ˆå°† `a` çš„æ ‡å‡†è¾“å‡ºå†™å…¥ `foo` æ–‡ä»¶ï¼‰\r\n    - `a 2> foo`ï¼ˆå°† `a` çš„æ ‡å‡†é”™è¯¯è¾“å‡ºå†™å…¥ `foo` æ–‡ä»¶ï¼‰\r\n    - `a < foo`ï¼ˆ`a` çš„æ ‡å‡†è¾“å…¥æ˜¯ä» `foo` æ–‡ä»¶è¯»å–çš„ï¼‰\r\n    - æç¤ºï¼š`tail -f` å°†æ‰“å°æ–‡ä»¶å†…å®¹ï¼Œå³ä½¿å®ƒæ­£åœ¨è¢«å†™å…¥\r\n\r\nä¸ºä»€ä¹ˆè¿™ä¸ªè¿™ä¹ˆæœ‰ç”¨ï¼Ÿä½ äº²è‡ªè¯•è¯•ä¸‹é¢ç¨‹åºçš„è¾“å‡ºï¼\r\n\r\n- `ls | grep foo`ï¼šåŒ…å«å•è¯ `foo` çš„æ‰€æœ‰æ–‡ä»¶\r\n- `ps | grep foo`ï¼šåŒ…å«å•è¯ `foo` çš„æ‰€æœ‰è¿›ç¨‹\r\n- `journalctl | grep -i intel | tail -n5`ï¼šæœ€å 5 æ¡å¸¦æœ‰ Intelï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰çš„ç³»ç»Ÿæ—¥å¿—æ¶ˆæ¯\r\n- `who | sendmail -t me@example.com`ï¼šå°†ç™»å½•ç”¨æˆ·åˆ—è¡¨å‘é€åˆ° `me@example.com`\r\n- å½¢æˆäº†è®¸å¤šæ•°æ®å¤„ç†çš„åŸºç¡€ï¼Œç¨åæˆ‘ä»¬å°†è®¨è®ºå®ƒ\r\n\r\nBash è¿˜æä¾›äº†è®¸å¤šå…¶ä»–ç¼–å†™ç¨‹åºçš„æ–¹æ³•ã€‚\r\n\r\nä½ å¯ä»¥ç»„åˆå½¢æˆä¸€ä¸ªå‘½ä»¤ `(a; b) | tac`ï¼šå…ˆè¿è¡Œ `a`ï¼Œç„¶åè¿è¡Œ `b`ï¼Œç„¶åæŠŠå®ƒä»¬çš„æ‰€æœ‰è¾“å‡ºå½“ä½œ `tac` å‘½ä»¤çš„è¾“å…¥ï¼Œ`tac` æ˜¯ä¸€ä¸ªå°†è¾“å…¥ååºçš„å‘½ä»¤ã€‚\r\n\r\nä¸€ä¸ªä¸å¤ªä¸ºäººæ‰€çŸ¥ä½†è¶…çº§æœ‰ç”¨çš„æ–¹æ³•æ˜¯è¿‡ç¨‹æ›¿æ¢ã€‚`b <(a)` å°†è¿è¡Œ aï¼Œä¸ºè¾“å‡ºæµç”Ÿæˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶åï¼Œå¹¶å°†è¯¥æ–‡ä»¶åä¼ é€’ç»™ bã€‚ä¸¾ä¸ªä¾‹å­ï¼š\r\n\r\n```bash\r\ndiff <(journalctl -b -1 | head -n20) <(journalctl -b -2 | head -n20)\r\n```\r\n\r\nå°†å‘ä½ å±•ç¤ºå‰ä¸€ä¸ªå¼•å¯¼æ—¥å¿—çš„å‰ 20 è¡Œä¸æ›´å‰ä¸€ä¸ªå¼•å¯¼æ—¥å¿—çš„å‰ 20 è¡Œä¹‹é—´çš„åŒºåˆ«ã€‚\r\n\r\n## ä»»åŠ¡å’Œè¿›ç¨‹æ§åˆ¶\r\n\r\nå¦‚æœä½ åœ¨åå°æ‰§è¡Œå‘¨æœŸæ›´é•¿çš„ä»»åŠ¡å‘¢ï¼Ÿ\r\n\r\n- åœ¨åå°è¿è¡Œçš„ç¨‹åºæ˜¯ä»¥ `&` ç»“å°¾\r\n\r\n  - å®ƒä¼šç«‹å³ç»™ä½ æç¤º\r\n  - å¦‚æœä½ æƒ³åŒæ—¶è¿è¡Œä¸¤ä¸ªç¨‹åºï¼Œæ¯”å¦‚æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œè¿™å¾ˆå¥½è§£å†³ï¼š`server & client`\r\n  - æ³¨æ„ï¼šæ­£åœ¨è¿è¡Œçš„ç¨‹åºä»å°†ç»ˆç«¯è®¾ç½®ä¸ºæ ‡å‡†è¾“å‡ºï¼Œè¯•ä¸€è¯•ï¼š`server > server.log & client`\r\n\r\n- é€šè¿‡ `jobs` æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹\r\n\r\n  - æ³¨æ„æ˜¾ç¤º `Running` çš„\r\n\r\n- ä½¿ç”¨ `fg %JOB` å°†å…¶æ”¾åˆ°å‰å°ï¼ˆæ²¡æœ‰å‚æ•°æ˜¯æœ€æ–°çš„ï¼‰\r\n- å¦‚æœä½ æƒ³å°†å½“å‰çš„ç¨‹åºæ”¾å…¥åå°ï¼š`^Z` + `bg`ï¼ˆè¿™é‡Œçš„ `^Z` ä»£è¡¨æŒ‰ `Ctrl+Z`ï¼‰\r\n\r\n  - `^Z` å°†å½“å‰çš„è¿›ç¨‹åœæ­¢ï¼Œå¹¶å°†å®ƒå˜æˆä¸€ä¸ª `job`\r\n  - `bg` å°†æœ€æ–°çš„ `job` åœ¨åå°è¿è¡Œï¼ˆå°±åƒä½¿ç”¨äº† `&`ï¼‰\r\n\r\n- åå° `jobs` ä»ç„¶ç»‘å®šåˆ°å½“å‰ä¼šè¯ï¼Œå¦‚æœæ³¨é”€ï¼Œåˆ™é€€å‡ºã€‚ä½ å¯ä»¥ä½¿ç”¨ `disown` æˆ–è€… `nohup` åˆ‡æ–­è¿™ç§ç»‘å®šå…³ç³»ã€‚\r\n- `$!` æ˜¯æœ€åä¸€ä¸ªåå°è¿›ç¨‹çš„ PID\r\n\r\nåœ¨ä½ çš„ç”µè„‘ä¸Šè¿è¡Œçš„å…¶ä»–ä¸œè¥¿å‘¢ï¼Ÿ\r\n\r\n- `ps` å¾ˆå¥½ç”¨ï¼šåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹\r\n\r\n  - `ps -A`ï¼šæ‰“å°æ‰€æœ‰ç”¨æˆ·çš„è¿›ç¨‹ï¼ˆä¹ŸåŒ…æ‹¬ `ps ax`ï¼‰\r\n  - `ps` æœ‰å¾ˆå¤šå‚æ•°ï¼šå¯ä»¥é€šè¿‡ `man ps` æŸ¥çœ‹\r\n\r\n- `pgrep`ï¼šæœç´¢è¿›ç¨‹ï¼ˆå’Œ `ps -A | grep` ç±»ä¼¼ï¼‰\r\n\r\n  - `pgrep -af`ï¼šé€šè¿‡å‚æ•°æœç´¢å’Œæ˜¾ç¤º\r\n\r\n- `kill`ï¼šé€šè¿‡ ID å‘è¿›ç¨‹å‘é€ä¿¡å·ï¼ˆ`pkill` by search + `-f`ï¼‰\r\n\r\n  - ä¿¡å·å‘Šè¯‰è¿›ç¨‹\"åšä»€ä¹ˆäº‹\"\r\n  - æœ€å¸¸è§ï¼š`SIGKILL`ï¼ˆ`-9` æˆ– `-KILL`ï¼‰ï¼šç«‹åˆ»é€€å‡ºï¼Œç›¸å½“äº `^`\r\n  - è¿˜æœ‰ï¼š`SIGTERM`ï¼ˆ`-15` æˆ– `-TERM`ï¼‰ï¼šç«‹åˆ»ä¼˜é›…åœ°é€€å‡ºï¼Œç›¸å½“äº `^C`\r\n\r\n## æ ‡å¿—ç¬¦\r\n\r\nå¤§å¤šæ•°å‘½ä»¤è¡Œç¨‹åºéƒ½ä½¿ç”¨**æ ‡å¿—ç¬¦**æ¥å—å‚æ•°ã€‚æ ‡å¿—ç¬¦é€šå¸¸æœ‰çŸ­å½¢å¼ï¼ˆ`-h`ï¼‰å’Œé•¿å½¢å¼ï¼ˆ`--help`ï¼‰ã€‚é€šå¸¸è¿è¡Œ `CMD -h` æˆ– `man CMD` ä¼šç»™ä½ å±•ç¤ºè¯¥ `CMD` å¯ç”¨çš„æ ‡è¯†ç¬¦çš„åˆ—è¡¨ã€‚çŸ­æ ‡å¿—é€šå¸¸å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œè¿è¡Œ `rm -r -f` ç›¸å½“äºè¿è¡Œ `rm -rf` æˆ–è€… `rm -fr`ã€‚ä¸€äº›å¸¸è§çš„æ ‡è¯†ç¬¦æ˜¯æœ‰çº¦å®šä¿—æˆçš„æ ‡å‡†çš„ï¼Œä½ ä¼šå‘ç°å®ƒä»¬åœ¨å¾ˆå¤šå‘½ä»¤ä¸­ï¼š\r\n\r\n- `-a` ä¸€èˆ¬æŒ‡æ‰€æœ‰æ–‡ä»¶ï¼ˆä¹ŸåŒ…æ‹¬é‚£äº›ä»¥ç‚¹å¼€å¤´çš„ï¼‰\r\n- `-f` é€šå¸¸æŒ‡å¼ºåˆ¶åšä»€ä¹ˆäº‹æƒ…ï¼Œæ¯”å¦‚è¯´ `rm -f`\r\n- `-h` å¤§å¤šæ•°å‘½ä»¤éƒ½æ˜¯æ˜¾ç¤ºå¸®åŠ©\r\n- `-v` é€šå¸¸å¯ç”¨è¯¦ç»†è¾“å‡º\r\n- `-V` é€šå¸¸æ‰“å°å‘½ä»¤çš„ç‰ˆæœ¬\r\n\r\næ­¤å¤–ï¼ŒåŒç ´æŠ˜å· `--` ç”¨äºå†…ç½®å‘½ä»¤å’Œè®¸å¤šå…¶ä»–å‘½ä»¤ä¸­ï¼Œè¡¨ç¤ºå‘½ä»¤é€‰é¡¹çš„ç»“æŸï¼Œä¹‹ååªæ¥å—ä½ç½®å‚æ•°ã€‚å› æ­¤ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå¯ä»¥ä½¿ç”¨ `-v` å‚æ•°çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶ç±»å‹æ”¯æŒä½¿ç”¨ï¼‰ï¼Œå¹¶ä¸”æƒ³è¦ `grep` å®ƒï¼Œ`grep pattern -- -v` å¯ä»¥ï¼Œä½†æ˜¯ `grep pattern -v` ä¸è¡Œã€‚äº‹å®ä¸Šï¼Œåˆ›å»ºè¿™ç§æ–‡ä»¶çš„æ–¹æ³•æ˜¯ `touch -- -v`ã€‚\r\n",
    "number": 28,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4wxdhw",
          "name": "shell",
          "url": "https://github.com/onnttf/blog/labels/shell"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2023-02-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:53:43Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/28",
    "jsonFilePath": "discussions/28-D_kwDONzrbkM4AeNb-.json",
    "markdownFilePath": "2023/2/28-D_kwDONzrbkM4AeNb-.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNb4",
    "title": "Go Modulesï¼šè½»æ¾æå®š Go é¡¹ç›®ä¾èµ–ç®¡ç†",
    "body": "åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä¾èµ–ç®¡ç†æ˜¯ä¸€ä¸ªæ£˜æ‰‹ä¸”å…³é”®çš„ä»»åŠ¡ï¼Œæ¶‰åŠç‰ˆæœ¬å…¼å®¹ã€åŒ…å†²çªå’Œå¤æ‚ä¾èµ–å…³ç³»çš„åè°ƒç­‰å·¥ä½œã€‚ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹ï¼ŒGo è¯­è¨€å›¢é˜Ÿåœ¨ `Go 1.11` ç‰ˆæœ¬ä¸­å¼•å…¥äº†åŒ…ç®¡ç†å·¥å…· Go Modulesï¼Œå®ƒä¸º Go ç”Ÿæ€ç³»ç»Ÿå¸¦æ¥äº†ä¸€ä¸ªå¼ºå¤§è€Œä¼˜é›…çš„ä¾èµ–ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚\r\n\r\n## Go Modules æ˜¯ä»€ä¹ˆ\r\n\r\nGo Modules æ˜¯ Go è¯­è¨€å®˜æ–¹æ¨å‡ºçš„ä¾èµ–ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå®ƒå½»åº•æ‘†è„±äº†å¯¹ `GOPATH` çš„ä¾èµ–ï¼Œä¸º Go é¡¹ç›®å¸¦æ¥äº†å…¨æ–°çš„åŒ…ç®¡ç†ä½“éªŒã€‚è¿™ä¸ªå¼ºå¤§çš„å·¥å…·äº `Go 1.11` ç‰ˆæœ¬é¦–æ¬¡å¼•å…¥ï¼Œå¹¶åœ¨ `Go 1.13` ç‰ˆæœ¬æˆä¸ºé»˜è®¤çš„ä¾èµ–ç®¡ç†æ–¹å¼ã€‚\r\n\r\nGo Modules çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š\r\n\r\n1. **æ™ºèƒ½åŒ–ä¾èµ–ç®¡ç†**ï¼š\r\n\r\n   - è‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°ä¾èµ–\r\n   - è‡ªåŠ¨è§£å†³ä¾èµ–å†²çª\r\n   - æ”¯æŒå¤šç‰ˆæœ¬ä¾èµ–å…±å­˜\r\n\r\n2. **é¡¹ç›®ç»“æ„çµæ´»**ï¼š\r\n\r\n   - ä¸å†å—é™äº `$GOPATH/src` ç›®å½•\r\n   - å¯ä»¥åœ¨ä»»æ„ä½ç½®åˆ›å»ºå’Œç®¡ç†é¡¹ç›®\r\n   - æ›´ç¬¦åˆç°ä»£å¼€å‘å·¥ä½œæµ\r\n\r\n3. **ä¾èµ–è¿½è¸ªé€æ˜**ï¼š\r\n\r\n   - ä½¿ç”¨ `go.mod` æ–‡ä»¶æ¸…æ™°è®°å½•æ‰€æœ‰ä¾èµ–\r\n   - æ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶\r\n   - ä¾èµ–å…³ç³»ä¸€ç›®äº†ç„¶\r\n\r\n4. **ç‰ˆæœ¬ç®¡ç†å¯é **ï¼š\r\n\r\n   - ç²¾ç¡®é”å®šä¾èµ–ç‰ˆæœ¬\r\n   - ç¡®ä¿æ„å»ºçš„å¯é‡ç°æ€§\r\n   - æ–¹ä¾¿å›æ»šåˆ°ç‰¹å®šç‰ˆæœ¬\r\n\r\n5. **ç”Ÿæ€ç³»ç»Ÿå‹å¥½**ï¼š\r\n\r\n   - å®Œæ•´çš„æ¨¡å—ä»£ç†æœºåˆ¶\r\n   - ç§æœ‰æ¨¡å—æ”¯æŒ\r\n   - ä¸ä¸»æµä»£ç æ‰˜ç®¡å¹³å°æ— ç¼é›†æˆ\r\n\r\n## Go Modules å®è·µ\r\n\r\nè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹é¡¹ç›®æ¥å­¦ä¹  Go Modules çš„ä½¿ç”¨ã€‚æœ¬å®è·µå°†åŒ…å«åˆ›å»ºåŸºç¡€åº“ã€ä½¿ç”¨ä¾èµ–ä»¥åŠå‘å¸ƒæ¨¡å—çš„å®Œæ•´æµç¨‹ã€‚\r\n\r\n### åˆ›å»ºåŸºç¡€åº“\r\n\r\né¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º `greetings` çš„åŸºç¡€åº“æ¨¡å—ã€‚\r\n\r\n1. åˆ›å»ºå¹¶åˆå§‹åŒ–æ¨¡å—\r\n\r\n   ```bash\r\n   # åˆ›å»ºå¹¶è¿›å…¥é¡¹ç›®ç›®å½•\r\n   $ mkdir greetings && cd greetings\r\n\r\n   # åˆå§‹åŒ– Go æ¨¡å—\r\n   $ go mod init github.com/onnttf/greetings\r\n   go: creating new go.mod: module github.com/onnttf/greetings\r\n\r\n   # æŸ¥çœ‹ç”Ÿæˆçš„ go.mod æ–‡ä»¶\r\n   $ cat go.mod\r\n   module github.com/onnttf/greetings\r\n\r\n   go 1.22.6\r\n   ```\r\n\r\n   **è¯´æ˜**: `go mod init` å‘½ä»¤ä¼šç”Ÿæˆ `go.mod` æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æ¨¡å—åç§°å’Œ Go ç‰ˆæœ¬ä¿¡æ¯ï¼Œç”¨äºç®¡ç†ä¾èµ–å…³ç³»ã€‚\r\n\r\n2. ç¼–å†™åŠŸèƒ½ä»£ç \r\n\r\n   åˆ›å»º `greetings.go` æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š\r\n\r\n   ```go\r\n   package greetings\r\n\r\n   import \"fmt\"\r\n\r\n   // Hello returns a greeting for the named person.\r\n   func Hello(name string) string {\r\n       message := fmt.Sprintf(\"Hi, %v. Welcome!\", name)\r\n       return message\r\n   }\r\n   ```\r\n\r\n### åˆ›å»ºä¸»é¡¹ç›®\r\n\r\næ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®æ¥ä½¿ç”¨æˆ‘ä»¬çš„ `greetings` æ¨¡å—ã€‚\r\n\r\n1. åˆå§‹åŒ–é¡¹ç›®ç»“æ„\r\n\r\n   ```bash\r\n   $ cd ..\r\n   # åˆ›å»ºå¹¶è¿›å…¥é¡¹ç›®ç›®å½•\r\n   $ mkdir hello && cd hello\r\n   # åˆå§‹åŒ–æ–°æ¨¡å—\r\n   $ go mod init github.com/onnttf/hello\r\n   go: creating new go.mod: module github.com/onnttf/hello\r\n   ```\r\n\r\n2. åˆ›å»ºä¸»ç¨‹åº\r\n\r\n   ç¼–å†™ `hello.go` æ–‡ä»¶ï¼š\r\n\r\n   ```go\r\n   package main\r\n\r\n   import (\r\n       \"fmt\"\r\n       \"github.com/onnttf/greetings\"  // å¯¼å…¥æˆ‘ä»¬çš„ greetings æ¨¡å—\r\n   )\r\n\r\n   func main() {\r\n       message := greetings.Hello(\"Mike\")\r\n       fmt.Println(message)\r\n   }\r\n   ```\r\n\r\n3. é…ç½®æœ¬åœ°ä¾èµ–\r\n\r\n   ç”±äº greetings æ¨¡å—è¿˜æœªå‘å¸ƒï¼Œæˆ‘ä»¬éœ€è¦å…ˆé…ç½®æœ¬åœ°ä¾èµ–ï¼š\r\n\r\n   ```bash\r\n   # å°†æ¨¡å—æŒ‡å‘æœ¬åœ°è·¯å¾„\r\n   $ go mod edit -replace github.com/onnttf/greetings=../greetings\r\n\r\n   # æ›´æ–°ä¾èµ–å…³ç³»\r\n   $ go mod tidy\r\n   ```\r\n\r\n   æ­¤æ—¶ `go.mod` æ–‡ä»¶åº”è¯¥åŒ…å«ï¼š\r\n\r\n   ```go\r\n   module github.com/onnttf/hello\r\n\r\n   go 1.22.6\r\n\r\n   replace github.com/onnttf/greetings => ../greetings\r\n   require github.com/onnttf/greetings v0.0.0-00010101000000-000000000000\r\n   ```\r\n\r\n4. è¿è¡Œç¨‹åº\r\n\r\n   ```bash\r\n   $ go run hello.go\r\n   Hi, Mike. Welcome!\r\n   ```\r\n\r\n### å‘å¸ƒæ¨¡å—\r\n\r\nè¦è®©å…¶ä»–å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨æˆ‘ä»¬çš„æ¨¡å—ï¼Œéœ€è¦å°†å…¶å‘å¸ƒåˆ°ä»£ç æ‰˜ç®¡å¹³å°ï¼Œå¦‚ GitHubã€GitLab ç­‰ã€‚\r\n\r\n1. åˆå§‹åŒ– Git ä»“åº“\r\n\r\n   ```bash\r\n   cd ../greetings/\r\n   git init\r\n   git add .\r\n   git commit -m \"feat: åˆå§‹åŒ– greetings æ¨¡å—\"\r\n   ```\r\n\r\n2. æ¨é€åˆ°è¿œç¨‹ä»“åº“\r\n\r\n   ```bash\r\n   git branch -M main\r\n   git remote add origin git@github.com:onnttf/greetings.git\r\n   git push -u origin main\r\n   ```\r\n\r\n3. åˆ›å»ºå‘å¸ƒç‰ˆæœ¬\r\n\r\n   ```bash\r\n   # åˆ›å»ºå¹¶æ¨é€æ ‡ç­¾\r\n   git tag v0.1.0\r\n   git push origin v0.1.0\r\n\r\n   # æ›´æ–°æ¨¡å—ç´¢å¼•\r\n   $ GOPROXY=proxy.golang.org go list -m github.com/onnttf/greetings@v0.1.0\r\n   ```\r\n\r\nå®Œæˆå‘å¸ƒï¼ç°åœ¨å…¶ä»–å¼€å‘è€…å¯ä»¥é€šè¿‡ `go get github.com/onnttf/greetings` æ¥ä½¿ç”¨è¿™ä¸ªæ¨¡å—äº†ï¼Œæ¨¡å—ä¿¡æ¯ä¹Ÿå¯ä»¥åœ¨ [pkg.go.dev](https://pkg.go.dev/) ä¸ŠæŸ¥çœ‹ã€‚\r\n\r\n## go mod æ˜¯ä»€ä¹ˆ\r\n\r\n`go mod` æ˜¯ Go è¯­è¨€ä¸­çš„ä¸€ç»„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç®¡ç† Go Modules çš„ä¾èµ–å…³ç³»ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§çš„å­å‘½ä»¤æ¥ç®€åŒ–æ¨¡å—ç®¡ç†å·¥ä½œã€‚\r\n\r\n```bash\r\nâ¯ go mod\r\nGo mod provides access to operations on modules.\r\n\r\nNote that support for modules is built into all the go commands,\r\nnot just 'go mod'. For example, day-to-day adding, removing, upgrading,\r\nand downgrading of dependencies should be done using 'go get'.\r\nSee 'go help modules' for an overview of module functionality.\r\n\r\nUsage:\r\n\r\n        go mod <command> [arguments]\r\n\r\nThe commands are:\r\n\r\n        download    download modules to local cache\r\n        edit        edit go.mod from tools or scripts\r\n        graph       print module requirement graph\r\n        init        initialize new module in current directory\r\n        tidy        add missing and remove unused modules\r\n        vendor      make vendored copy of dependencies\r\n        verify      verify dependencies have expected content\r\n        why         explain why packages or modules are needed\r\n\r\nUse \"go help mod <command>\" for more information about a command.\r\n```\r\n\r\n## go.mod æ–‡ä»¶è¯¦è§£\r\n\r\n`go.mod` æ˜¯æ¨¡å—çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†ï¼š\r\n\r\n1. **æ¨¡å—è·¯å¾„**ï¼šå”¯ä¸€æ ‡è¯†è¯¥æ¨¡å—çš„å¯¼å…¥è·¯å¾„\r\n2. **Go ç‰ˆæœ¬**ï¼šæ¨¡å—ä½¿ç”¨çš„ Go è¯­è¨€ç‰ˆæœ¬\r\n3. **ä¾èµ–å…³ç³»**ï¼š\r\n   - requireï¼šæŒ‡å®šç›´æ¥ä¾èµ–\r\n   - replaceï¼šæ›¿æ¢ä¾èµ–çš„ç‰ˆæœ¬æˆ–è·¯å¾„\r\n   - excludeï¼šæ’é™¤ç‰¹å®šç‰ˆæœ¬çš„ä¾èµ–\r\n\r\nç¤ºä¾‹ï¼š\r\n\r\n```go\r\nmodule example.com/mymodule\r\n\r\ngo 1.16\r\n\r\nrequire (\r\n    github.com/pkg/errors v0.9.1\r\n    golang.org/x/text v0.3.7\r\n)\r\n\r\nreplace example.com/old-module => example.com/new-module v1.0.0\r\n```\r\n\r\n## é…ç½®æ¨¡å—ä»£ç†\r\n\r\nç”±äºç½‘ç»œåŸå› ï¼Œç›´æ¥ä» `proxy.golang.org` ä¸‹è½½æ¨¡å—å¯èƒ½ä¼šå¤±è´¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®å›½å†…é•œåƒæ¥åŠ é€Ÿä¾èµ–ä¸‹è½½ï¼š\r\n\r\n```bash\r\n# å¼€å¯ Go modules\r\ngo env -w GO111MODULE=on\r\n\r\n# ä½¿ç”¨ä¸ƒç‰›äº‘çš„ä»£ç†æœåŠ¡å™¨\r\ngo env -w GOPROXY=https://goproxy.cn,direct\r\n\r\n# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘çš„ä»£ç†æœåŠ¡å™¨\r\ngo env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct\r\n```\r\n\r\né…ç½®åï¼ŒGo å·¥å…·é“¾ä¼šä¼˜å…ˆä»æŒ‡å®šçš„ä»£ç†æœåŠ¡å™¨ä¸‹è½½ä¾èµ–ã€‚\r\n\r\n## ç§æœ‰æ¨¡å—ç®¡ç†\r\n\r\nå¯¹äºä¼ä¸šå†…éƒ¨çš„ç§æœ‰æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦ï¼š\r\n\r\n1. é…ç½® GOPRIVATE ç¯å¢ƒå˜é‡è·³è¿‡å…¬å…±ä»£ç†\r\n\r\n   ```bash\r\n   # å•ä¸ªåŸŸå\r\n   go env -w GOPRIVATE=git.company.com\r\n\r\n   # å¤šä¸ªåŸŸå\r\n   go env -w GOPRIVATE=*.company.com,*.corp.example.com\r\n   ```\r\n\r\n2. é…ç½® git è®¤è¯ï¼ˆå¦‚æœéœ€è¦ï¼‰\r\n\r\n   ```bash\r\n   git config --global url.\"git@git.company.com:\".insteadOf \"https://git.company.com/\"\r\n   ```\r\n\r\nè¿™æ ·è®¾ç½®åï¼š\r\n\r\n- åŒ¹é… GOPRIVATE çš„æ¨¡å—å°†ç›´æ¥ä»æºä»“åº“æ‹‰å–\r\n- ç§æœ‰æ¨¡å—çš„ä¾èµ–è§£æä¸ç‰ˆæœ¬æ§åˆ¶æ›´åŠ å®‰å…¨å¯é \r\n- é¿å…äº†å†…éƒ¨ä»£ç æ³„éœ²çš„é£é™©\r\n\r\n## æœ€å\r\n\r\nGo Modules ä½œä¸º Go è¯­è¨€å®˜æ–¹æ¨å‡ºçš„ä¾èµ–ç®¡ç†æ–¹æ¡ˆã€‚å®ƒé€šè¿‡æ™ºèƒ½åŒ–çš„ç‰ˆæœ¬ç®¡ç†ã€æ¸…æ™°çš„ä¾èµ–è¿½è¸ªä»¥åŠçµæ´»çš„é¡¹ç›®ç»“æ„ï¼Œè®©ä¾èµ–ç®¡ç†å˜å¾—è½»æ¾è‡ªå¦‚ã€‚\r\n",
    "number": 26,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4wxDEQ",
          "name": "golang",
          "url": "https://github.com/onnttf/blog/labels/golang"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2022-02-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:52:01Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/26",
    "jsonFilePath": "discussions/26-D_kwDONzrbkM4AeNb4.json",
    "markdownFilePath": "2022/2/26-D_kwDONzrbkM4AeNb4.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNb7",
    "title": "ä¸€æ–‡äº†è§£ JWT",
    "body": "![image](https://file.onnttf.site/2022/10/09/1.jpg)\r\n\r\n`JWT`ï¼ˆJSON Web Tokenï¼‰æ˜¯ä¸€ç§åœ¨ç½‘ç»œå„æ–¹ä¹‹é—´å®‰å…¨ä¼ è¾“ä¿¡æ¯çš„ä»¤ç‰Œã€‚å®ƒé‡‡ç”¨ `JSON` å¯¹è±¡æ ¼å¼å­˜å‚¨ä¿¡æ¯ï¼Œå…·æœ‰ç®€æ´ã€å®‰å…¨å’Œæ˜“äºä½¿ç”¨çš„ç‰¹ç‚¹ã€‚\r\n\r\nä½œä¸ºä¸€ä¸ª[å¼€æ”¾æ ‡å‡†](https://www.rfc-editor.org/rfc/rfc7519)ï¼Œ`JWT` æä¾›äº†ä¸€ç§ç´§å‡‘ä¸”å¯é çš„æ–¹å¼æ¥ä¼ é€’ä¿¡æ¯ã€‚å…¶å·¥ä½œåŸç†æ˜¯ï¼šé¦–å…ˆå°†ä¿¡æ¯ç¼–ç ä¸º `JSON` å¯¹è±¡ï¼Œç„¶åå°†è¯¥å¯¹è±¡åµŒå…¥åˆ° `JSON Web Signature`ï¼ˆ`JWS`ï¼‰ç»“æ„ä¸­ä½œä¸ºæœ‰æ•ˆè½½è·ï¼Œæˆ–è€…ä½œä¸º `JSON Web Encryption`ï¼ˆ`JWE`ï¼‰ç»“æ„çš„æ˜æ–‡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¿¡æ¯å¯ä»¥è¢«æ•°å­—ç­¾åæˆ–ä½¿ç”¨æ¶ˆæ¯éªŒè¯ç ï¼ˆ`MAC`ï¼‰è¿›è¡Œå®Œæ•´æ€§å’ŒçœŸå®æ€§éªŒè¯ï¼Œä»è€Œç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚\r\n\r\n## JWT çš„æ„æˆ\r\n\r\n`JWT` ç”±ä¸‰ä¸ªå…³é”®éƒ¨åˆ†ç»„æˆï¼š\r\n\r\n- å¤´éƒ¨ï¼ˆ`header`ï¼‰ï¼šåŒ…å«ä»¤ç‰Œç±»å‹å’Œç­¾åç®—æ³•ç­‰å…ƒæ•°æ®\r\n- æœ‰æ•ˆè½½è·ï¼ˆ`payload`ï¼‰ï¼šå­˜å‚¨éœ€è¦ä¼ é€’çš„å®é™…æ•°æ®å†…å®¹\r\n- ç­¾åï¼ˆ`signature`ï¼‰ï¼šç”¨äºéªŒè¯ä»¤ç‰Œçš„æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§\r\n\r\nç”Ÿæˆ `JWT` çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š\r\n\r\n1. åˆ†åˆ«å¯¹è¿™ä¸‰ä¸ªéƒ¨åˆ†è¿›è¡Œ `Base64URL` ç¼–ç \r\n2. ä½¿ç”¨ `.` ç¬¦å·å°†ç¼–ç åçš„å­—ç¬¦ä¸²æŒ‰é¡ºåºè¿æ¥\r\n3. æœ€ç»ˆå½¢æˆä¸€ä¸ªå®Œæ•´çš„ `JWT` å­—ç¬¦ä¸²\r\n\r\nä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ `JWT` ç¤ºä¾‹ï¼š\r\n\r\n```text\r\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJqd3QiLCJzdWIiOiIxIiwiYXVkIjoiYXBwMSIsImlhdCI6MTY2NTMwNzgwMCwibmJmIjoxNjY1Mzk0MjAwLCJleHAiOjE2NjU5MTI2MDAsImp0aSI6MSwibmFtZSI6InpoYW5ncGVuZyJ9.8QhYZSONATlpO-oZtUoQOlyzjGSpeNvizPofT5ep0WQ\r\n```\r\n\r\næ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ JWT çš„ä¸‰ä¸ªæ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä½œç”¨å’Œç‰¹ç‚¹ï¼š\r\n\r\n### å¤´éƒ¨ï¼ˆheaderï¼‰\r\n\r\n`header` æ˜¯ä¸€ä¸ªæè¿° `JWT` å…ƒæ•°æ®çš„ `JSON` å¯¹è±¡ã€‚è¿™ä¸ªç®€æ´ä½†é‡è¦çš„éƒ¨åˆ†é€šå¸¸åŒ…å«ä¸¤ä¸ªå…³é”®å­—æ®µï¼š\r\n\r\n| å­—æ®µ | æè¿°                                               |\r\n| :--- | :------------------------------------------------- |\r\n| typ  | `type`ï¼Œè¡¨ç¤ºä»¤ç‰Œçš„ç±»å‹ï¼Œç»Ÿä¸€å†™ä¸º `JWT`             |\r\n| alg  | `algorithm`ï¼Œè¡¨ç¤ºç­¾åä½¿ç”¨çš„ç®—æ³•ï¼Œå¦‚ï¼š`HMAC SHA256` |\r\n\r\næ¥çœ‹ä¸€ä¸ªå…·ä½“ç¤ºä¾‹ï¼š\r\n\r\n```json\r\n{\r\n  \"typ\": \"JWT\",\r\n  \"alg\": \"HS256\"\r\n}\r\n```\r\n\r\nç»è¿‡ `Base64URL` ç¼–ç åï¼Œæˆ‘ä»¬å¾—åˆ° JWT çš„ç¬¬ä¸€éƒ¨åˆ†ï¼š\r\n\r\n```text\r\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9\r\n```\r\n\r\n### æœ‰æ•ˆè½½è·ï¼ˆpayloadï¼‰\r\n\r\nä½œä¸º JWT çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œ`payload` æ‰¿è½½ç€æˆ‘ä»¬éœ€è¦ä¼ é€’çš„å®é™…æ•°æ®ã€‚å®ƒåŒæ ·æ˜¯ä¸€ä¸ª `JSON` å¯¹è±¡ï¼Œå…¶å­—æ®µåˆ†ä¸ºæ ‡å‡†å­—æ®µï¼ˆåœ¨ [RFC7519](https://www.rfc-editor.org/rfc/rfc7519#section-4.1) ä¸­å®šä¹‰ï¼‰å’Œè‡ªå®šä¹‰å­—æ®µä¸¤ç±»ã€‚\r\n\r\nä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ ‡å‡†å­—æ®µï¼š\r\n\r\n| å­—æ®µ | æè¿°                                                                    |\r\n| :--- | :---------------------------------------------------------------------- |\r\n| iss  | `issuer`ï¼Œç­¾å‘äººï¼Œå¯ä»¥ç”¨äºç¡®å®šç­¾å‘ `JWT` çš„äºº                           |\r\n| sub  | `subject`ï¼Œç­¾å‘çš„ä¸»é¢˜ï¼Œå¯ä»¥ç”¨äºè¡¨ç¤ºè¢«ç­¾å‘çš„äººæ˜¯è°æˆ–è€…è¢«ç­¾å‘çš„å†…å®¹æ˜¯ä»€ä¹ˆ |\r\n| aud  | `audience`ï¼Œå—ä¼—è€…ï¼Œå¯ä»¥ç”¨äºè¡¨ç¤ºè¯¥ `JWT` è¯¥è¢«å“ªäº›ä¸»ä½“ä½¿ç”¨               |\r\n| iat  | `issued at`ï¼Œç­¾å‘æ—¶é—´                                                   |\r\n| nbf  | `not before`ï¼Œå¯ç”¨æ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å‰ï¼Œæ­¤ `JWT` æ˜¯æ— æ•ˆçš„                   |\r\n| exp  | `expiration time`ï¼Œè¿‡æœŸæ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´åï¼Œæ­¤ `JWT` æ˜¯æ— æ•ˆçš„              |\r\n| jti  | `JWT ID`ï¼Œå”¯ä¸€æ ‡è¯†                                                      |\r\n\r\nä¸€ä¸ªåŒ…å«æ ‡å‡†å­—æ®µå’Œè‡ªå®šä¹‰å­—æ®µçš„å®ä¾‹ï¼š\r\n\r\n```json\r\n{\r\n  \"iss\": \"jwt\",\r\n  \"sub\": \"1\",\r\n  \"aud\": \"app1\",\r\n  \"iat\": 1665307800,\r\n  \"nbf\": 1665394200,\r\n  \"exp\": 1665912600,\r\n  \"jti\": 1,\r\n  \"name\": \"zhangpeng\"\r\n}\r\n```\r\n\r\nå°†è¯¥ payload è¿›è¡Œ `Base64URL` ç¼–ç ï¼Œå¾—åˆ°ï¼š\r\n\r\n```text\r\neyJpc3MiOiJqd3QiLCJzdWIiOiIxIiwiYXVkIjoiYXBwMSIsImlhdCI6MTY2NTMwNzgwMCwibmJmIjoxNjY1Mzk0MjAwLCJleHAiOjE2NjU5MTI2MDAsImp0aSI6MSwibmFtZSI6InpoYW5ncGVuZyJ9\r\n```\r\n\r\n**æ³¨æ„**ï¼šç”±äº JWT çš„ payload ä»…åš `Base64URL` ç¼–ç è€ŒéåŠ å¯†ï¼Œä»»ä½•äººéƒ½å¯ä»¥è§£ç æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹ã€‚å› æ­¤åˆ‡å‹¿åœ¨å…¶ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ã€‚\r\n\r\n### ç­¾åï¼ˆsignatureï¼‰\r\n\r\n`signature` æ˜¯ç¡®ä¿ JWT å®Œæ•´æ€§å’ŒçœŸå®æ€§çš„å…³é”®ã€‚å®ƒçš„ç”Ÿæˆè¿‡ç¨‹å¦‚ä¸‹ï¼š\r\n\r\n1. è·å–ç¼–ç åçš„ header å’Œ payload\r\n2. ä½¿ç”¨ \".\" å°†å®ƒä»¬è¿æ¥\r\n3. ä½¿ç”¨ header ä¸­æŒ‡å®šçš„ç®—æ³•ï¼ˆå¦‚ `HMACSHA256`ï¼‰å’Œå¯†é’¥è¿›è¡Œç­¾å\r\n\r\nç­¾åçš„è®¡ç®—å…¬å¼ï¼š\r\n\r\n```text\r\nHMACSHA256(\r\n  Base64URLEncode(header) + \".\" + Base64URLEncode(payload),\r\n  secret\r\n)\r\n```\r\n\r\nä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„ header å’Œ payloadï¼Œè®¡ç®—å¾—åˆ°çš„ç­¾åä¸ºï¼š\r\n\r\n```text\r\n8QhYZSONATlpO-oZtUoQOlyzjGSpeNvizPofT5ep0WQ-hoICKvR06A\r\n```\r\n\r\n**æ³¨æ„**ï¼šä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼ŒJWT çš„ç­¾å‘å¿…é¡»åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆä¿æŠ¤ç­¾åå¯†é’¥ï¼ˆ`secret`ï¼‰ã€‚ä¸€æ—¦å¯†é’¥æ³„éœ²ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¼ªé€ æœ‰æ•ˆçš„ JWTã€‚\r\n\r\næœ€åï¼Œå°†è¿™ä¸‰ä¸ªéƒ¨åˆ†ç”¨ \".\" è¿æ¥ï¼Œå¾—åˆ°å®Œæ•´çš„ JWTï¼š\r\n\r\n```text\r\neyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJqd3QiLCJzdWIiOiIxIiwiYXVkIjoiYXBwMSIsImlhdCI6MTY2NTMwNzgwMCwibmJmIjoxNjY1Mzk0MjAwLCJleHAiOjE2NjU5MTI2MDAsImp0aSI6MSwibmFtZSI6InpoYW5ncGVuZyJ9.8QhYZSONATlpO-oZtUoQOlyzjGSpeNvizPofT5ep0WQ\r\n```\r\n\r\n## JWT çš„ä¼˜ç¼ºç‚¹\r\n\r\n### ä¼˜ç‚¹\r\n\r\n- **è·¨è¯­è¨€å…¼å®¹æ€§**ï¼šç”±äºåŸºäº `JSON` æ ¼å¼ï¼ŒJWT å¯ä»¥åœ¨ä»»ä½•ç¼–ç¨‹è¯­è¨€ä¸­è½»æ¾ä½¿ç”¨å’Œå¤„ç†\r\n- **ä¿¡æ¯ä¸°å¯Œ**ï¼š`payload` éƒ¨åˆ†å¯çµæ´»å­˜å‚¨ä¸šåŠ¡æ‰€éœ€çš„å„ç±»ä¿¡æ¯ï¼Œä½¿å…¶æˆä¸ºåŠŸèƒ½å¼ºå¤§çš„ä¿¡æ¯è½½ä½“\r\n- **è½»é‡ä¾¿æº**ï¼šç»“æ„ç®€å•ç´§å‡‘ï¼Œæ˜“äºåœ¨ç½‘ç»œä¸­ä¼ è¾“ï¼Œé€‚åˆç§»åŠ¨ç«¯ç­‰åœºæ™¯\r\n- **è‡ªåŒ…å«æ€§**ï¼šåŒ…å«äº†éªŒè¯å’Œæˆæƒæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå‡å°‘äº†æ•°æ®åº“æŸ¥è¯¢çš„éœ€æ±‚\r\n- **æ— çŠ¶æ€**ï¼šæœåŠ¡å™¨æ— éœ€å­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œæœ‰åŠ©äºåº”ç”¨æ‰©å±•\r\n\r\n### ç¼ºç‚¹\r\n\r\n- **åŠé”€å›°éš¾**ï¼šç”±äºæœåŠ¡ç«¯ä¸ä¿å­˜ token çŠ¶æ€ï¼Œè¦è®©å·²ç­¾å‘çš„ JWT ç«‹å³å¤±æ•ˆéœ€è¦é¢å¤–çš„å®ç°æœºåˆ¶\r\n- **å®‰å…¨æ€§è€ƒé‡**ï¼š\r\n  - `payload` éƒ¨åˆ†ä»…åš `Base64` ç¼–ç ï¼Œæ•æ„Ÿæ•°æ®éœ€è¦é¢å¤–åŠ å¯†\r\n  - `token` ä¸€æ—¦æ³„éœ²ï¼Œåœ¨è¿‡æœŸå‰éƒ½å¯èƒ½è¢«ä»–äººä½¿ç”¨\r\n- **å¤§å°é™åˆ¶**ï¼šç”±äºéœ€è¦åœ¨è¯·æ±‚ä¸­ä¼ è¾“ï¼Œè¿‡å¤§çš„ payload å¯èƒ½å½±å“ä¼ è¾“æ•ˆç‡\r\n- **ç»­æœŸæœºåˆ¶**ï¼štoken è¿‡æœŸåéœ€è¦é‡æ–°è®¤è¯ï¼Œå®ç°è‡ªåŠ¨ç»­æœŸç›¸å¯¹å¤æ‚\r\n\r\n## JWT å¸¸è§çš„ä½¿ç”¨åœºæ™¯\r\n\r\n### èº«ä»½è®¤è¯ä¸æˆæƒ\r\n\r\nJWT æœ€å¸¸è§ä¸”é‡è¦çš„åº”ç”¨åœºæ™¯æ˜¯ç”¨äºèº«ä»½è®¤è¯å’Œæˆæƒç³»ç»Ÿã€‚å…·ä½“è¡¨ç°åœ¨ï¼š\r\n\r\n- **ç™»å½•è®¤è¯**ï¼šç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨ç”ŸæˆåŒ…å«ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„ JWTï¼Œåç»­è¯·æ±‚åªéœ€æºå¸¦è¯¥ä»¤ç‰Œå³å¯éªŒè¯èº«ä»½\r\n- **è®¿é—®æ§åˆ¶**ï¼šé€šè¿‡åœ¨ JWT ä¸­åŒ…å«æƒé™ä¿¡æ¯ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶ç”¨æˆ·å¯¹ç‰¹å®šè·¯ç”±ã€æœåŠ¡å’Œèµ„æºçš„è®¿é—®æƒé™\r\n- **å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰**ï¼šJWT è½»é‡çº§çš„ç‰¹æ€§ä½¿å…¶æˆä¸ºè·¨åŸŸå•ç‚¹ç™»å½•çš„ç†æƒ³é€‰æ‹©ï¼Œç”¨æˆ·åªéœ€ç™»å½•ä¸€æ¬¡å³å¯è®¿é—®å¤šä¸ªç³»ç»Ÿ\r\n\r\n### å®‰å…¨çš„ä¿¡æ¯ä¼ è¾“\r\n\r\nJWT æä¾›äº†ä¸€ç§å®‰å…¨å¯é çš„ä¿¡æ¯ä¼ è¾“æœºåˆ¶ï¼š\r\n\r\n- **æ•°æ®å®Œæ•´æ€§**ï¼šé€šè¿‡ç­¾åæœºåˆ¶ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹\r\n- **èº«ä»½éªŒè¯**ï¼šä½¿ç”¨éå¯¹ç§°åŠ å¯†ï¼ˆå…¬é’¥/ç§é’¥ï¼‰å¯ä»¥éªŒè¯å‘é€æ–¹èº«ä»½\r\n- **ä¿¡æ¯åŠ å¯†**ï¼šæ”¯æŒå¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡ŒåŠ å¯†ä¿æŠ¤\r\n- **æ—¶æ•ˆæ§åˆ¶**ï¼šå¯ä»¥ä¸ºä¼ è¾“çš„ä¿¡æ¯è®¾ç½®æœ‰æ•ˆæœŸï¼Œè¶…æ—¶è‡ªåŠ¨å¤±æ•ˆ\r\n\r\nè¿™äº›ç‰¹æ€§ä½¿ JWT æˆä¸ºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¼ é€’é‡è¦ä¿¡æ¯çš„ç†æƒ³æ–¹æ¡ˆã€‚\r\n\r\n## æ€»ç»“\r\n\r\né€šè¿‡ä»¥ä¸Šçš„æ¢è®¨ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº† `JWT` è¿™ä¸€è®¾è®¡ç²¾å·§è€Œä¼˜é›…çš„æŠ€æœ¯æ–¹æ¡ˆã€‚è®©æˆ‘ä»¬å›é¡¾å…¶å…³é”®ç‰¹ç‚¹ï¼š\r\n\r\n- **æœ¬è´¨ç®€å•**ï¼š`JWT` æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰¿è½½ `JSON` æ ¼å¼ä¿¡æ¯çš„å­—ç¬¦ä¸²ï¼Œæ˜“äºç†è§£å’Œä½¿ç”¨\r\n- **ç»“æ„ç´§å‡‘**ï¼šé€šè¿‡ `Base64URL` ç¼–ç å‹ç¼©æ•°æ®ä½“ç§¯ï¼Œåœ¨ä¿è¯åŠŸèƒ½çš„åŒæ—¶å®ç°é«˜æ•ˆä¼ è¾“\r\n- **å®‰å…¨å¯é **ï¼šé‡‡ç”¨æ•°å­—ç­¾åå’ŒåŠ å¯†ç®—æ³•ç¡®ä¿ä¿¡æ¯å®Œæ•´æ€§ï¼Œæœ‰æ•ˆé˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹\r\n- **ä½¿ç”¨çµæ´»**ï¼šæ—¢å¯ç”¨äºèº«ä»½è®¤è¯ï¼Œä¹Ÿå¯ä½œä¸ºå®‰å…¨çš„ä¿¡æ¯ä¼ è¾“è½½ä½“ï¼Œåº”ç”¨åœºæ™¯ä¸°å¯Œ\r\n- **è·¨å¹³å°å…¼å®¹**ï¼šåŸºäºå¼€æ”¾æ ‡å‡†ï¼Œæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œå¹³å°ï¼Œä¾¿äºç³»ç»Ÿé›†æˆ\r\n\r\nè¿™äº›ä¼˜ç§€çš„ç‰¹æ€§ä½¿ `JWT` æˆä¸ºç°ä»£ Web åº”ç”¨ä¸­ä¸å¯æˆ–ç¼ºçš„é‡è¦å·¥å…·ï¼Œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„èº«ä»½è®¤è¯å’Œä¿¡æ¯ä¼ è¾“æä¾›äº†å¯é çš„è§£å†³æ–¹æ¡ˆã€‚è™½ç„¶å­˜åœ¨ä¸€äº›å±€é™æ€§ï¼Œä½†åªè¦åœ¨åˆé€‚çš„åœºæ™¯ä¸‹åˆç†ä½¿ç”¨ï¼Œ`JWT` ä»ç„¶æ˜¯ä¸€ä¸ªå¼ºå¤§è€Œå®ç”¨çš„æŠ€æœ¯é€‰æ‹©ã€‚\r\n",
    "number": 27,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2022-10-09T08:00:00Z",
    "updatedAt": "2025-02-05T11:52:43Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/27",
    "jsonFilePath": "discussions/27-D_kwDONzrbkM4AeNb7.json",
    "markdownFilePath": "2022/10/27-D_kwDONzrbkM4AeNb7.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNbh",
    "title": "å¦‚ä½•è¯„ä¼°ç®—æ³•ä¼˜åŠ£",
    "body": "è¯„ä¼°ç®—æ³•çš„ä¼˜åŠ£ï¼Œæœ‰ä¸¤ä¸ªå…³é”®ç»´åº¦éœ€è¦è€ƒè™‘ï¼š\r\n\r\n- æ—¶é—´å¤æ‚åº¦ - æ‰§è¡Œæ•ˆç‡\r\n\r\n  åæ˜ ç®—æ³•æ‰§è¡Œæ‰€éœ€è¦çš„æ—¶é—´æˆæœ¬ï¼Œè¡¡é‡ç¨‹åºè¿è¡Œå¿«æ…¢ã€‚\r\n\r\n- ç©ºé—´å¤æ‚åº¦ - å†…å­˜å ç”¨\r\n\r\n  åæ˜ ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹å­˜å‚¨ç©ºé—´çš„éœ€æ±‚ã€‚\r\n\r\n## å¦‚ä½•æè¿°ç®—æ³•å¤æ‚åº¦\r\n\r\næˆ‘ä»¬é€šå¸¸ä½¿ç”¨ **å¤§ O è¡¨ç¤ºæ³•**æ¥æè¿°ç®—æ³•å¤æ‚åº¦ï¼Œå®ƒè¡¨ç¤ºéšç€è¾“å…¥æ•°æ®è§„æ¨¡çš„å¢é•¿ï¼Œç®—æ³•çš„æ€§èƒ½å˜åŒ–è¶‹åŠ¿ã€‚\r\n\r\nå¤§ O è¡¨ç¤ºæ³•æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç²—ç•¥çš„åˆ†ææ¨¡å‹ã€‚å®ƒé€šè¿‡ä¼°ç®—ç®—æ³•è¿è¡Œæ—¶é—´éšè¾“å…¥è§„æ¨¡çš„å¢é•¿è¶‹åŠ¿ï¼Œå¸®åŠ©æˆ‘ä»¬è¯„ä¼°ä¸åŒç®—æ³•çš„æ€§èƒ½è¡¨ç°ã€‚è™½ç„¶è¿™ç§è¡¨ç¤ºæ³•å¹¶ä¸ç²¾ç¡®ï¼Œä½†åœ¨å®é™…å·¥ä½œä¸­éå¸¸å®ç”¨ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿé€‰æ‹©åˆé€‚çš„ç®—æ³•æ–¹æ¡ˆã€‚\r\n\r\n### æ—¶é—´å¤æ‚åº¦\r\n\r\næ—¶é—´å¤æ‚åº¦æ˜¯è¯„ä¼°ç®—æ³•è¿è¡Œæ•ˆç‡çš„å…³é”®æŒ‡æ ‡ï¼Œå®ƒåæ˜ äº†**éšç€è¾“å…¥è§„æ¨¡çš„å¢é•¿ï¼Œç®—æ³•æ‰§è¡Œæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿**ã€‚\r\n\r\næˆ‘ä»¬å¯ä»¥éµå¾ªä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤è®¡ç®—æ—¶é—´å¤æ‚åº¦ï¼š\r\n\r\n1. è¯†åˆ«æ ¸å¿ƒæ“ä½œ\r\n\r\n   æ‰¾å‡ºç®—æ³•ä¸­æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„åŸºæœ¬è¯­å¥ï¼Œå®ƒä»¬é€šå¸¸ä½äºæœ€å†…å±‚å¾ªç¯ä¸­\r\n\r\n2. å»ºç«‹æ•°å­¦æ¨¡å‹\r\n\r\n   åˆ†æè¿™äº›æ ¸å¿ƒæ“ä½œçš„æ‰§è¡Œæ¬¡æ•°ä¸è¾“å…¥è§„æ¨¡ `n` çš„å…³ç³»ï¼Œ**åªä¿ç•™ä¸»è¦å½±å“é¡¹**\r\n\r\n3. è½¬åŒ–ä¸ºå¤§ O è¡¨ç¤ºæ³•\r\n\r\n   åˆ©ç”¨å¤§ O ç¬¦å·è¡¨ç¤ºæœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦å¢é•¿è¶‹åŠ¿\r\n\r\nä¸‹é¢é€šè¿‡å…¸å‹ä¾‹å­æ¥åŠ æ·±ç†è§£ï¼š\r\n\r\n- å¸¸æ•°æ—¶é—´ `O(1)`ï¼Œå¦‚ `9`\r\n- çº¿æ€§æ—¶é—´ `O(n)`ï¼Œå¦‚ `2n + 3`\r\n- å¹³æ–¹æ—¶é—´ `O(nÂ²)`ï¼Œå¦‚ `nÂ² + 2n + 3`\r\n- ç«‹æ–¹æ—¶é—´ `O(nÂ³)`ï¼Œå¦‚ `4nÂ³ + 3nÂ² + 22n + 100`\r\n- å¯¹æ•°æ—¶é—´ `O(logn)`ï¼Œå¦‚ `5logâ‚‚n + 20`\r\n- çº¿æ€§å¯¹æ•° `O(nlogn)`ï¼Œå¦‚ `2n + 3nlogâ‚‚n + 19`\r\n- æŒ‡æ•°æ—¶é—´ `O(2â¿)`ï¼Œå¦‚ `2â¿`\r\n\r\n#### å¸¸è§æ—¶é—´å¤æ‚åº¦æ’åº\r\n\r\nä¸‹é¢ä»æœ€ä¼˜åˆ°æœ€å·®çš„é¡ºåºï¼Œåˆ—å‡ºäº†å¸¸è§çš„æ—¶é—´å¤æ‚åº¦ï¼š\r\n\r\n`O(1)` < `O(logn)` < `O(n)` < `O(nlogn)` < `O(nÂ²)` < `O(nÂ³)` < `O(n^k)` < `O(2^n)` < `O(n!)`\r\n\r\néšç€å¤æ‚åº¦çš„å¢åŠ ï¼Œç®—æ³•çš„æ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°½é‡é¿å…ä½¿ç”¨åå‡ ç§å¤æ‚åº¦è¾ƒé«˜çš„ç®—æ³•ã€‚\r\n\r\n### ç©ºé—´å¤æ‚åº¦\r\n\r\nç©ºé—´å¤æ‚åº¦æ˜¯è¯„ä¼°ç®—æ³•æ•ˆç‡çš„å¦ä¸€ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå®ƒåæ˜ äº†**éšç€è¾“å…¥è§„æ¨¡çš„å¢é•¿ï¼Œç®—æ³•å ç”¨å­˜å‚¨ç©ºé—´çš„å˜åŒ–è¶‹åŠ¿**ã€‚\r\n\r\nåœ¨åˆ†æç®—æ³•çš„ç©ºé—´å¼€é”€æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸‰ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š\r\n\r\n1. è¾“å…¥ç©ºé—´ï¼šç”¨äºå­˜å‚¨ç®—æ³•è¾“å…¥æ•°æ®çš„å†…å­˜ç©ºé—´ï¼Œä¸é—®é¢˜è§„æ¨¡ç›´æ¥ç›¸å…³\r\n2. ç¨‹åºç©ºé—´ï¼šå­˜å‚¨ç®—æ³•ä»£ç æœ¬èº«æ‰€éœ€çš„å†…å­˜ç©ºé—´ï¼Œé€šå¸¸ä¸ºå›ºå®šå€¼\r\n3. å·¥ä½œç©ºé—´ï¼šç®—æ³•è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶ä½¿ç”¨çš„é¢å¤–å†…å­˜ç©ºé—´ï¼ŒåŒ…æ‹¬ä¸´æ—¶å˜é‡ã€é€’å½’æ ˆç­‰\r\n\r\nåœ¨è¯„ä¼°ç©ºé—´å¤æ‚åº¦æ—¶ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨**å·¥ä½œç©ºé—´**çš„å¢é•¿è¶‹åŠ¿ã€‚è¿™æ˜¯å› ä¸ºè¾“å…¥ç©ºé—´å’Œç¨‹åºç©ºé—´é€šå¸¸æ˜¯å›ºå®šçš„ï¼Œä¸”ç”±å…·ä½“é—®é¢˜å’Œå®ç°å†³å®šï¼Œä¼˜åŒ–ç©ºé—´æœ‰é™ã€‚è€Œå·¥ä½œç©ºé—´åˆ™ç›´æ¥åæ˜ äº†ç®—æ³•æœ¬èº«å¯¹é¢å¤–å†…å­˜çš„éœ€æ±‚ï¼Œæ˜¯ç®—æ³•è®¾è®¡æ—¶æœ€éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ã€‚\r\n\r\nå¸¸è§çš„ç©ºé—´å¤æ‚åº¦æœ‰ï¼š\r\n\r\n1. `O(1)` - å¸¸é‡ç©ºé—´\r\n\r\n   - ç©ºé—´æ¶ˆè€—ä¸è¾“å…¥è§„æ¨¡æ— å…³\r\n   - åªéœ€è¦å›ºå®šçš„ä¸´æ—¶å˜é‡å³å¯å®Œæˆè®¡ç®—\r\n   - å¦‚ç®€å•çš„æ•°å€¼è®¡ç®—ã€éå†ç­‰\r\n\r\n2. `O(n)` - çº¿æ€§ç©ºé—´\r\n\r\n   - ç©ºé—´æ¶ˆè€—ä¸è¾“å…¥è§„æ¨¡å‘ˆçº¿æ€§å¢é•¿\r\n   - éœ€è¦é¢å¤–çš„æ•°ç»„æˆ–é“¾è¡¨æ¥å­˜å‚¨ä¸­é—´ç»“æœ\r\n   - å¦‚å½’å¹¶æ’åºç­‰éœ€è¦è¾…åŠ©æ•°ç»„çš„ç®—æ³•\r\n\r\n3. `O(nÂ²)` - å¹³æ–¹ç©ºé—´\r\n\r\n   - éœ€è¦äºŒç»´æ•°ç»„è¿™æ ·çš„æ•°æ®ç»“æ„\r\n   - å¦‚åŠ¨æ€è§„åˆ’ä¸­çš„çŠ¶æ€è½¬ç§»çŸ©é˜µ\r\n\r\n4. `O(logn)` - å¯¹æ•°ç©ºé—´\r\n\r\n   - ä¸»è¦å‡ºç°åœ¨é€’å½’ç®—æ³•ä¸­\r\n   - å¦‚äºŒåˆ†æŸ¥æ‰¾çš„é€’å½’å®ç°\r\n\r\n## å¦‚ä½•ä¼˜åŒ–ç®—æ³•\r\n\r\nç®—æ³•ä¼˜åŒ–çš„æœ¬è´¨æ˜¯åœ¨æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥ï¼š\r\n\r\n1. é™ä½å†…å­˜ä½¿ç”¨\r\n\r\n   - åŠæ—¶é‡Šæ”¾é—²ç½®å†…å­˜ï¼Œé¿å…å†…å­˜æ³„æ¼\r\n   - é‡å¤åˆ©ç”¨å·²åˆ†é…çš„ç©ºé—´ï¼Œå‡å°‘é¢‘ç¹åˆ†é…\r\n   - ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œé¿å…ç©ºé—´æµªè´¹\r\n   - é‡‡ç”¨åŸåœ°ç®—æ³•ï¼Œå‡å°‘è¾…åŠ©ç©ºé—´\r\n\r\n2. æå‡æ‰§è¡Œæ•ˆç‡\r\n\r\n   - é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„æé«˜è®¿é—®æ•ˆç‡\r\n   - æ¶ˆé™¤é‡å¤è®¡ç®—ï¼Œåˆ©ç”¨ä¸­é—´ç»“æœ\r\n   - åˆç†ä½¿ç”¨ç¼“å­˜åŠ é€Ÿæ•°æ®è®¿é—®\r\n   - ä¼˜åŒ–å¾ªç¯ç»“æ„ï¼Œå‡å°‘ä¸å¿…è¦çš„è¿­ä»£\r\n   - åˆ©ç”¨ä½è¿ç®—ä»£æ›¿ä¹˜é™¤è¿ç®—\r\n   - é¿å…é¢‘ç¹çš„å¯¹è±¡åˆ›å»º\r\n\r\n3. æƒè¡¡å–èˆ\r\n\r\n   - ç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚æ–¹æ¡ˆ\r\n   - çµæ´»è¿ç”¨\"æ—¶ç©ºäº’æ¢\"ç­–ç•¥\r\n   - åœ¨ç®—æ³•å¤æ‚åº¦å’Œä»£ç å¯è¯»æ€§é—´å¹³è¡¡\r\n   - ç»¼åˆè€ƒè™‘å¼€å‘æˆæœ¬å’Œç»´æŠ¤éš¾åº¦\r\n\r\n## æœ€å\r\n\r\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ²¡æœ‰å®Œç¾çš„ç®—æ³•ï¼Œå…³é”®æ˜¯æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯æ‰¾åˆ°æœ€åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚\r\n\r\n- æœ‰æ—¶ä¸ºäº†è·å¾—æ›´å¥½çš„æ—¶é—´æ€§èƒ½ï¼Œå¯ä»¥é€‚å½“å¢åŠ ç©ºé—´å¼€é”€ï¼Œè¿™å°±æ˜¯ç»å…¸çš„\"ç©ºé—´æ¢æ—¶é—´\"ç­–ç•¥\r\n- æœ‰æ—¶ä¹Ÿå¯èƒ½éœ€è¦ç‰ºç‰²ä¸€äº›æ—¶é—´æ€§èƒ½æ¥èŠ‚çœå†…å­˜ä½¿ç”¨\r\n\r\nä¼˜åŒ–æ—¶åº”å½“ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œè¿‡åº¦ä¼˜åŒ–å¯èƒ½ä¼šå¸¦æ¥æ›´å¤šé—®é¢˜ã€‚\r\n",
    "number": 22,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2020-07-22T08:00:00Z",
    "updatedAt": "2025-02-05T11:43:53Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/22",
    "jsonFilePath": "discussions/22-D_kwDONzrbkM4AeNbh.json",
    "markdownFilePath": "2020/7/22-D_kwDONzrbkM4AeNbh.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNbp",
    "title": "å¦‚ä½•è§£å†³ç«¯å£å ç”¨é—®é¢˜",
    "body": "## èƒŒæ™¯ä»‹ç»\r\n\r\nå½“æˆ‘ä»¬å¯åŠ¨æŸé¡¹æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ° `Address already in use` è¿™ä¸ªå¸¸è§é”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯è¡¨æ˜å½“å‰è¦ä½¿ç”¨çš„ç«¯å£å·²è¢«å…¶ä»–è¿›ç¨‹å ç”¨ï¼Œå¯¼è‡´æœåŠ¡æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚\r\n\r\nå‡ºç°ç«¯å£å ç”¨é€šå¸¸æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š\r\n\r\n1. å…¶ä»–æ­£åœ¨è¿è¡Œçš„æœåŠ¡ä¹Ÿåœ¨ä½¿ç”¨è¿™ä¸ªç«¯å£\r\n2. ä¹‹å‰çš„æœåŠ¡æ²¡æœ‰æ­£å¸¸å…³é—­ï¼Œä»ç„¶å ç”¨ç€ç«¯å£\r\n3. ç³»ç»ŸæœåŠ¡æˆ–ç¬¬ä¸‰æ–¹ç¨‹åºé»˜è®¤ä½¿ç”¨äº†è¯¥ç«¯å£\r\n\r\næœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•æ’æŸ¥å’Œè§£å†³ç«¯å£å ç”¨é—®é¢˜ã€‚\r\n\r\n## æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ\r\n\r\nè¦è§£å†³ç«¯å£å ç”¨é—®é¢˜ï¼Œç¬¬ä¸€æ­¥æ˜¯å‡†ç¡®å®šä½å ç”¨ç«¯å£çš„è¿›ç¨‹ã€‚ä»¥ä¸‹æ˜¯å„æ“ä½œç³»ç»Ÿä¸‹æŸ¥çœ‹ç«¯å£å ç”¨çš„å¸¸ç”¨å‘½ä»¤å’Œè¯¦ç»†æ­¥éª¤ï¼š\r\n\r\n- macOS ç³»ç»Ÿ\r\n\r\n  ä½¿ç”¨ `lsof` å‘½ä»¤å¯ä»¥å¿«é€ŸæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µï¼š\r\n\r\n  ```bash\r\n  $ lsof -i :8080\r\n  COMMAND  PID      USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\r\n  main    6667 zhangpeng    7u  IPv6 0x645a94383c79337f      0t0  TCP *:http-alt (LISTEN)\r\n  ```\r\n\r\n- Linux ç³»ç»Ÿ\r\n\r\n  Linux ä¸‹å¯ä½¿ç”¨åŠŸèƒ½å¼ºå¤§çš„ `netstat` å‘½ä»¤ï¼š\r\n\r\n  ```bash\r\n  $ netstat -tunlp | grep \"8080\"\r\n  Proto Recv-Q Send-Q Local Address   Foreign Address   State    PID/Program name\r\n  tcp   0      0     0.0.0.0:8080    0.0.0.0:*        LISTEN   131/nginx: master p\r\n  ```\r\n\r\n- Windows ç³»ç»Ÿ\r\n\r\n  Windows ä¸‹æŸ¥çœ‹ç«¯å£å ç”¨éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š\r\n\r\n  1. ä½¿ç”¨å¿«æ·é”® `Windows + R` æ‰“å¼€è¿è¡Œçª—å£\r\n  2. è¾“å…¥ `cmd` æ‰“å¼€å‘½ä»¤æç¤ºç¬¦\r\n  3. æ‰§è¡Œ `netstat` å‘½ä»¤ï¼š\r\n\r\n     ```bash\r\n     $ netstat -ano | findstr \"8080\"\r\n     åè®®  æœ¬åœ°åœ°å€          å¤–éƒ¨åœ°å€        çŠ¶æ€           PID\r\n     TCP    0.0.0.0:8080     0.0.0.0:0      LISTENING      16248\r\n     TCP    [::]:8080        [::]:0         LISTENING      16248\r\n     TCP    [::1]:8080       [::1]:51273    ESTABLISHED    16248\r\n     ```\r\n\r\n## ç»ˆæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹\r\n\r\n> æ³¨æ„ï¼šåœ¨ç»ˆæ­¢è¿›ç¨‹å‰ï¼Œä¸€å®šè¦å…ˆç¡®è®¤è¯¥è¿›ç¨‹æ˜¯å¦å¯ä»¥å®‰å…¨å…³é—­ã€‚å¯¹äºé‡è¦çš„ç³»ç»Ÿè¿›ç¨‹æˆ–æ­£åœ¨è¿è¡Œçš„å…³é”®æœåŠ¡ï¼Œå»ºè®®æ›´æ¢å…¶ä»–å¯ç”¨ç«¯å£ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ã€‚\r\n\r\næ‰¾åˆ°å ç”¨ç«¯å£çš„è¿›ç¨‹åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç»ˆæ­¢è¿›ç¨‹ï¼š\r\n\r\n- macOS/Linux ç³»ç»Ÿ\r\n\r\n  ä½¿ç”¨ `kill` å‘½ä»¤ç»ˆæ­¢è¿›ç¨‹ï¼š\r\n\r\n  ```bash\r\n  # è¯·å°†<PID>æ›¿æ¢ä¸ºå®é™…çš„è¿›ç¨‹ ID\r\n  kill -9 <PID>  # æ›¿æ¢å®é™…è¿›ç¨‹ ID\r\n  ```\r\n\r\n- Windows ç³»ç»Ÿ\r\n\r\n  ä½¿ç”¨ `taskkill` å‘½ä»¤ç»ˆæ­¢è¿›ç¨‹ï¼š\r\n\r\n  ```bash\r\n  # è¯·å°†<processid>æ›¿æ¢ä¸ºå®é™…çš„è¿›ç¨‹ ID\r\n  taskkill /PID <processid> /F\r\n  ```\r\n\r\n## æœ€å\r\n\r\nåœ¨å¤„ç†ç«¯å£å ç”¨é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬åº”å½“éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š\r\n\r\n1. æ“ä½œéœ€è°¨æ…ï¼Œä¸€å®šè¦å…ˆç¡®è®¤è¿›ç¨‹æ˜¯å¦å¯ä»¥å®‰å…¨ç»ˆæ­¢\r\n2. å¯¹äºé‡è¦çš„ç³»ç»Ÿè¿›ç¨‹ï¼Œå»ºè®®æ›´æ¢ç«¯å£è€Œä¸æ˜¯å¼ºåˆ¶ç»ˆæ­¢\r\n3. å…»æˆè‰¯å¥½ä¹ æƒ¯ï¼ŒæœåŠ¡ä½¿ç”¨å®ŒåŠæ—¶å…³é—­é‡Šæ”¾ç«¯å£\r\n\r\né€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†æ’æŸ¥å’Œè§£å†³ç«¯å£å ç”¨é—®é¢˜çš„åŸºæœ¬æŠ€èƒ½ï¼Œå¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚\r\n",
    "number": 23,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2021-07-22T08:00:00Z",
    "updatedAt": "2025-02-05T11:46:38Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/23",
    "jsonFilePath": "discussions/23-D_kwDONzrbkM4AeNbp.json",
    "markdownFilePath": "2021/7/23-D_kwDONzrbkM4AeNbp.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNbr",
    "title": "å¦‚ä½•åœ¨ macOS ç³»ç»Ÿä¸­è®¾ç½®ç®€å•å¯†ç ",
    "body": "![image](https://file.onnttf.site/2021/12/01/1.png)\r\n\r\nè‡ª `macOS Mojave 10.14` ç‰ˆæœ¬å¼€å§‹ï¼Œ`Apple` åŠ å¼ºäº†è´¦æˆ·å®‰å…¨æ€§ç®¡ç†ï¼Œè¦æ±‚ç”¨æˆ·å¿…é¡»è®¾ç½®è‡³å°‘ `4` ä¸ªå­—ç¬¦çš„å¯†ç ã€‚ç„¶è€Œï¼Œæœ‰äº›ç”¨æˆ·ä¹ æƒ¯ä½¿ç”¨ç®€å•çš„å•å­—ç¬¦å¯†ç ï¼ˆå¦‚ç©ºæ ¼é”®ï¼‰ï¼Œå› ä¸ºè¿™æ ·æ›´ä¾¿æ·æ˜“ç”¨ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•è‡ªå®šä¹‰å¯†ç ç­–ç•¥ï¼Œå®ç°æ›´çµæ´»çš„å¯†ç è®¾ç½®ã€‚\r\n\r\n## ä¿®æ”¹å¯†ç ç­–ç•¥\r\n\r\nè¦è§£é™¤ç³»ç»Ÿé»˜è®¤çš„å¯†ç é™åˆ¶ï¼Œéœ€è¦é€šè¿‡ç»ˆç«¯æ‰§è¡Œç‰¹å®šå‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ“ä½œæ­¥éª¤ï¼š\r\n\r\n1. æ‰“å¼€ã€Œç»ˆç«¯ã€åº”ç”¨ç¨‹åº\r\n2. æ‰§è¡Œå¯†ç ç­–ç•¥æ¸…é™¤å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å°†ç§»é™¤ç³»ç»Ÿé¢„è®¾çš„å¯†ç å¤æ‚åº¦è¦æ±‚\r\n\r\n   ```bash\r\n   pwpolicy -clearaccountpolicies\r\n   ```\r\n\r\n3. éªŒè¯èº«ä»½\r\n\r\n   - ç³»ç»Ÿä¼šè¦æ±‚è¾“å…¥å½“å‰ç”¨æˆ·çš„ç®¡ç†å‘˜å¯†ç \r\n   - è¾“å…¥è¿‡ç¨‹ä¸­å±å¹•ä¸ä¼šæ˜¾ç¤ºä»»ä½•å­—ç¬¦\r\n   - è¾“å…¥å®ŒæˆåæŒ‰å›è½¦é”®ç¡®è®¤\r\n\r\n   ![image](https://file.onnttf.site/2021/12/01/2.png)\r\n\r\n4. ç¡®è®¤æ“ä½œæˆåŠŸ\r\n\r\n   - è‹¥æ˜¾ç¤º `Clearing global account policies` ä¿¡æ¯ï¼Œè¡¨ç¤ºå¯†ç ç­–ç•¥å·²æˆåŠŸæ¸…é™¤\r\n   - æ­¤æ—¶æ‚¨å¯ä»¥å¼€å§‹è®¾ç½®æ–°çš„ç®€åŒ–å¯†ç \r\n\r\n   ![image](https://file.onnttf.site/2021/12/01/3.png)\r\n\r\n## è®¾ç½®æ–°å¯†ç \r\n\r\nå®Œæˆå¯†ç ç­–ç•¥æ¸…é™¤åï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è®¾ç½®æ–°çš„è‡ªå®šä¹‰å¯†ç ï¼š\r\n\r\n1. ç‚¹å‡»å±å¹•å·¦ä¸Šè§’çš„ `Apple` å›¾æ ‡ï¼Œæ‰“å¼€ç³»ç»Ÿèœå•\r\n2. åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©\"ç³»ç»Ÿåå¥½è®¾ç½®\"ï¼Œç„¶åå¯¼èˆªè‡³\"ç”¨æˆ·ä¸ç¾¤ç»„\"é¢æ¿\r\n3. åœ¨å·¦ä¾§ç”¨æˆ·åˆ—è¡¨ä¸­é€‰æ‹©æ‚¨çš„è´¦æˆ·ï¼Œç‚¹å‡»\"æ›´æ”¹å¯†ç \"æŒ‰é’®\r\n4. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œæ‚¨éœ€è¦å®Œæˆä»¥ä¸‹æ­¥éª¤\r\n\r\n   - åœ¨\"æ—§å¯†ç \"æ è¾“å…¥æ‚¨å½“å‰ä½¿ç”¨çš„å¯†ç \r\n   - åœ¨\"æ–°å¯†ç \"æ è®¾ç½®æ‚¨æƒ³è¦çš„æ–°å¯†ç ï¼ˆç°åœ¨å·²è§£é™¤å­—ç¬¦æ•°é™åˆ¶ï¼‰\r\n   - åœ¨\"éªŒè¯\"æ å†æ¬¡è¾“å…¥æ–°å¯†ç ä»¥ç¡®è®¤\r\n   - å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥åœ¨\"å¯†ç æç¤º\"æ æ·»åŠ æç¤ºä¿¡æ¯ï¼Œä»¥é˜²é—å¿˜\r\n\r\n   ![image](https://file.onnttf.site/2021/12/01/4.png)\r\n\r\n5. ç‚¹å‡»\"æ›´æ”¹å¯†ç \"å®Œæˆè®¾ç½®\r\n\r\n## æœ€å\r\n\r\nè™½ç„¶ç³»ç»Ÿç°åœ¨å…è®¸è®¾ç½®ç®€å•å¯†ç ï¼Œä½†ä¸ºäº†ä¿æŠ¤æ‚¨çš„æ•°æ®å®‰å…¨ï¼Œä»å»ºè®®ï¼š\r\n\r\n- ä½¿ç”¨åŒ…å«å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šç¬¦å·çš„ç»„åˆ\r\n- é¿å…ä½¿ç”¨æ˜“è¢«çŒœæµ‹çš„ä¸ªäººä¿¡æ¯\r\n- å®šæœŸæ›´æ¢å¯†ç \r\n",
    "number": 24,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2021-12-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:47:31Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/24",
    "jsonFilePath": "discussions/24-D_kwDONzrbkM4AeNbr.json",
    "markdownFilePath": "2021/12/24-D_kwDONzrbkM4AeNbr.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNbu",
    "title": "Linux æ–‡ä»¶æƒé™è¯¦è§£",
    "body": "![image](https://file.onnttf.site/2022/01/27/1.png)\r\n\r\nåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œ`permission denied` æ˜¯ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æç¤ºï¼Œé€šå¸¸åœ¨æ‰§è¡Œè„šæœ¬æˆ–è¯»å†™æ–‡ä»¶æ—¶é‡åˆ°ã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œç†è§£è¿™ä¸ªé”™è¯¯çš„åŸå› ä»¥åŠæŒæ¡è§£å†³æ–¹æ³•éå¸¸é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» Linux æ–‡ä»¶æƒé™çš„ç›¸å…³çŸ¥è¯†ï¼Œå¸®åŠ©ä½ å½»åº•ç†è§£å’Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚\r\n\r\n## Permission Denied\r\n\r\n`Permission Denied` é—®é¢˜çš„æœ¬è´¨æ˜¯**å½“å‰ç”¨æˆ·æˆ–è€…å½“å‰ç”¨æˆ·ç»„ç¼ºä¹ç›¸åº”çš„æ“ä½œæƒé™**ã€‚\r\n\r\nä½œä¸ºä¸€ç§[å¤šç”¨æˆ·ç³»ç»Ÿ](https://www.runoob.com/linux/linux-user-manage.html)ï¼ŒLinux ä¸ºä¸åŒç”¨æˆ·åˆ†é…ä¸åŒçš„æƒé™çº§åˆ«ï¼Œä»¥ä¿è¯ç³»ç»Ÿå®‰å…¨å’Œèµ„æºç®¡ç†çš„æœ‰åºæ€§ã€‚å½“ç”¨æˆ·è¯•å›¾æ‰§è¡ŒæŸä¸ªæ“ä½œä½†ç¼ºä¹ç›¸åº”æƒé™æ—¶ï¼Œç³»ç»Ÿå°±ä¼šè¿”å› `Permission Denied` é”™è¯¯ã€‚\r\n\r\nLinux ç³»ç»Ÿä¸­ä¸»è¦æœ‰ä¸‰ç§åŸºæœ¬æƒé™ï¼š\r\n\r\n- è¯»æƒé™ï¼ˆreadï¼‰ï¼šå…è®¸æŸ¥çœ‹æ–‡ä»¶å†…å®¹\r\n- å†™æƒé™ï¼ˆwriteï¼‰ï¼šå…è®¸ä¿®æ”¹æ–‡ä»¶å†…å®¹\r\n- æ‰§è¡Œæƒé™ï¼ˆexecuteï¼‰ï¼šå…è®¸è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶\r\n\r\nè¿™äº›æƒé™çš„åˆç†åˆ†é…å’Œç®¡ç†æ˜¯ Linux ç³»ç»Ÿå®‰å…¨çš„é‡è¦åŸºç¡€ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚ä¸ºç”¨æˆ·å’Œç”¨æˆ·ç»„è®¾ç½®é€‚å½“çš„æƒé™ç»„åˆã€‚\r\n\r\n## æŸ¥çœ‹æ–‡ä»¶åŸºæœ¬å±æ€§\r\n\r\nåœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `ll` æˆ– `ls -l` å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„åŸºæœ¬å±æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å‘½ä»¤ï¼Œä¸ä»…å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶çš„æƒé™è®¾ç½®ï¼Œè¿˜èƒ½æŸ¥çœ‹æ–‡ä»¶çš„æ‰€æœ‰è€…ã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ç­‰é‡è¦ä¿¡æ¯ã€‚\r\n\r\n```bash\r\nâœ  temp ll\r\ntotal 32\r\n-rwxr-xr-x  1 zhangpeng  staff       10K 10 29 19:41 init_dotfiles.sh\r\n-rwxr-xr-x  1 zhangpeng  everyone   664B 11  1 13:15 reset.sh\r\n```\r\n\r\næ¯æ¡æ–‡ä»¶ä¿¡æ¯éƒ½åŒ…å«å¤šä¸ªé‡è¦å­—æ®µï¼ŒæŒ‰ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡æ˜¯ï¼š\r\n\r\n1. **æƒé™æ ‡è¯†ç¬¦**ï¼šå¦‚ `-rwxr-xr-x`\r\n2. **ç¡¬é“¾æ¥æ•°**ï¼šé€šå¸¸ä¸º 1ï¼Œè¡¨ç¤ºæŒ‡å‘è¯¥æ–‡ä»¶çš„ç¡¬é“¾æ¥æ•°é‡\r\n3. **æ‰€æœ‰è€…**ï¼šæ–‡ä»¶çš„åˆ›å»ºè€…æˆ–è¢«æŒ‡å®šçš„æ‰€æœ‰è€…ï¼Œå¦‚ `zhangpeng`\r\n4. **ç”¨æˆ·ç»„**ï¼šæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·ç»„ï¼Œå¦‚ `staff` æˆ– `everyone`\r\n5. **æ–‡ä»¶å¤§å°**ï¼šä»¥å­—èŠ‚ï¼ˆBï¼‰ã€åƒå­—èŠ‚ï¼ˆKï¼‰ç­‰ä¸ºå•ä½ï¼Œå¦‚ `10K`\r\n6. **ä¿®æ”¹æ—¶é—´**ï¼šæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¥æœŸå’Œæ—¶é—´\r\n7. **æ–‡ä»¶å**ï¼šåŒ…å«æ‰©å±•ç±»å‹çš„å®Œæ•´æ–‡ä»¶å\r\n\r\nå…¶ä¸­ï¼Œæƒé™æ ‡è¯†ç¬¦æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒæ˜¯ Linux æ–‡ä»¶æƒé™ç®¡ç†çš„æ ¸å¿ƒã€‚è®©æˆ‘ä»¬é€šè¿‡è¯¦ç»†è§£ææ¥ç†è§£å®ƒçš„æ„æˆï¼š\r\n\r\n### æƒé™æ ‡è¯†ç¬¦\r\n\r\næƒé™æ ‡è¯†ç¬¦ç”± 10 ä¸ªå­—ç¬¦ç»„æˆï¼ŒåŒ…æ‹¬ 1 ä½æ–‡ä»¶ç±»å‹æ ‡è¯†å’Œ 9 ä½æƒé™æ ‡è¯†ã€‚è¿™ä¸ªçœ‹ä¼¼å¤æ‚çš„å­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„æƒé™æ§åˆ¶ç³»ç»Ÿï¼Œè®©æˆ‘ä»¬ä¸€æ­¥æ­¥è§£ææ¯ä¸ªéƒ¨åˆ†ï¼š\r\n\r\n- æ–‡ä»¶ç±»å‹ï¼ˆç¬¬ 1 ä½ï¼‰\r\n\r\n  è¿™ä¸ªå­—ç¬¦æ­ç¤ºäº†æ–‡ä»¶çš„åŸºæœ¬å±æ€§ï¼ŒLinux ç³»ç»Ÿæ”¯æŒä»¥ä¸‹å‡ ç§ç±»å‹ï¼š\r\n\r\n  - `-` ï¼šæ™®é€šæ–‡ä»¶ï¼ˆåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€å›¾ç‰‡ç­‰å¸¸è§æ–‡ä»¶ï¼‰\r\n  - `d` ï¼šç›®å½•ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ–‡ä»¶å¤¹ï¼‰\r\n  - `l` ï¼šç¬¦å·é“¾æ¥ï¼ˆç±»ä¼¼ Windows ç³»ç»Ÿä¸­çš„å¿«æ·æ–¹å¼ï¼ŒæŒ‡å‘å…¶ä»–æ–‡ä»¶ï¼‰\r\n  - `b` ï¼šå—è®¾å¤‡æ–‡ä»¶ï¼ˆå¦‚ç¡¬ç›˜ã€U ç›˜ç­‰å¯éšæœºè®¿é—®çš„å­˜å‚¨è®¾å¤‡ï¼‰\r\n  - `c` ï¼šå­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼ˆå¦‚é”®ç›˜ã€é¼ æ ‡ç­‰æŒ‰å­—ç¬¦æµå¤„ç†çš„è®¾å¤‡ï¼‰\r\n  - `p` ï¼šå‘½åç®¡é“æ–‡ä»¶ï¼ˆç”¨äºè¿›ç¨‹é—´çš„æ•°æ®é€šä¿¡ï¼‰\r\n  - `s` ï¼šå¥—æ¥å­—æ–‡ä»¶ï¼ˆå®ç°ç½‘ç»œé€šä¿¡çš„ç‰¹æ®Šæ–‡ä»¶ï¼‰\r\n\r\n- æ‰€æœ‰è€…æƒé™ï¼ˆç¬¬ 2-4 ä½ï¼‰\r\n\r\n  è¿™ä¸‰ä¸ªå­—ç¬¦å®šä¹‰äº†æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ã€‚ä½œä¸ºæ–‡ä»¶çš„åˆ›å»ºè€…æˆ–æŒ‡å®šæ‹¥æœ‰è€…ï¼Œè¿™ç»„æƒé™é€šå¸¸æœ€ä¸ºå®Œæ•´ï¼Œä»¥ç¡®ä¿æ–‡ä»¶ä¸»äººèƒ½å¤Ÿå®Œå…¨æ§åˆ¶è‡ªå·±çš„æ–‡ä»¶ã€‚\r\n\r\n- æ‰€å±ç»„æƒé™ï¼ˆç¬¬ 5-7 ä½ï¼‰\r\n\r\n  è¿™éƒ¨åˆ†è§„å®šäº†åŒç»„ç”¨æˆ·çš„è®¿é—®æƒé™ã€‚åœ¨å›¢é˜Ÿåä½œä¸­ç‰¹åˆ«é‡è¦ï¼Œå…è®¸é¡¹ç›®ç»„æˆå‘˜å…±äº«é€‚å½“çš„æ–‡ä»¶è®¿é—®æƒé™ï¼Œæ—¢ä¿è¯åä½œæ•ˆç‡ï¼Œåˆç»´æŠ¤æ–‡ä»¶å®‰å…¨ã€‚\r\n\r\n- å…¶ä»–ç”¨æˆ·æƒé™ï¼ˆç¬¬ 8-10 ä½ï¼‰\r\n\r\n  æœ€åä¸‰ä½å­—ç¬¦è§„å®šäº†ç³»ç»Ÿä¸­å…¶ä»–ç”¨æˆ·çš„è®¿é—®æƒé™ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè¿™ç»„æƒé™é€šå¸¸æœ€ä¸ºå—é™ï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ã€‚\r\n\r\næ¯ç»„æƒé™æ ‡è¯†ä¸­çš„ä¸‰ä¸ªå­—ç¬¦éƒ½éµå¾ªç»Ÿä¸€çš„è§„åˆ™ï¼š\r\n\r\n- `r`ï¼šè¯»å–æƒé™ï¼ˆreadï¼‰- å…è®¸æŸ¥çœ‹æ–‡ä»¶å†…å®¹\r\n- `w`ï¼šå†™å…¥æƒé™ï¼ˆwriteï¼‰- å…è®¸ä¿®æ”¹æ–‡ä»¶å†…å®¹\r\n- `x`ï¼šæ‰§è¡Œæƒé™ï¼ˆexecuteï¼‰- å…è®¸è¿è¡Œç¨‹åºæˆ–è¿›å…¥ç›®å½•\r\n- `-`ï¼šè¡¨ç¤ºæ— å¯¹åº”æƒé™\r\n\r\nä»¥ `-rwxr-xr-x` ä¸ºä¾‹ï¼š\r\n\r\n```bash\r\n-    rwx    r-x    r-x\r\nâ”‚     â”‚      â”‚      â”‚\r\nâ”‚     â”‚      â”‚      â””â”€â”€ å…¶ä»–ç”¨æˆ·ï¼šå¯è¯»ï¼ˆrï¼‰ã€å¯æ‰§è¡Œï¼ˆxï¼‰\r\nâ”‚     â”‚      â””â”€â”€â”€â”€â”€â”€â”€ ç»„ç”¨æˆ·ï¼šå¯è¯»ï¼ˆrï¼‰ã€å¯æ‰§è¡Œï¼ˆxï¼‰\r\nâ”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ‰€æœ‰è€…ï¼šå¯è¯»ï¼ˆrï¼‰ã€å¯å†™ï¼ˆwï¼‰ã€å¯æ‰§è¡Œï¼ˆxï¼‰\r\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡ä»¶ç±»å‹ï¼šæ™®é€šæ–‡ä»¶\r\n```\r\n\r\n## ä¿®æ”¹æ–‡ä»¶æƒé™\r\n\r\nåœ¨ç†è§£äº†æ–‡ä»¶æƒé™çš„åŸºæœ¬æ¦‚å¿µåï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•ä¿®æ”¹æ–‡ä»¶æƒé™ã€‚Linux ç³»ç»Ÿæä¾›äº†åŠŸèƒ½å¼ºå¤§çš„ `chmod` å‘½ä»¤æ¥å®Œæˆæƒé™ç®¡ç†å·¥ä½œã€‚\r\n\r\n`chmod` å‘½ä»¤æ”¯æŒä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š\r\n\r\n- ç¬¦å·æ¨¡å¼ï¼šä½¿ç”¨å­—æ¯å’Œæ“ä½œç¬¦æ¥ä¿®æ”¹æƒé™ï¼Œç›´è§‚æ˜“è®°\r\n- æ•°å­—æ¨¡å¼ï¼šä½¿ç”¨å…«è¿›åˆ¶æ•°å­—æ¥è¡¨ç¤ºæƒé™ç»„åˆï¼Œç®€æ´é«˜æ•ˆ\r\n\r\n![image](https://www.runoob.com/wp-content/uploads/2014/08/rwx-standard-unix-permission-bits.png)\r\n\r\n### ç¬¦å·æ¨¡å¼\r\n\r\nç¬¦å·æ¨¡å¼æ˜¯ä¸€ç§ç›´è§‚çµæ´»çš„æƒé™è®¾ç½®æ–¹æ³•ï¼Œé€šè¿‡ç»„åˆä¸åŒç±»å‹çš„ç¬¦å·æ¥ç²¾ç¡®æ§åˆ¶æ–‡ä»¶æƒé™ã€‚\r\n\r\nç¬¦å·æ¨¡å¼ä½¿ç”¨ä¸‰ç±»æ ¸å¿ƒç¬¦å·æ¥ç²¾ç¡®æ§åˆ¶æ–‡ä»¶æƒé™ï¼Œåˆ†åˆ«ç”¨äºæŒ‡å®šç”¨æˆ·ç±»å‹ã€æ“ä½œæ–¹å¼å’Œå…·ä½“æƒé™ï¼š\r\n\r\n- ç”¨æˆ·ç±»å‹ï¼ˆæŒ‡å®šæƒé™ä½œç”¨å¯¹è±¡ï¼‰\r\n\r\n  | ç¬¦å· | ç”¨æˆ·ç±»å‹    | è¯´æ˜                                     | ä½¿ç”¨åœºæ™¯               |\r\n  | ---- | ----------- | ---------------------------------------- | ---------------------- |\r\n  | `u`  | user        | æ–‡ä»¶æ‰€æœ‰è€…                               | è®¾ç½®æ–‡ä»¶åˆ›å»ºè€…çš„æƒé™   |\r\n  | `g`  | group       | æ–‡ä»¶æ‰€å±ç»„                               | æ§åˆ¶å›¢é˜Ÿæˆå‘˜çš„è®¿é—®æƒé™ |\r\n  | `o`  | other users | æ—¢ä¸æ˜¯æ–‡ä»¶æ‰€æœ‰è€…ï¼Œä¹Ÿä¸åœ¨æ–‡ä»¶æ‰€å±ç»„çš„ç”¨æˆ· | ç®¡ç†å…¶ä»–ç”¨æˆ·çš„è®¿é—®çº§åˆ« |\r\n  | `a`  | all         | æ‰€æœ‰ç”¨æˆ·ï¼Œç›¸å½“äº ugo çš„åˆé›†              | ç»Ÿä¸€è®¾ç½®æ‰€æœ‰ç”¨æˆ·æƒé™   |\r\n\r\n- æ“ä½œæ–¹å¼ï¼ˆæŒ‡å®šæƒé™å˜æ›´æ–¹å¼ï¼‰\r\n\r\n  | ç¬¦å· | è¯´æ˜     | å¸¸è§ç”¨ä¾‹                 |\r\n  | ---- | -------- | ------------------------ |\r\n  | `+`  | å¢åŠ æƒé™ | `chmod u+x` æ·»åŠ æ‰§è¡Œæƒé™ |\r\n  | `-`  | å»é™¤æƒé™ | `chmod g-w` ç§»é™¤å†™æƒé™   |\r\n  | `=`  | è®¾ç½®æƒé™ | `chmod a=r` åªä¿ç•™è¯»æƒé™ |\r\n\r\n- å…·ä½“æƒé™ï¼ˆæŒ‡å®šå…·ä½“æƒé™ï¼‰\r\n\r\n  | ç¬¦å· | è¯´æ˜       | å®é™…å«ä¹‰         |\r\n  | ---- | ---------- | ---------------- |\r\n  | `r`  | å¯è¯»æƒé™   | å…è®¸æŸ¥çœ‹æ–‡ä»¶å†…å®¹ |\r\n  | `w`  | å¯å†™æƒé™   | å…è®¸ä¿®æ”¹æ–‡ä»¶å†…å®¹ |\r\n  | `x`  | å¯æ‰§è¡Œæƒé™ | å…è®¸è¿è¡Œç¨‹åºæ–‡ä»¶ |\r\n\r\n### æ•°å­—æ¨¡å¼\r\n\r\næ•°å­—æ¨¡å¼é‡‡ç”¨å…«è¿›åˆ¶æ•°å€¼æ¥è¡¨ç¤ºæƒé™ç»„åˆï¼Œæ˜¯ä¸€ç§æ›´ç®€æ´å’Œç³»ç»ŸåŒ–çš„æƒé™è®¾ç½®æ–¹å¼ã€‚\r\n\r\næƒé™ä¸æ•°å­—çš„å¯¹åº”å…³ç³»ï¼š\r\n\r\n| æƒé™ç±»å‹ | å¯¹åº”æ•°å­— | è¯´æ˜       | äºŒè¿›åˆ¶è¡¨ç¤º |\r\n| -------- | -------- | ---------- | ---------- |\r\n| `r`      | 4        | å¯è¯»æƒé™   | 100        |\r\n| `w`      | 2        | å¯å†™æƒé™   | 010        |\r\n| `x`      | 1        | å¯æ‰§è¡Œæƒé™ | 001        |\r\n| `-`      | 0        | æ— æƒé™     | 000        |\r\n\r\nä¾‹å¦‚ï¼š\r\n\r\n- `755` è¡¨ç¤º `rwxr-xr-x`\r\n- `644` è¡¨ç¤º `rw-r--r--`\r\n- `777` è¡¨ç¤º `rwxrwxrwx`\r\n\r\n## å®è·µåº”ç”¨ï¼šå¸¸è§æƒé™åœºæ™¯æ¼”ç¤º\r\n\r\nè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…¸å‹çš„å®é™…æ¡ˆä¾‹æ¥ç†è§£æƒé™è®¾ç½®ã€‚å‡è®¾ä½ æ˜¯ä¸€ä¸ªå¼€å‘å›¢é˜Ÿçš„æŠ€æœ¯è´Ÿè´£äººï¼Œéœ€è¦ä¸ºå›¢é˜Ÿçš„éƒ¨ç½²è„šæœ¬ `reset.sh` é…ç½®åˆç†çš„è®¿é—®æƒé™ã€‚æ ¹æ®å®‰å…¨æœ€ä½³å®è·µï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹å…·ä½“éœ€æ±‚ï¼š\r\n\r\n- æ–‡ä»¶æ‰€æœ‰è€…ï¼ˆå¦‚æŠ€æœ¯è´Ÿè´£äººï¼‰éœ€è¦å®Œæ•´æƒé™ï¼šå¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œ\r\n- åŒç»„ç”¨æˆ·ï¼ˆå¦‚å¼€å‘å›¢é˜Ÿæˆå‘˜ï¼‰éœ€è¦éƒ¨åˆ†æƒé™ï¼šå¯è¯»ã€å¯æ‰§è¡Œ\r\n- å…¶ä»–ç”¨æˆ·ï¼ˆå¦‚ç³»ç»Ÿå…¶ä»–äººå‘˜ï¼‰ä»…éœ€æœ€å°æƒé™ï¼šåªå¯æ‰§è¡Œ\r\n\r\nè¿™ç§æƒé™é…ç½®åœ¨ä¼ä¸šå¼€å‘ç¯å¢ƒä¸­ååˆ†å¸¸è§ä¸”å®ç”¨ï¼š\r\n\r\n- ç¡®ä¿è´Ÿè´£äººå¯ä»¥éšæ—¶ä¿®æ”¹å’Œç»´æŠ¤è„šæœ¬\r\n- å…è®¸å›¢é˜Ÿæˆå‘˜æŸ¥çœ‹è„šæœ¬å†…å®¹å¹¶æ‰§è¡Œéƒ¨ç½²\r\n- é™åˆ¶å›¢é˜Ÿå¤–éƒ¨äººå‘˜åªèƒ½æ‰§è¡Œä½†ä¸èƒ½æŸ¥çœ‹æ•æ„Ÿå†…å®¹\r\n- ç¬¦åˆæœ€å°æƒé™åŸåˆ™ï¼Œå¹³è¡¡å¯ç”¨æ€§å’Œå®‰å…¨æ€§\r\n\r\næˆ‘ä»¬å¯ä»¥é€šè¿‡ç¬¦å·æ¨¡å¼å’Œæ•°å­—æ¨¡å¼ä¸¤ç§æ–¹å¼æ¥çµæ´»å®ç°è¿™ä¸ªæƒé™é…ç½®æ–¹æ¡ˆï¼š\r\n\r\n- ä½¿ç”¨ç¬¦å·æ¨¡å¼\r\n\r\n  ```bash\r\n  âœ  temp chmod u=rwx,g=rx,o=x reset.sh\r\n  âœ  temp ll\r\n  total 32\r\n  -rwxr-xr-x  1 zhangpeng  staff    10K 10 29 19:41 init_dotfiles.sh\r\n  -rwxr-x--x  1 zhangpeng  staff   664B 11  1 13:15 reset.sh\r\n  ```\r\n\r\n- ä½¿ç”¨æ•°å­—æ¨¡å¼\r\n\r\n  ```bash\r\n  âœ  temp chmod 751 reset.sh    # 7(rwx)5(rx)1(x)\r\n  âœ  temp ll\r\n  total 32\r\n  -rwxr-xr-x  1 zhangpeng  staff    10K 10 29 19:41 init_dotfiles.sh\r\n  -rwxr-x--x  1 zhangpeng  staff   664B 11  1 13:15 reset.sh\r\n  ```\r\n\r\nè¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨å®é™…å·¥ä½œä¸­çµæ´»è¿ç”¨æƒé™ç®¡ç†æœºåˆ¶æ¥è§£å†³å…·ä½“é—®é¢˜ã€‚å®ƒä¸ä»…ä½“ç°äº† Linux æƒé™ç³»ç»Ÿçš„å¼ºå¤§åŠŸèƒ½ï¼Œä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†å®ç”¨çš„æœ€ä½³å®è·µå‚è€ƒã€‚åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åº”å½“å§‹ç»ˆéµå¾ª\"æœ€å°æƒé™åŸåˆ™\"ï¼ˆPrinciple of Least Privilegeï¼‰ï¼Œå³åªä¸ºç”¨æˆ·åˆ†é…å®Œæˆå·¥ä½œæ‰€å¿…éœ€çš„æœ€å°æƒé™é›†åˆã€‚è¿™æ ·ä¸ä»…å¯ä»¥æœ‰æ•ˆé™ä½ç³»ç»Ÿå®‰å…¨é£é™©ï¼Œè¿˜èƒ½å¸®åŠ©æˆ‘ä»¬å»ºç«‹æ›´æ¸…æ™°çš„æƒé™ç®¡ç†ä½“ç³»ï¼Œä¸ºå›¢é˜Ÿåä½œæä¾›å¯é çš„å®‰å…¨ä¿éšœã€‚\r\n\r\n## è§£å†³ Permission Denied é—®é¢˜\r\n\r\nç°åœ¨æˆ‘ä»¬å¯ä»¥å›åˆ°æ–‡ç« å¼€å¤´æåˆ°çš„é—®é¢˜ï¼šå½“æ‰§è¡Œè„šæœ¬é‡åˆ° `Permission Denied` é”™è¯¯æ—¶è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ\r\n\r\nè¿™ä¸ªé”™è¯¯çš„æœ¬è´¨æ˜¯**æ‰§è¡Œè€…ï¼ˆå½“å‰ç”¨æˆ·ï¼‰ç¼ºå°‘æ–‡ä»¶çš„æ‰§è¡Œæƒé™**ã€‚è§£å†³æ­¥éª¤å¦‚ä¸‹ï¼š\r\n\r\n1. æ£€æŸ¥å½“å‰ç”¨æˆ·èº«ä»½ï¼ˆä½¿ç”¨ `whoami` å‘½ä»¤ï¼‰\r\n2. ç¡®è®¤æ˜¯å¦éœ€è¦æ‰§è¡Œæƒé™\r\n3. ä½¿ç”¨ `chmod +x` æ·»åŠ æ‰§è¡Œæƒé™\r\n\r\nå…·ä½“æ“ä½œç¤ºä¾‹ï¼š\r\n\r\n```bash\r\nâœ  temp chmod +x reset.sh   # ä¸ºæ‰€æœ‰ç”¨æˆ·æ·»åŠ æ‰§è¡Œæƒé™\r\nâœ  temp ./reset.sh          # ç°åœ¨å¯ä»¥æˆåŠŸæ‰§è¡Œäº†\r\nMacOS:\r\ndone.\r\n```\r\n\r\n## æœ€å\r\n\r\nåœ¨å®é™…å·¥ä½œä¸­ï¼Œåˆç†çš„æƒé™ç®¡ç†æ˜¯ä¸€é¡¹é‡è¦çš„æŠ€èƒ½ã€‚å®ƒä¸ä»…å¯ä»¥æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®ï¼Œè¿˜èƒ½è®©å›¢é˜Ÿåä½œå˜å¾—æ›´åŠ è§„èŒƒå’Œé«˜æ•ˆã€‚é€šè¿‡éµå¾ª\"æœ€å°æƒé™åŸåˆ™\"ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¿éšœå®‰å…¨çš„åŒæ—¶ï¼Œæœ€å¤§ç¨‹åº¦åœ°æå‡å·¥ä½œæ•ˆç‡ã€‚\r\n\r\nå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ åœ¨æ—¥å¸¸å·¥ä½œä¸­æ›´å¥½åœ°è¿ç”¨è¿™äº›çŸ¥è¯†ï¼Œæ„å»ºæ›´å®‰å…¨ã€å¯é çš„å¼€å‘ç¯å¢ƒã€‚\r\n",
    "number": 25,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2022-01-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:48:40Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/25",
    "jsonFilePath": "discussions/25-D_kwDONzrbkM4AeNbu.json",
    "markdownFilePath": "2022/1/25-D_kwDONzrbkM4AeNbu.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcA",
    "title": "ä¸ºä»€ä¹ˆæ¯ä¸ªè„šæœ¬éƒ½éœ€è¦ Shebang",
    "body": "åœ¨é˜…è¯»è„šæœ¬æ–‡ä»¶æ—¶ï¼Œé€šå¸¸ä¼šçœ‹åˆ°æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªç¬¦å·ç»„åˆ `#!`ã€‚è¿™ä¸ªç¬¦å·è¢«ç§°ä¸º `Shebang`ï¼ˆä¹Ÿå†™ä½œ `Hashbang`ï¼‰ï¼Œæ˜¯ Unix/Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‰¹æ®Šæ³¨é‡Šï¼Œå®ƒå†³å®šäº†è„šæœ¬çš„è§£æå’Œæ‰§è¡Œæ–¹å¼ã€‚\r\n\r\n## ä»€ä¹ˆæ˜¯ Shebang\r\n\r\n`Shebang` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ³¨é‡Šï¼Œä½äºè„šæœ¬æ–‡ä»¶çš„é¦–è¡Œï¼Œä»¥ `#!` å¼€å¤´ï¼Œç´§éšå…¶åçš„æ˜¯è§£é‡Šå™¨çš„å®Œæ•´è·¯å¾„æˆ–å¯æ‰§è¡Œæ–‡ä»¶åã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯å‘Šè¯‰ç³»ç»Ÿåº”è¯¥ä½¿ç”¨å“ªä¸ªè§£é‡Šå™¨æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚\r\n\r\n## ä¸ºä»€ä¹ˆéœ€è¦ Shebang\r\n\r\nè™½ç„¶ç³»ç»Ÿé€šå¸¸ä¼šæ ¹æ®æ–‡ä»¶æ‰©å±•åæ¥åˆ¤æ–­ä½¿ç”¨å“ªç§è§£é‡Šå™¨æ‰§è¡Œè„šæœ¬ï¼ˆä¾‹å¦‚ `.sh` æ–‡ä»¶ç”¨ `bash`ï¼Œ`.py` æ–‡ä»¶ç”¨ `python`ï¼‰ï¼Œä½†è¿™ç§æ–¹å¼å­˜åœ¨ä¸€äº›å±€é™æ€§ï¼š\r\n\r\n- æ— æ³•æ§åˆ¶è§£é‡Šå™¨ç‰ˆæœ¬ï¼šå½“è„šæœ¬ä¾èµ–äºç‰¹å®šç‰ˆæœ¬çš„è§£é‡Šå™¨ï¼ˆå¦‚ `python2` æˆ– `python3`ï¼‰æ—¶ï¼Œä»…ä¾èµ–æ‰©å±•åæ— æ³•ç¡®ä¿è„šæœ¬ä½¿ç”¨æ­£ç¡®çš„ç‰ˆæœ¬\r\n- ç¼ºä¹çµæ´»æ€§ï¼šæœ‰äº›è„šæœ¬éœ€è¦é™„åŠ å‚æ•°æˆ–ç‰¹å®šé…ç½®æ‰èƒ½æ­£ç¡®æ‰§è¡Œï¼Œè€Œæ‰©å±•åæ— æ³•æä¾›è¿™ç§çµæ´»çš„æ”¯æŒ\r\n- è·¨å¹³å°å…¼å®¹æ€§å·®ï¼šä¸åŒç³»ç»Ÿæˆ–ç¯å¢ƒä¸­ï¼Œæ‰©å±•åä¸è§£é‡Šå™¨çš„å…³è”å¯èƒ½ä¸åŒï¼Œå¯¼è‡´è„šæœ¬åœ¨ä¸åŒç¯å¢ƒä¸‹æ— æ³•ä¸€è‡´è¿è¡Œï¼Œå°¤å…¶æ˜¯åœ¨ç›®æ ‡ç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£…ç‰¹å®šè§£é‡Šå™¨æ—¶\r\n\r\n`Shebang` æœ‰æ•ˆè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚é€šè¿‡åœ¨è„šæœ¬é¦–è¡Œæ˜ç¡®æŒ‡å®šè§£é‡Šå™¨çš„è·¯å¾„å’Œç‰ˆæœ¬ï¼Œå®ƒç¡®ä¿äº†è„šæœ¬åœ¨ä¸åŒç¯å¢ƒä¸­çš„ä¸€è‡´æ€§æ‰§è¡Œï¼Œå¹¶æ”¯æŒçµæ´»æ·»åŠ è¿è¡Œå‚æ•°å’Œé…ç½®é€‰é¡¹ï¼Œä»è€Œæ˜¾è‘—æé«˜äº†è„šæœ¬çš„å¯é æ€§å’Œå¯ç§»æ¤æ€§ã€‚\r\n\r\nç¤ºä¾‹ï¼š\r\n\r\nå¦‚æœéœ€è¦ä½¿ç”¨ `bash` æ‰§è¡Œè„šæœ¬ï¼Œåªéœ€åœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ·»åŠ ï¼š\r\n\r\n```text\r\n#!/bin/bash\r\n```\r\n\r\nè¿™è¡Œä»£ç æ˜ç¡®å‘Šè¯‰ç³»ç»Ÿä½¿ç”¨ `/bin/bash` ä½œä¸ºè§£é‡Šå™¨æ¥è§£æå’Œæ‰§è¡Œè¯¥è„šæœ¬ã€‚\r\n\r\n## Shebang çš„è¯­æ³•\r\n\r\n`Shebang` çš„è¯­æ³•éå¸¸ç®€å•ã€‚åªéœ€åœ¨è„šæœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ·»åŠ  `#!` ç¬¦å·ï¼Œåè·Ÿè§£é‡Šå™¨çš„å®Œæ•´è·¯å¾„æˆ–å¯æ‰§è¡Œæ–‡ä»¶åã€‚`Shebang` æœ‰ä¸¤ç§å¸¸è§çš„å†™æ³•ï¼š\r\n\r\n1. ç›´æ¥æŒ‡å®šè§£é‡Šå™¨è·¯å¾„ï¼š\r\n\r\n   ```python\r\n   #!/usr/bin/python3\r\n   print(\"Hello World\")\r\n   ```\r\n\r\n2. é€šè¿‡ `env` æŸ¥æ‰¾è§£é‡Šå™¨ï¼š\r\n\r\n   ```python\r\n   #!/usr/bin/env python3\r\n   print(\"Hello World\")\r\n   ```\r\n\r\nè¿™ä¸¤ç§å†™æ³•å„æœ‰ä¼˜åŠ¿ï¼Œä¸‹é¢è¯¦ç»†åˆ†æå®ƒä»¬çš„åŒºåˆ«ï¼š\r\n\r\n- ä½¿ç”¨ `env`ï¼š\r\n\r\n  1. **æ›´å¥½çš„å¯ç§»æ¤æ€§**ï¼š`env` ä¼šåœ¨ç³»ç»Ÿçš„ `PATH` è·¯å¾„ä¸­è‡ªåŠ¨æŸ¥æ‰¾è§£é‡Šå™¨ï¼Œä½¿è„šæœ¬èƒ½å¤Ÿé€‚åº”ä¸åŒç³»ç»Ÿä¸­è§£é‡Šå™¨çš„å®‰è£…ä½ç½®ã€‚\r\n\r\n  2. **ç‰ˆæœ¬çµæ´»æ€§**ï¼šé€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡å¯ä»¥è½»æ¾åˆ‡æ¢è§£é‡Šå™¨ç‰ˆæœ¬ï¼Œæ— éœ€ä¿®æ”¹è„šæœ¬ã€‚\r\n\r\n  3. **è™šæ‹Ÿç¯å¢ƒå‹å¥½**ï¼šåœ¨ Python ç­‰è¯­è¨€çš„è™šæ‹Ÿç¯å¢ƒä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œèƒ½è‡ªåŠ¨æ‰¾åˆ°æ­£ç¡®çš„è§£é‡Šå™¨ã€‚\r\n\r\n  ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ `env` ä¹Ÿå­˜åœ¨ä¸€å®šå®‰å…¨é£é™©â€”â€”æ”»å‡»è€…å¯èƒ½é€šè¿‡ä¿®æ”¹ `PATH` æ¥åŠ«æŒè§£é‡Šå™¨ã€‚\r\n\r\n- ä¸ä½¿ç”¨ `env`ï¼š\r\n\r\n  1. **å®‰å…¨æ€§æ›´é«˜**ï¼šç¡¬ç¼–ç çš„è§£é‡Šå™¨è·¯å¾„ä¸å—ç¯å¢ƒå˜é‡å½±å“ï¼Œå¯ä»¥é˜²æ­¢è·¯å¾„åŠ«æŒã€‚\r\n\r\n  2. **ç¡®å®šæ€§æ›´å¼º**ï¼šæ˜ç¡®æŒ‡å®šè§£é‡Šå™¨ç‰ˆæœ¬å’Œä½ç½®ï¼Œé¿å…ç¯å¢ƒä¾èµ–å¸¦æ¥çš„ä¸ç¡®å®šæ€§ã€‚\r\n\r\n  3. **éƒ¨ç½²ç¯å¢ƒå¯æ§**ï¼šé€‚åˆåœ¨å›ºå®šç¯å¢ƒï¼ˆå¦‚ç”Ÿäº§æœåŠ¡å™¨ï¼‰ä¸­ä½¿ç”¨ï¼Œç¡®ä¿è„šæœ¬è¡Œä¸ºç¨³å®šã€‚\r\n\r\nåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œåº”æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹å¼ï¼š\r\n\r\n- å¼€å‘ç¯å¢ƒæˆ–éœ€è¦åˆ†äº«çš„è„šæœ¬ï¼Œæ¨èä½¿ç”¨ `env` æ–¹å¼ç¡®ä¿å¯ç§»æ¤æ€§\r\n- ç”Ÿäº§ç¯å¢ƒæˆ–å®‰å…¨æ•æ„Ÿåœºæ™¯ï¼Œå»ºè®®ç›´æ¥æŒ‡å®šè§£é‡Šå™¨è·¯å¾„\r\n\r\n## æœ€å\r\n\r\né€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œç›¸ä¿¡ä½ å·²ç»äº†è§£äº† `Shebang` çš„é‡è¦æ€§åŠå…¶ä½œç”¨ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ç¬¦å·ç»„åˆï¼Œæ›´æ˜¯ç¡®ä¿è„šæœ¬å¯é æ‰§è¡Œçš„å…³é”®ã€‚\r\n",
    "number": 29,
    "labels": {
      "nodes": [
        {
          "id": "LA_kwDONzrbkM8AAAAB4wxdhw",
          "name": "shell",
          "url": "https://github.com/onnttf/blog/labels/shell"
        }
      ]
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2023-02-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:54:08Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/29",
    "jsonFilePath": "discussions/29-D_kwDONzrbkM4AeNcA.json",
    "markdownFilePath": "2023/2/29-D_kwDONzrbkM4AeNcA.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcC",
    "title": "å¦‚ä½•æ„å»º Docker é•œåƒ",
    "body": "## Docker é•œåƒæ˜¯ä»€ä¹ˆ\r\n\r\nDocker é•œåƒæ˜¯å®¹å™¨è¿è¡Œæ—¶çš„åªè¯»æ¨¡æ¿ï¼Œå®ƒåŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼šä»£ç ã€è¿è¡Œæ—¶ç¯å¢ƒã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œè®¾ç½®ç­‰ã€‚[Docker å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/get-started/overview/)å¯¹é•œåƒçš„å®šä¹‰å¦‚ä¸‹ï¼š\r\n\r\n> An image is a read-only template with instructions for creating a Docker container. Often, an image is based on another image, with some additional customization. For example, you may build an image which is based on the ubuntu image, but installs the Apache web server and your application, as well as the configuration details needed to make your application run.\r\n\r\nç®€å•æ¥è¯´ï¼ŒDocker é•œåƒå°±åƒæ˜¯ä¸€ä¸ª\"å¿«ç…§\"ï¼Œå®ƒå¯ä»¥ä¿å­˜å¹¶å¤åˆ¶ä¸€ä¸ªå®Œæ•´çš„è¿è¡Œç¯å¢ƒã€‚\r\n\r\n## ä¸‰ç§æ„å»ºé•œåƒçš„æ–¹æ³•\r\n\r\nDocker æä¾›äº†ä¸‰ç§ä¸»æµçš„æ„å»ºé•œåƒæ–¹å¼ï¼š\r\n\r\n1. ä½¿ç”¨ `Dockerfile` æ„å»ºï¼ˆæ¨èï¼‰\r\n2. åŸºäºå·²æœ‰é•œåƒæ„å»º\r\n3. åŸºäºå®¹å™¨æ„å»º\r\n\r\nè®©æˆ‘ä»¬è¯¦ç»†äº†è§£æ¯ç§æ–¹æ³•ã€‚\r\n\r\n### ä½¿ç”¨ Dockerfile æ„å»ºé•œåƒï¼ˆæ¨èï¼‰\r\n\r\n`Dockerfile` æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«æ„å»ºé•œåƒæ‰€éœ€çš„æ‰€æœ‰[å‘½ä»¤](https://docs.docker.com/engine/reference/builder/)ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•ä¸”å¯é‡å¤çš„æ–¹å¼æ¥åˆ›å»ºé•œåƒã€‚\r\n\r\nä¸‹é¢é€šè¿‡ä¸€ä¸ªå®ä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ `Dockerfile` æ„å»ºä¸€ä¸ªåŒ…å« `vim` ç¼–è¾‘å™¨çš„é•œåƒï¼š\r\n\r\n1. åˆ›å»ºå·¥ä½œç›®å½•\r\n\r\n   ```bash\r\n   ~/Desktop\r\n   â¯ mkdir vim && cd vim\r\n   ~/Desktop/vim\r\n   â¯\r\n   ```\r\n\r\n2. ç¼–å†™ Dockerfile\r\n\r\n   ```dockerfile\r\n   # æŒ‡å®šåŸºç¡€é•œåƒ\r\n   FROM ubuntu:latest\r\n   # é•œåƒä½œè€…åŠè”ç³»æ–¹å¼\r\n   LABEL author=\"zhangpeng\" \\\r\n       mail=\"onnttf@gmail.com\"\r\n   # æ›´æ–°æº\r\n   RUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list\r\n   RUN sed -i 's/security.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list\r\n   # æ›´æ–°å¯ç”¨åŒ…\r\n   RUN apt update \\\r\n       && apt full-upgrade -y\r\n   # å®‰è£… vim\r\n   RUN apt -y install vim\r\n   # æ¸…ç† apt ç¼“å­˜\r\n   RUN apt autoremove -y \\\r\n       && apt clean -y \\\r\n       && rm -rf /var/lib/apt/lists/*\r\n   ```\r\n\r\n   > æç¤ºï¼šDockerfile è¿˜æ”¯æŒ `CMD`ã€`ENV`ã€`ENTRYPOINT` ç­‰å¤šç§æŒ‡ä»¤ï¼Œè¯¦è§[å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/engine/reference/builder/)ã€‚\r\n\r\n3. æ„å»ºé•œåƒ\r\n\r\n   æ‰§è¡Œ `docker build` å‘½ä»¤ï¼š\r\n\r\n   ```bash\r\n   âœ  vim docker build -t vim .\r\n   [+] Building 0.1s (10/10) FINISHED\r\n   => [internal] load build definition from Dockerfile               0.0s\r\n   => => transferring dockerfile: 37B                                0.0s\r\n   => [internal] load .dockerignore                                  0.0s\r\n   => => transferring context: 2B                                    0.0s\r\n   => [internal] load metadata for docker.io/library/ubuntu:latest   0.0s\r\n   => [1/6] FROM docker.io/library/ubuntu:latest                     0.0s\r\n   => CACHED [2/6] RUN sed -i 's/archive.ubuntu.com/mirrors.ustc.ed  0.0s\r\n   => CACHED [3/6] RUN sed -i 's/security.ubuntu.com/mirrors.ustc.e  0.0s\r\n   => CACHED [4/6] RUN apt update     && apt full-upgrade -y         0.0s\r\n   => CACHED [5/6] RUN apt -y install vim                            0.0s\r\n   => CACHED [6/6] RUN apt autoremove -y     && apt clean -y     &&  0.0s\r\n   => exporting to image                                             0.0s\r\n   => => exporting layers                                            0.0s\r\n   => => writing image sha256:0350ae574b3e008092a110a818d266ab1dc45  0.0s\r\n   => => naming to docker.io/library/vim                             0.0s\r\n\r\n   Use 'docker scan' to run Snyk tests against images to find vulnerabilities and learn how to fix them\r\n   ```\r\n\r\n### åŸºäºå·²æœ‰é•œåƒæ„å»º\r\n\r\nå·²æœ‰é•œåƒå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š\r\n\r\n- å¸¦æ–‡ä»¶ç³»ç»Ÿçš„é•œåƒï¼šé€šè¿‡ [docker export](https://docs.docker.com/engine/reference/commandline/export/) å¯¼å‡ºï¼Œéœ€ä½¿ç”¨ [docker import](https://docs.docker.com/engine/reference/commandline/import/) å¯¼å…¥\r\n\r\n  ```bash\r\n  â¯ docker import --help\r\n\r\n  Usage:  docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]\r\n\r\n  Import the contents from a tarball to create a filesystem image\r\n\r\n  Aliases:\r\n  docker image import, docker import\r\n\r\n  Options:\r\n  -c, --change list       Apply Dockerfile instruction to the created image\r\n  -m, --message string    Set commit message for imported image\r\n      --platform string   Set platform if server is multi-platform capable\r\n  ```\r\n\r\n- æ™®é€šé•œåƒï¼šé€šè¿‡ [docker save](https://docs.docker.com/engine/reference/commandline/save/) å¯¼å‡ºï¼Œéœ€ä½¿ç”¨ [docker load](https://docs.docker.com/engine/reference/commandline/load/) å¯¼å…¥\r\n\r\n  ```bash\r\n  â¯ docker save --help\r\n\r\n  Usage:  docker save [OPTIONS] IMAGE [IMAGE...]\r\n\r\n  Save one or more images to a tar archive (streamed to STDOUT by default)\r\n\r\n  Aliases:\r\n  docker image save, docker save\r\n\r\n  Options:\r\n  -o, --output string   Write to a file, instead of STDOUT\r\n  ```\r\n\r\n### åŸºäºå®¹å™¨æ„å»ºé•œåƒ\r\n\r\nè¿™ç§æ–¹å¼ä¸»è¦ç”¨äºä¿å­˜å®¹å™¨çš„è¿è¡ŒçŠ¶æ€ï¼Œæ¯”å¦‚ï¼š\r\n\r\n- è°ƒè¯•å¼‚å¸¸é—®é¢˜\r\n- ä¿å­˜ CPU/å†…å­˜å¼‚å¸¸ç°åœº\r\n- å¤ç° Bug åœºæ™¯\r\n\r\nä½¿ç”¨ [docker commit](https://docs.docker.com/engine/reference/commandline/commit/) å‘½ä»¤å¯ä»¥å°†å®¹å™¨ä¿å­˜ä¸ºæ–°çš„é•œåƒï¼š\r\n\r\n```bash\r\nâ¯ docker commit --help\r\n\r\nUsage:  docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]\r\n\r\nCreate a new image from a container's changes\r\n\r\nAliases:\r\n  docker container commit, docker commit\r\n\r\nOptions:\r\n  -a, --author string    Author (e.g., \"John Hannibal Smith <hannibal@a-team.com>\")\r\n  -c, --change list      Apply Dockerfile instruction to the created image\r\n  -m, --message string   Commit message\r\n  -p, --pause            Pause container during commit (default true)\r\n```\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº†æ„å»º Docker é•œåƒçš„ä¸‰ç§æ–¹æ³•ï¼Œå…¶ä¸­[é€šè¿‡ Dockerfile æ„å»ºé•œåƒ](#ä½¿ç”¨-dockerfile-æ„å»ºé•œåƒæ¨è)æ˜¯æœ€æ¨èçš„æ–¹å¼ï¼Œå› ä¸ºå®ƒï¼š\r\n\r\n- è¿‡ç¨‹æ¸…æ™°é€æ˜\r\n- æ˜“äºç»´æŠ¤å’Œç‰ˆæœ¬æ§åˆ¶\r\n- å¯é‡å¤ä½¿ç”¨\r\n- é€‚åˆè‡ªåŠ¨åŒ–æ„å»º\r\n\r\nå»ºè®®ä½ ä»ç¼–å†™ç®€å•çš„ `Dockerfile` å¼€å§‹ï¼Œé€æ­¥æŒæ¡ Docker é•œåƒçš„æ„å»ºæŠ€å·§ã€‚\r\n",
    "number": 30,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2023-03-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:54:37Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/30",
    "jsonFilePath": "discussions/30-D_kwDONzrbkM4AeNcC.json",
    "markdownFilePath": "2023/3/30-D_kwDONzrbkM4AeNcC.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcE",
    "title": "æŒæ¡ä¹¦ç­¾æ–‡ä»¶ï¼šé«˜æ•ˆç®¡ç†æ”¶è—",
    "body": "ç½‘ç»œæµè§ˆæ—©å·²æˆä¸ºæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚é¢å¯¹æµ©å¦‚çƒŸæµ·çš„ç½‘é¡µä¿¡æ¯ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°ç®¡ç†å’Œæ£€ç´¢æˆä¸ºä¸€ä¸ªé‡è¦è¯¾é¢˜ã€‚å¹¸è¿çš„æ˜¯ï¼Œç°ä»£æµè§ˆå™¨éƒ½æä¾›äº†å¼ºå¤§çš„\"ä¹¦ç­¾\"åŠŸèƒ½æ¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–ææµè§ˆå™¨ä¹¦ç­¾æ–‡ä»¶çš„ç»“æ„ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°æŒæ¡å’Œè¿ç”¨è¿™ä¸€å®ç”¨å·¥å…·ã€‚\r\n\r\n## ä¹¦ç­¾æ–‡ä»¶çš„æ ¼å¼\r\n\r\nä¹¦ç­¾æ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„ `HTML` æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒè®°å½•äº†æ‚¨åœ¨æµè§ˆå™¨ä¸­ä¿å­˜çš„æ‰€æœ‰ç½‘å€ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€`URL`ã€æ·»åŠ æ—¶é—´ç­‰å…³é”®æ•°æ®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¹¦ç­¾æ–‡ä»¶ç¤ºä¾‹ï¼š\r\n\r\n```html\r\n<!DOCTYPE NETSCAPE-Bookmark-file-1>\r\n<!-- This is an automatically generated file. -->\r\n<DL><p>\r\n    <DT><H3 ADD_DATE=\"1634454000\" LAST_MODIFIED=\"1634454200\" PERSONAL_TOOLBAR_FOLDER=\"true\">ä¹¦ç­¾æ </H3>\r\n    <DL><p>\r\n        <DT><A HREF=\"https://www.example.com\" ADD_DATE=\"1634454300\" ICON=\"data:image/png;base64,...\" LAST_MODIFIED=\"1634454320\">ç¤ºä¾‹ç½‘ç«™</A>\r\n        <!-- æ›´å¤šä¹¦ç­¾... -->\r\n    </DL><p>\r\n</DL><p>\r\n```\r\n\r\n### æ ¸å¿ƒæ ‡ç­¾è§£æ\r\n\r\nä¹¦ç­¾æ–‡ä»¶ä½¿ç”¨ä»¥ä¸‹å‡ ä¸ªå…³é”® `HTML` æ ‡ç­¾æ¥ç»„ç»‡æ•°æ®ï¼š\r\n\r\n- `<DL>`ï¼šå®šä¹‰ä¹¦ç­¾åˆ—è¡¨çš„å®¹å™¨æ ‡ç­¾\r\n- `<DT>`ï¼šæ¯ä¸ªä¹¦ç­¾æ¡ç›®çš„æ ‡ç­¾\r\n- `<H3>`ï¼šç”¨äºæ ‡è¯†ä¹¦ç­¾æ–‡ä»¶å¤¹çš„æ ‡é¢˜\r\n- `<A>`ï¼šå­˜å‚¨å…·ä½“ä¹¦ç­¾ä¿¡æ¯ï¼ŒåŒ…å« `URL`ã€åç§°ç­‰å±æ€§\r\n\r\næ¯ä¸ªæ ‡ç­¾éƒ½æºå¸¦äº†ä¸°å¯Œçš„å±æ€§ä¿¡æ¯ï¼Œå¦‚æ·»åŠ æ—¶é—´ `ADD_DATE` å’Œæœ€åä¿®æ”¹æ—¶é—´ `LAST_MODIFIED` ç­‰ã€‚\r\n\r\n## ä¹¦ç­¾æ–‡ä»¶è§£ææµç¨‹\r\n\r\nè¦å°†ä¹¦ç­¾æ–‡ä»¶è½¬æ¢ä¸ºå¯ç”¨çš„æ•°æ®ç»“æ„ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š\r\n\r\n1. æ–‡ä»¶è§£æï¼šéå† `<H3>` æ ‡ç­¾è·å–æ–‡ä»¶å¤¹ç»“æ„\r\n2. å†…å®¹æå–ï¼šè§£æ `<DL>` æ ‡ç­¾ä¸‹çš„ä¹¦ç­¾åˆ—è¡¨\r\n3. è¯¦æƒ…è·å–ï¼šå¤„ç†æ¯ä¸ª `<DT>` æ ‡ç­¾ä¸­çš„å…·ä½“ä¹¦ç­¾ä¿¡æ¯\r\n4. å±‚çº§æ„å»ºï¼šé€šè¿‡çˆ¶å­å…³ç³»å»ºç«‹å®Œæ•´çš„ç›®å½•æ ‘\r\n5. æ•°æ®è½¬æ¢ï¼šå°†è§£æç»“æœè½¬æ¢ä¸ºæ ‡å‡† `JSON` æ ¼å¼\r\n\r\nè§£æåçš„æ•°æ®ç»“æ„ç¤ºä¾‹ï¼š\r\n\r\n```json\r\n{\r\n  \"title\": \"ä¹¦ç­¾æ \",\r\n  \"bookmarks\": [\r\n    {\r\n      \"title\": \"ç¤ºä¾‹ç½‘ç«™\",\r\n      \"url\": \"https://www.example.com\",\r\n      \"addAt\": \"2021-10-17T15:05:00+08:00\",\r\n      \"updateAt\": \"2021-10-17T15:05:20+08:00\"\r\n    }\r\n  ],\r\n  \"addAt\": \"2021-10-17T15:00:00+08:00\",\r\n  \"updateAt\": \"2021-10-17T15:03:20+08:00\"\r\n}\r\n```\r\n\r\n### è§£æä¹¦ç­¾æ–‡ä»¶\r\n\r\n```go\r\n// parseBookmarks extracts bookmarks from the goquery document and returns a slice of bookmark entries.\r\nfunc parseBookmarks(doc *goquery.Document) []Bookmark {\r\n    // initialize a map to store bookmarks with their titles as keys.\r\n    bookmarkMap := make(map[string]*Bookmark)\r\n\r\n    // helper function to parse timestamp.\r\n    parseTime := func(timestamp string) *time.Time {\r\n        if len(timestamp) == 0 {\r\n            return nil\r\n        }\r\n        ts, err := strconv.ParseInt(timestamp, 10, 64)\r\n        if err != nil {\r\n            fmt.Println(\"error parsing timestamp:\", err.Error())\r\n            return nil\r\n        }\r\n        t := time.Unix(ts, 0)\r\n        return &t\r\n    }\r\n\r\n    // iterate over each H3 element in the document representing bookmark titles.\r\n    doc.Find(\"H3\").Each(func(i int, header *goquery.Selection) {\r\n        // create a bookmark entry for the current H3 element.\r\n        bookmark := Bookmark{\r\n            Title:    header.Text(),\r\n            AddAt:    parseTime(header.AttrOr(\"add_date\", \"\")),\r\n            UpdateAt: parseTime(header.AttrOr(\"last_modified\", \"\")),\r\n        }\r\n\r\n        // check if the header has a sibling DL element containing bookmarks.\r\n        if dlNode := header.Next(); dlNode.Is(\"DL\") {\r\n            // iterate over each DT element representing sub-bookmark titles.\r\n            dlNode.ChildrenFiltered(\"DT\").Each(func(j int, dtNode *goquery.Selection) {\r\n                if aNode := dtNode.Children().First(); aNode.Is(\"A\") {\r\n                    // create a bookmark entry for each bookmark within the DL element.\r\n                    subBookmark := Bookmark{\r\n                        Title:    aNode.Text(),\r\n                        URL:      aNode.AttrOr(\"href\", \"\"),\r\n                        AddAt:    parseTime(aNode.AttrOr(\"add_date\", \"\")),\r\n                        UpdateAt: parseTime(aNode.AttrOr(\"last_modified\", \"\")),\r\n                    }\r\n                    bookmark.Bookmarks = append(bookmark.Bookmarks, subBookmark)\r\n                }\r\n            })\r\n        }\r\n\r\n        // check if the bookmark has a parent folder (H3 element).\r\n        if parentDL := header.Parent().Parent(); parentDL.Is(\"DL\") && parentDL.Prev().Is(\"H3\") {\r\n            // set the parent field for the current bookmark.\r\n            bookmark.Parent = parentDL.Prev().Text()\r\n        }\r\n\r\n        // add the bookmark to the map.\r\n        bookmarkMap[bookmark.Title] = &bookmark\r\n    })\r\n\r\n    // convert the map values to a slice and return.\r\n    bookmarks := make([]Bookmark, 0, len(bookmarkMap))\r\n    for _, bookmark := range bookmarkMap {\r\n        bookmarks = append(bookmarks, *bookmark)\r\n    }\r\n    return bookmarks\r\n}\r\n```\r\n\r\n### å»ºç«‹ä¹¦ç­¾çš„ç›®å½•æ ‘ç»“æ„\r\n\r\n```go\r\n// buildTree constructs the bookmark tree by finding the root folder and building the sub-trees.\r\nfunc buildTree(bookmarks []Bookmark) Bookmark {\r\n    // function to find the root folder by looking for a bookmark without a parent.\r\n    findRootFolder := func(bookmarks []Bookmark) *Bookmark {\r\n          for i := range bookmarks {\r\n            if bookmarks[i].Parent == \"\" {\r\n                return &bookmarks[i]\r\n            }\r\n        }\r\n        return nil\r\n    }\r\n\r\n    root := findRootFolder(bookmarks)\r\n    if root == nil {\r\n        fmt.Println(\"root folder not found\")\r\n        return Bookmark{}\r\n    }\r\n\r\n    // function to build the sub-tree recursively.\r\n    var buildSubTree func(parent *Bookmark)\r\n    buildSubTree = func(parent *Bookmark) {\r\n        for i := range bookmarks {\r\n            if bookmarks[i].Parent == parent.Title {\r\n                parent.Bookmarks = append(parent.Bookmarks, bookmarks[i])\r\n                buildSubTree(&parent.Bookmarks[len(parent.Bookmarks)-1])\r\n            }\r\n        }\r\n    }\r\n\r\n    // build the sub-tree for the root folder.\r\n    buildSubTree(root)\r\n    return *root\r\n}\r\n```\r\n\r\n## ä¹¦ç­¾æ•°æ®çš„å®é™…åº”ç”¨\r\n\r\næˆåŠŸè§£æä¹¦ç­¾æ–‡ä»¶åï¼Œæ‚¨å¯ä»¥å……åˆ†å‘æŒ¥æ•°æ®çš„ä»·å€¼ï¼š\r\n\r\n1. æ™ºèƒ½åˆ†ç±»ä¸ç®¡ç†\r\n\r\n   - åŸºäºè®¿é—®é¢‘ç‡è¿›è¡Œæ’åº\r\n   - æ ¹æ®å†…å®¹ç›¸å…³æ€§è‡ªåŠ¨åˆ†ç±»\r\n   - æ¸…ç†é‡å¤å’Œå¤±æ•ˆé“¾æ¥\r\n\r\n2. æ•°æ®å¤‡ä»½ä¸è¿ç§»\r\n\r\n   - å®šæœŸè‡ªåŠ¨å¤‡ä»½é‡è¦ä¹¦ç­¾\r\n   - è·¨è®¾å¤‡æ— ç¼åŒæ­¥\r\n   - å¿«é€Ÿæ¢å¤å†å²ä¹¦ç­¾\r\n\r\n3. åä½œä¸åˆ†äº«\r\n\r\n   - å›¢é˜Ÿä¹¦ç­¾åº“å…±äº«\r\n   - ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿ\r\n   - ç¤¾äº¤åŒ–ä¹¦ç­¾åˆ†äº«\r\n\r\n4. æ•°æ®åˆ†æ\r\n\r\n   - æµè§ˆä¹ æƒ¯åˆ†æ\r\n   - å…´è¶£åå¥½è¿½è¸ª\r\n   - æ—¶é—´ç®¡ç†ä¼˜åŒ–\r\n\r\n## æœ€å\r\n\r\nä¹¦ç­¾ç®¡ç†æ˜¯æå‡ç½‘ç»œä½¿ç”¨æ•ˆç‡çš„å…³é”®å·¥å…·ã€‚é€šè¿‡æ·±å…¥ç†è§£ä¹¦ç­¾æ–‡ä»¶çš„ç»“æ„å’Œè§£ææ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºæ›´æ™ºèƒ½ã€æ›´ä¸ªæ€§åŒ–çš„ä¹¦ç­¾ç®¡ç†ç³»ç»Ÿã€‚\r\n",
    "number": 31,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2023-07-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:55:00Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/31",
    "jsonFilePath": "discussions/31-D_kwDONzrbkM4AeNcE.json",
    "markdownFilePath": "2023/7/31-D_kwDONzrbkM4AeNcE.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcH",
    "title": "Excel æ•™ç¨‹ï¼šå¦‚ä½•ä½¿ç”¨å…¬å¼å–ä¸¤åˆ—çš„äº¤é›†",
    "body": "åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä½¿ç”¨ `Excel` åšæ•°æ®å¤„ç†ï¼Œå¦‚æ¯”è¾ƒã€ç­›é€‰ã€æ¸…æ´—ç­‰ã€‚**æ‰¾å‡ºä¸¤ä¸ªåˆ—ä¹‹é—´çš„äº¤é›†** è¿™ä¸ªæ“ä½œå¯ä»¥åœ¨è®¸å¤šæƒ…å†µä¸‹æ´¾ä¸Šç”¨åœºã€‚æœ¬æ–‡å°†å‘æ‚¨ä»‹ç»å¦‚ä½•ä½¿ç”¨å…¬å¼æ¥æ‰¾å‡ºä¸¤åˆ—çš„äº¤é›†ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å…¬å¼å¦‚ä¸‹ï¼š\r\n\r\n```excel\r\n=IF(ISNUMBER(MATCH(A1,$B:$B,0)),A1,\"\")\r\n```\r\n\r\n## å…¬å¼è§£è¯»\r\n\r\n### IF\r\n\r\n`IF` å‡½æ•°æ˜¯ `Excel` ä¸­çš„æ¡ä»¶å‡½æ•°ï¼Œç”¨äºåœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶æ‰§è¡Œä¸€ä¸ªæ“ä½œï¼Œå¦åˆ™æ‰§è¡Œå¦ä¸€ä¸ªæ“ä½œã€‚å…¬å¼çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š\r\n\r\n```excel\r\n=IF(æ¡ä»¶, æ¡ä»¶ä¸ºçœŸæ—¶çš„ç»“æœ, æ¡ä»¶ä¸ºå‡æ—¶çš„ç»“æœ)\r\n```\r\n\r\nåœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼Œæ¡ä»¶æ˜¯é€šè¿‡ `MATCH` å‡½æ•°å’Œ `ISNUMBER` å‡½æ•°çš„ç»„åˆæ¥ç¡®å®šçš„ï¼Œæˆ‘ä»¬å°†åœ¨åé¢è¯¦ç»†è®¨è®ºã€‚\r\n\r\n### ISNUMBER\r\n\r\n`ISNUMBER` å‡½æ•°æ˜¯ `Excel` ä¸­çš„åˆ¤æ–­å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ç»™å®šå€¼æ˜¯å¦ä¸ºæ•°å­—çš„å‡½æ•°ï¼Œå¦‚æœæ˜¯æ•°å­—åˆ™è¿”å› `TRUE`ï¼Œå¦åˆ™è¿”å› `FALSE`ã€‚å…¬å¼çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š\r\n\r\n```excel\r\n=ISNUMBER(å€¼)\r\n```\r\n\r\nåœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼Œå®ƒçš„ä½œç”¨æ˜¯éªŒè¯ `MATCH` å‡½æ•°çš„ç»“æœæ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—ã€‚\r\n\r\n### MATCH\r\n\r\n`MATCH` å‡½æ•°æ˜¯ `Excel` ä¸­çš„åŒ¹é…å‡½æ•°ï¼Œç”¨äºåœ¨ä¸€ä¸ªèŒƒå›´å†…æŸ¥æ‰¾æŸä¸ªå€¼ï¼Œå¹¶è¿”å›è¯¥å€¼åœ¨èŒƒå›´ä¸­çš„ç›¸åº”ä½ç½®ï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå®ƒå°†è¿”å›è¯¥é¡¹çš„ä½ç½®ï¼Œå¦åˆ™è¿”å›é”™è¯¯å€¼ `#N/A`ã€‚å…¬å¼çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š\r\n\r\n```excel\r\n=MATCH(è¦æŸ¥æ‰¾çš„å€¼, æŸ¥æ‰¾èŒƒå›´, [åŒ¹é…ç±»å‹])\r\n```\r\n\r\nåœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼Œ`MATCH` å‡½æ•°çš„ä»»åŠ¡æ˜¯æŸ¥æ‰¾ `A1` å•å…ƒæ ¼çš„å€¼æ˜¯å¦å­˜åœ¨äº `B` åˆ—ä¸­ã€‚\r\n\r\n## å…¬å¼çš„å·¥ä½œåŸç†\r\n\r\nç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†è¿™äº›å‡½æ•°ç»„åˆèµ·æ¥ï¼Œçœ‹çœ‹è¿™ä¸ªå…¬å¼æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š\r\n\r\n```excel\r\n=IF(ISNUMBER(MATCH(A1,$B:$B,0)),A1,\"\")\r\n```\r\n\r\n1. é¦–å…ˆï¼Œ`MATCH(A1,$B:$B,0)` æŸ¥æ‰¾ `A1` å•å…ƒæ ¼çš„å€¼æ˜¯å¦åœ¨ `B` åˆ—ä¸­æ‰¾åˆ°åŒ¹é…é¡¹ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå®ƒå°†è¿”å›åŒ¹é…é¡¹çš„ä½ç½®ï¼Œå¦åˆ™è¿”å› `#N/A`ã€‚\r\n2. æ¥ä¸‹æ¥ï¼Œ`ISNUMBER(MATCH(A1,$B:$B,0))` æ£€æŸ¥ `MATCH` å‡½æ•°çš„ç»“æœæ˜¯å¦ä¸ºæ•°å­—ã€‚å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè¿™ä¸ªè¡¨è¾¾å¼å°†è¿”å› `TRUE`ï¼Œå¦åˆ™è¿”å› `FALSE`ã€‚\r\n3. æœ€åï¼Œ`IF(ISNUMBER(MATCH(A1,$B:$B,0)),A1,\"\")` åˆ©ç”¨æ¡ä»¶å‡½æ•°ã€‚å¦‚æœ `ISNUMBER` å‡½æ•°è¿”å› `TRUE`ï¼Œåˆ™è¿”å› `A1` å•å…ƒæ ¼çš„å€¼ï¼ˆå³ `A1` å•å…ƒæ ¼çš„å†…å®¹ï¼‰ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸² \"\"ã€‚\r\n\r\n## å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå…¬å¼\r\n\r\nç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨è¿™ä¸ªå…¬å¼ã€‚\r\n\r\nå‡è®¾æ‚¨æœ‰ä¸€ä¸ª `Excel` å·¥ä½œè¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸¤åˆ—æ•°æ®ï¼šåˆ— `A` åŒ…å«è¦æ£€æŸ¥åŒ¹é…çš„å€¼ï¼Œåˆ— `B` åŒ…å«ç›®æ ‡èŒƒå›´ï¼š\r\n\r\n| A åˆ— | B åˆ— | C åˆ— |\r\n| ---- | ---- | ---- |\r\n| 1    | 2    |      |\r\n| 2    | 3    |      |\r\n| 3    | 4    |      |\r\n| 4    | 5    |      |\r\n| 5    | 6    |      |\r\n\r\n1. åœ¨ `C1` å•å…ƒæ ¼ä¸­è¾“å…¥å…¬å¼ `=IF(ISNUMBER(MATCH(A1,$B:$B,0)),A1,\"\")`ã€‚\r\n2. åœ¨ `C1` ä¸­è¾“å…¥å…¬å¼åï¼Œå°†é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨ `C1` å•å…ƒæ ¼çš„å³ä¸‹è§’ï¼Œç›´åˆ°å…‰æ ‡å˜ä¸ºä¸€ä¸ªé»‘è‰²åå­—ã€‚ç„¶åï¼Œç‚¹å‡»å¹¶æ‹–åŠ¨ä»¥å¡«å……ä¸‹é¢çš„å•å…ƒæ ¼ï¼Œç›´åˆ°æ‚¨å¤„ç†å®Œæ•´ä¸ªæ•°æ®é›†ã€‚\r\n\r\nå®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œ`C` åˆ—ä¸­å°†æ˜¾ç¤ºä¸¤åˆ—ä¹‹é—´çš„äº¤é›†ã€‚`C` åˆ—ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼éƒ½åŒ…å«åœ¨ `A` åˆ—å’Œ `B` åˆ—ä¸­éƒ½å­˜åœ¨çš„å€¼ã€‚å³ï¼š\r\n\r\n| A åˆ— | B åˆ— | C åˆ— |\r\n| ---- | ---- | ---- |\r\n| 1    | 2    |      |\r\n| 2    | 3    | 2    |\r\n| 3    | 4    | 3    |\r\n| 4    | 5    | 4    |\r\n| 5    | 6    | 5    |\r\n\r\nè¿™ä½¿æ‚¨èƒ½å¤Ÿè½»æ¾è¯†åˆ«å…±åŒå…ƒç´ ï¼Œæ— éœ€æ‰‹åŠ¨æ¯”è¾ƒæ¯ä¸ªå•å…ƒæ ¼ã€‚\r\n\r\n## æœ€å\r\n\r\nåœ¨æ•°æ®å¤„ç†çš„å·¥ä½œä¸­ï¼Œ`Excel` æ˜¯ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚å„ç§å‡½æ•°çš„ç»„åˆæä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æœ‰æ•ˆåœ°å¤„ç†å’Œç­›é€‰æ•°æ®ã€‚é€šè¿‡äº†è§£å’Œåˆ©ç”¨è¿™äº›å‡½æ•°ï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ `Excel` æ¥å¤„ç†å„ç§æ•°æ®åˆ†æä»»åŠ¡ï¼Œä»¥æé«˜æ•°æ®å¤„ç†çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚\r\n",
    "number": 32,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2023-09-01T08:00:00Z",
    "updatedAt": "2025-02-05T11:55:27Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/32",
    "jsonFilePath": "discussions/32-D_kwDONzrbkM4AeNcH.json",
    "markdownFilePath": "2023/9/32-D_kwDONzrbkM4AeNcH.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcK",
    "title": "Keep Using Short Password on macOS (2024)",
    "body": "![image](https://file.onnttf.site/2024/1/30/1.png)\r\n\r\nFollowing the release of **macOS Mojave 10.14**, Apple updated its password requirements to require users to set a password of at least 4 characters for their accounts. However, many people have become accustomed to using short passwords, such as `space`.\r\n\r\nThis article provides a solution for those who wish to keep using short passwords.\r\n\r\n## Step 1: Clear the password policy\r\n\r\nOpen the `Terminal` application and type the following command:\r\n\r\n```bash\r\npwpolicy -clearaccountpolicies\r\n```\r\n\r\nAfter pressing `Enter`, you will be prompted to enter the current password. It's important to note that the password you type is not visible. Simply press `Enter` when you have finished typing.\r\n\r\n![image](https://file.onnttf.site/2024/1/30/2.png)\r\n\r\nWhen the `Terminal` displays \"Clearing global account policies\", it will indicate that the password policy has been successfully cleared, as shown below:\r\n\r\n![image](https://file.onnttf.site/2024/1/30/3.png)\r\n\r\n## Step 2: Change your password\r\n\r\nTo change your password, click on the Apple logo in the top left corner of the screen, select **System Preferences** > **Users & Groups** and follow the on-screen instructions.\r\n\r\n![image](https://file.onnttf.site/2024/1/30/4.png)\r\n\r\nYou can find that there are no password requirements during this process.\r\n\r\nBy following these steps, users can bypass the enforced password restrictions and use short passwords, such as `space`.\r\n",
    "number": 33,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2024-01-30T16:22:37Z",
    "updatedAt": "2025-02-05T11:55:57Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/33",
    "jsonFilePath": "discussions/33-D_kwDONzrbkM4AeNcK.json",
    "markdownFilePath": "2024/1/33-D_kwDONzrbkM4AeNcK.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcM",
    "title": "å¤è€çš„è®°æ•°è‰ºæœ¯",
    "body": "åœ¨æ—¥å¸¸çš„ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ç½—é©¬æ•°å­—ï¼Œæ¯”å¦‚ `I`ã€`II`ã€`IV` ç­‰ã€‚ç„¶è€Œï¼Œé™¤äº†è¿™äº›è¾ƒå¸¸è§çš„ç½—é©¬æ•°å­—å¤–ï¼Œè¿˜å­˜åœ¨ä¸€äº›ç›¸å¯¹é™Œç”Ÿçš„ï¼Œå¦‚ `X`ã€`L`ã€`C`ã€`D`ã€`M` ç­‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥äº†è§£è¿™äº›ç½—é©¬æ•°å­—çš„ç»†èŠ‚ï¼Œæ­ç¤ºå®ƒä»¬èƒŒåè•´å«çš„æ–‡åŒ–å’Œå†å²å†…æ¶µã€‚\r\n\r\n## èµ·æºä¸å‘å±•\r\n\r\nç½—é©¬æ•°å­—æ˜¯ä¸€ç§èµ·æºäºå¤ç½—é©¬çš„æ•°å­—ç³»ç»Ÿï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œç½—é©¬æ•°å­—çš„ä½¿ç”¨èŒƒå›´é€æ¸æ‰©å¤§ï¼Œæ¶µç›–äº†ç»æµã€å»ºç­‘ã€æ–‡å­¦ç­‰å¤šä¸ªé¢†åŸŸã€‚åœ¨å¤ç½—é©¬çš„å…¬å…±å»ºç­‘ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è®¸å¤šåˆ»æœ‰ç½—é©¬æ•°å­—çš„çŸ³ç¢‘å’Œé›•å¡‘ï¼Œè¿™äº›æ•°å­—è®°å½•äº†å»ºç­‘çš„å…´å»ºå¹´ä»£å’Œé‡è¦äº‹ä»¶ã€‚\r\n\r\nç›´åˆ°ä¸­ä¸–çºªæ™šæœŸï¼Œå®ƒä»ç„¶æ˜¯æ•´ä¸ªæ¬§æ´²é€šå¸¸çš„ä¹¦å†™æ•°å­—çš„æ–¹å¼ã€‚ä» 14 ä¸–çºªå¼€å§‹ï¼Œç½—é©¬æ•°å­—å¼€å§‹è¢«é˜¿æ‹‰ä¼¯æ•°å­—å–ä»£ï¼Œä½†å®ƒä»¬ä»ç„¶åœ¨è®¸å¤šåœ°æ–¹ç•™ä¸‹äº†ç—•è¿¹ï¼Œæˆä¸ºå†å²ä¸è‰ºæœ¯çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚\r\n\r\n## åŸºæœ¬è§„åˆ™\r\n\r\nç½—é©¬æ•°å­—æ˜¯ç”¨æ‹‰ä¸å­—æ¯çš„å­—æ¯ç»„åˆå†™æˆçš„ï¼Œæ¯ä¸ªå­—æ¯éƒ½æœ‰ä¸€ä¸ªå›ºå®šçš„æ•´æ•°å€¼ï¼Œé€šè¿‡ç»„åˆè¿™äº›ç¬¦å·ï¼Œå¯ä»¥è¡¨ç¤ºå‡ºæ‰€æœ‰æ­£æ•´æ•°ï¼ˆ**ç½—é©¬æ•°å­—ä¸­æ²¡æœ‰ `0`**ï¼‰ï¼š\r\n\r\n| ç½—é©¬æ•°å­— | æ•°å€¼ |\r\n| -------- | ---- |\r\n| I        | 1    |\r\n| V        | 5    |\r\n| X        | 10   |\r\n| L        | 50   |\r\n| C        | 100  |\r\n| D        | 500  |\r\n| M        | 1000 |\r\n\r\nåœ¨ç»„åˆå­—ç¬¦æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦éµå¾ªä¸‹é¢å‡ ä¸ªè§„åˆ™ï¼š\r\n\r\n1. ç½—é©¬æ•°å­—çš„ä¹¦å†™æ˜¯**ä»å¤§åˆ°å°ï¼Œä»å·¦å¾€å³**\r\n2. ç¬¦å· `I`ã€`X`ã€`C`ã€`M` **æœ€å¤šåªèƒ½è¿ç»­é‡å¤ 3 æ¬¡**ï¼Œç¬¦å· `V`ã€`L`ã€`D` **ä¸èƒ½é‡å¤**\r\n\r\n   å¦‚ï¼š`I` è¡¨ç¤º `1`ã€`II` è¡¨ç¤º `2`ã€`III` è¡¨ç¤º `3`\r\n\r\n3. åœ¨è¾ƒå¤§çš„ç½—é©¬æ•°å­—çš„**å·¦ä¾§è®°ä¸Šè¾ƒå°çš„ç½—é©¬æ•°å­—**ï¼Œè¡¨ç¤º**å¤§æ•°å­—å‡å°æ•°å­—**\r\n\r\n   - å¤§æ•°å­—å·¦ä¾§çš„æ•°å­—å¿…é¡»ä¸ºä¸€ä½\r\n\r\n     å¦‚ï¼š`8` ç”¨ `VIII`ï¼Œä¸èƒ½ç”¨ `IIX` è¡¨ç¤º\r\n\r\n   - å¤§æ•°å­—å·¦ä¾§çš„æ•°å­—æœ‰é™åˆ¶ï¼Œä»…é™äº `I`ã€`X`ã€`C`ï¼Œ**å³åªèƒ½å‡ 1ã€å‡ 10ã€å‡ 100**\r\n\r\n     å¦‚ï¼š`99` ä¸èƒ½è¡¨ç¤ºæˆ `100-1`ï¼Œå³ `IC`ã€‚å› ä¸º `C` è¡¨ç¤ºçš„ `100` å’Œ `I` è¡¨ç¤ºçš„ `1` ä¹‹é—´è¶…è¿‡äº†ä¸€ä¸ªä½æ•°ã€‚`99` åº”è¯¥è¡¨ç¤ºæˆ `(100-10)+(10-1)`ï¼Œå³ `XCIX`\r\n\r\n4. åœ¨è¾ƒå¤§çš„ç½—é©¬æ•°å­—çš„**å³ä¾§è®°ä¸Šè¾ƒå°çš„ç½—é©¬æ•°å­—**ï¼Œè¡¨ç¤º**å¤§æ•°å­—åŠ å°æ•°å­—**\r\n\r\n   å¦‚ï¼š`VI` = `V` + `I` = `5` + `1`ï¼Œå³ `VI` è¡¨ç¤º `6`\r\n\r\n5. å¦‚æœæƒ³å°†æ•°å­—æ•°æ‰©å¤§ 1000 å€ï¼Œå¯ä»¥åœ¨ç½—é©¬æ•°å­—çš„ä¸Šæ–¹åŠ ä¸Šä¸€æ¡æ¨ªçº¿ï¼Œè¡¨ç¤ºå°†è¿™ä¸ªæ•°ä¹˜ä»¥ `1000`ï¼ŒåŒç†ï¼Œä¸¤æ¡æ¨ªçº¿åˆ™æ˜¯ä¹˜ä»¥ `1000000`\r\n\r\n   å¦‚ï¼š`VÌ…` = `5` Ã— `1000` = `5000`\r\n\r\n### ç¤ºä¾‹\r\n\r\n| ç½—é©¬æ•°å­— | å¯¹åº”å€¼ | ç½—é©¬æ•°å­— | å¯¹åº”å€¼ | ç½—é©¬æ•°å­— | å¯¹åº”å€¼ | ç½—é©¬æ•°å­— | å¯¹åº”å€¼ |\r\n| -------- | ------ | -------- | ------ | -------- | ------ | -------- | ------ |\r\n| I        | 1      | XI       | 11     | CI       | 101    | MI       | 1001   |\r\n| II       | 2      | XII      | 12     | CII      | 102    | MII      | 1002   |\r\n| III      | 3      | XIII     | 13     | CIII     | 103    | MIII     | 1003   |\r\n| IV       | 4      | XIV      | 14     | CIV      | 104    | MIV      | 1004   |\r\n| V        | 5      | XV       | 15     | CV       | 105    | MV       | 1005   |\r\n| VI       | 6      | XVI      | 16     | CVI      | 106    | MVI      | 1006   |\r\n| VII      | 7      | XVII     | 17     | CVII     | 107    | MVII     | 1007   |\r\n| VIII     | 8      | XVIII    | 18     | CVIII    | 108    | MVIII    | 1008   |\r\n| IX       | 9      | XIX      | 19     | CIX      | 109    | MIX      | 1009   |\r\n| X        | 10     | XX       | 20     | CX       | 110    | MX       | 1010   |\r\n\r\n## æ„ä¹‰ä¸æ–‡åŒ–ä¼ æ‰¿\r\n\r\nç½—é©¬æ•°å­—ä¸ä»…ä»…æ˜¯ä¸€ç§è®¡æ•°ç³»ç»Ÿï¼Œæ›´æ˜¯å¤ç½—é©¬æ–‡åŒ–çš„è±¡å¾ã€‚å®ƒä»¬è®°å½•äº†ä¸€ä¸ªå¼ºå¤§è€Œè¾‰ç…Œçš„å¸å›½çš„å…´è¡°ï¼Œæ‰¿è½½ç€å¤ä»£æ™ºè€…å¯¹æ•°å­¦å’Œç§‘å­¦çš„æ¢ç´¢ã€‚åœ¨ä»Šå¤©ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨åšç‰©é¦†ã€å†å²é—è¿¹ä»¥åŠè‰ºæœ¯å“ä¸­çœ‹åˆ°è¿™äº›æ•°å­—çš„ç—•è¿¹ï¼Œæ„Ÿå—åˆ°å¤ç½—é©¬æ–‡æ˜çš„é­…åŠ›ã€‚\r\n\r\n- é’Ÿè¡¨é¢æ¿\r\n- å›ä¸»å’Œæ•™çš‡çš„åå­—\r\n\r\n  å¦‚ï¼šElizabeth II of the United Kingdomã€Pope Benedict XVI\r\n\r\n- è‹±æ–‡ã€æ³•æ–‡ç­‰ä½¿ç”¨æ‹‰ä¸å­—æ¯çš„è¯­è¨€æ‰€å†™çš„ä¹¦ç±ã€æ–‡ä»¶çš„å·ç« èŠ‚ç¼–å·\r\n\r\n  å¦‚ï¼šVolume VIIã€Chapter XXIVã€Section VI.3\r\n\r\n- ç”µå½±ã€ç”µè§†èŠ‚ç›®å’Œå…¶ä»–è‰ºæœ¯ä½œå“çš„åˆ¶ä½œå¹´ä»½\r\n\r\n  å¦‚ï¼šRocky IIã€Myst III: Exile\r\n\r\næ€»çš„æ¥è¯´ï¼Œç½—é©¬æ•°å­—è™½ç„¶åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­è¢«æ·˜æ±°ï¼Œä½†å®ƒä»¬ä½œä¸ºå†å²çš„è§è¯è€…ï¼Œä»ç„¶åœ¨æ–‡åŒ–å’Œè‰ºæœ¯ä¸­å‘æŒ¥ç€ç‹¬ç‰¹çš„ä½œç”¨ã€‚é€šè¿‡æ·±å…¥äº†è§£è¿™ä¸ªå¤è€çš„æ•°å­—ç³»ç»Ÿï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å¤ä»£æ–‡æ˜çš„æ™ºæ…§ï¼ŒåŒæ—¶åœ¨ç°ä»£ç¤¾ä¼šä¸­ä¿ç•™å¹¶ä¼ æ‰¿è¿™ä¸€ç‹¬ç‰¹çš„æ•°å­¦é—äº§ã€‚\r\n",
    "number": 34,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2024-03-06T20:59:37Z",
    "updatedAt": "2025-02-05T11:56:23Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/34",
    "jsonFilePath": "discussions/34-D_kwDONzrbkM4AeNcM.json",
    "markdownFilePath": "2024/3/34-D_kwDONzrbkM4AeNcM.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcN",
    "title": "èšç„¦é—®é¢˜æœ¬è´¨",
    "body": "åœ¨è§£å†³é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸é™·å…¥ä¸€ç§é”™è§‰**ï¼šä¸“æ³¨äºè§£å†³çœ‹ä¼¼æ›´ä¸ºç›´æ¥æˆ–ç®€å•çš„é—®é¢˜ï¼Œå´å¿½ç•¥äº†é—®é¢˜çš„çœŸæ­£æœ¬è´¨**ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¸çŸ¥ä¸è§‰åœ°å°†æ³¨æ„åŠ›è½¬ç§»åˆ°ä¸€ä¸ª\"æ¬¡è¦\"çš„é—®é¢˜ä¸Šï¼Œè€Œå¿½ç•¥äº†é—®é¢˜çš„æ ¸å¿ƒã€‚\r\n\r\nè¿™ç§ç°è±¡ä¹Ÿè¢«ç§°ä¸ºï¼š**[XY Problem](https://en.wikipedia.org/wiki/XY_problem)**\r\n\r\n## ä»€ä¹ˆæ˜¯ XY é—®é¢˜\r\n\r\nXY Problem æŒ‡çš„æ˜¯ä¸€ä¸ªäººæå‡ºé—®é¢˜ `Y`ï¼Œä½†å®é™…ä¸Šä»–çœŸæ­£æƒ³è¦è§£å†³çš„é—®é¢˜æ˜¯ `X`ã€‚è€Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä»–é”™è¯¯åœ°è®¤ä¸ºé—®é¢˜ `Y` æ˜¯è§£å†³ `X` çš„æ­£ç¡®è·¯å¾„ï¼Œå¯¼è‡´ä»–æ‰€è·å¾—çš„å¸®åŠ©æ— æ³•è§£å†³ä»–å®é™…ä¸Šæƒ³è¦è§£å†³çš„é—®é¢˜ï¼Œ**æœ€ç»ˆæµªè´¹äº†æ—¶é—´å’Œç²¾åŠ›å´æ²¡æœ‰è§£å†³é—®é¢˜**ã€‚\r\n\r\nä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªäººæœ‰ä¸€å°æ‰“å°æœºæ— æ³•æ­£å¸¸å·¥ä½œã€‚ä»–æ¥è¯¢é—®å¦‚ä½•ä¿®å¤æ‰“å°æœº `Y`ï¼Œä½†å®é™…ä¸Šä»–å¯èƒ½çœŸæ­£éœ€è¦çš„æ˜¯æ‰“å°ä¸€äº›æ–‡ä»¶ `X`ã€‚æ‰€ä»¥ï¼Œå®é™…ä¸Šé—®é¢˜çš„æ ¸å¿ƒæ˜¯å¦‚ä½•è§£å†³æ— æ³•æ‰“å°æ–‡ä»¶çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¿®ç†æ‰“å°æœºã€‚\r\n\r\nå†ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªäººé—®ï¼š\"æˆ‘åº”è¯¥å¦‚ä½•ç”¨é”¤å­æŠŠé’‰å­æ•²è¿›å¢™é‡Œï¼Ÿ\"è¿™ä¸ªé—®é¢˜ `Y` çœ‹ä¼¼å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šï¼Œä»–å¯èƒ½çœŸæ­£æƒ³è¦è§£å†³çš„æ˜¯\"æˆ‘åº”è¯¥å¦‚ä½•æŒ‚ä¸€å¹…ç”»ï¼Ÿ\"è¿™ä¸ªæ›´æœ¬è´¨çš„é—®é¢˜æ˜¯å…³äºè£…é¥°å¢™é¢ `X`ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ä½¿ç”¨å·¥å…·ã€‚\r\n\r\nç®€è€Œè¨€ä¹‹ï¼Œ**æ²¡æœ‰å»é—®æ€ä¹ˆè§£å†³é—®é¢˜ `X`ï¼Œè€Œæ˜¯å»é—®è§£å†³æ–¹æ¡ˆ `Y` åº”è¯¥æ€ä¹ˆå»å®ç°å’Œæ“ä½œ**[^1]ã€‚\r\n\r\n[^1]: [X-Y Problem](https://coolshell.cn/articles/10804.html)\r\n\r\n## ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ XY é—®é¢˜\r\n\r\nXY Problem çš„æ ¸å¿ƒåœ¨äºæé—®è€…ä¸å›ç­”è€…ä¹‹é—´çš„æ²Ÿé€šä¸ç•…ï¼Œå¯¼è‡´äº†é—®é¢˜çš„è¯¯è§£å’Œæ··æ·†ã€‚è™½ç„¶æé—®è€…é€šå¸¸ä¼šæå‡ºä¸€ä¸ªé—®é¢˜ `Y`ï¼Œä½†å®é™…ä¸Šä»–ä»¬çœŸæ­£æƒ³è¦è§£å†³çš„é—®é¢˜å¯èƒ½æ˜¯å¦ä¸€ä¸ª `X`ã€‚è¿™ç§è¯¯è§£å¯èƒ½æ˜¯å› ä¸ºæé—®è€…æœªèƒ½æ¸…æ™°åœ°è¡¨è¾¾ä»–ä»¬çš„éœ€æ±‚ï¼Œæˆ–è€…å›ç­”è€…æœªèƒ½æ­£ç¡®ç†è§£æé—®è€…çš„çœŸå®æ„å›¾ã€‚\r\n\r\nå› æ­¤ï¼Œè™½ç„¶é—®é¢˜çœ‹èµ·æ¥ä¼¼ä¹æ˜¯æé—®è€…çš„é—®é¢˜ï¼Œä½† **XY Problem çš„äº§ç”Ÿå®é™…ä¸Šæ˜¯ç”±äºåŒæ–¹ä¹‹é—´çš„æ²Ÿé€šé—®é¢˜è€Œå¼•èµ·çš„**ã€‚\r\n\r\nXY Problem çš„äº§ç”Ÿå¾€å¾€æ˜¯å¤šç§å› ç´ ç»¼åˆä½œç”¨çš„ç»“æœï¼Œå¦‚ï¼š\r\n\r\n1. è¯¯è§£éœ€æ±‚ï¼šæé—®è€…å¯èƒ½å¯¹é—®é¢˜çš„æœ¬è´¨æœ‰è¯¯è§£ï¼Œå› æ­¤æå‡ºäº†ä¸å…¶çœŸæ­£éœ€æ±‚ä¸ç¬¦çš„é—®é¢˜ã€‚\r\n2. å‡è®¾æ€§æ€ç»´ï¼šæé—®è€…å¯èƒ½å‡è®¾é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ˜¯ç‰¹å®šçš„ï¼Œè€Œæ²¡æœ‰å¯¹é—®é¢˜è¿›è¡Œå……åˆ†çš„åˆ†æã€‚\r\n3. æ²Ÿé€šä¸ç•…ï¼šæé—®è€…æ²¡æœ‰æ¸…æ™°åœ°è¡¨è¾¾é—®é¢˜ï¼Œå¯¼è‡´å›ç­”è€…æ— æ³•ç†è§£é—®é¢˜çš„çœŸæ­£å«ä¹‰ã€‚\r\n4. é¢„è®¾å‡è®¾ï¼šæé—®è€…å¯èƒ½åŸºäºä»–ä»¬è‡ªå·±çš„å‡è®¾æˆ–ç†è§£æ¥æå‡ºé—®é¢˜ï¼Œè€Œæ²¡æœ‰è€ƒè™‘åˆ°å…¶ä»–äººçš„ç†è§£å¯èƒ½ä¸ä»–ä»¬ä¸åŒã€‚\r\n5. ä¸ç¡®å®šè‡ªå·±çš„éœ€æ±‚ï¼šæœ‰æ—¶å€™ï¼Œæé—®è€…æœ¬èº«å¯èƒ½ä¸æ¸…æ¥šè‡ªå·±çœŸæ­£æƒ³è¦è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œå› æ­¤æå‡ºäº†ä¸€ä¸ªè¡¨é¢é—®é¢˜è€Œä¸æ˜¯æ·±å…¥æ€è€ƒæ ¹æœ¬åŸå› ã€‚\r\n6. æ–‡åŒ–æˆ–è¯­è¨€å·®å¼‚ï¼šåœ¨è·¨æ–‡åŒ–æˆ–è·¨è¯­è¨€äº¤æµä¸­ï¼Œæé—®è€…å’Œå›ç­”è€…ä¹‹é—´çš„ç†è§£å­˜åœ¨å·®å¼‚ï¼Œå¯¼è‡´ XY Problem çš„äº§ç”Ÿã€‚\r\n\r\n## å¦‚ä½•é¿å… XY é—®é¢˜\r\n\r\né¿å… XY Problem ä¸ä»…æ˜¯æé—®è€…çš„è´£ä»»ï¼Œä½œä¸ºå›ç­”è€…ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥æ·±å…¥ç†è§£é—®é¢˜ï¼Œç„¶åå†äºˆä»¥å›åº”ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•ä»æé—®è€…å’Œå›ç­”è€…çš„è§’åº¦å‡ºå‘ï¼Œé‡‡å–ä¸€ç³»åˆ—æªæ–½æœ‰æ•ˆé¿å… XY Problem çš„å‘ç”Ÿã€‚\r\n\r\n### ç«™åœ¨æé—®è€…çš„è§’åº¦\r\n\r\nä½œä¸ºæé—®è€…ï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£é—®é¢˜ï¼Œå¹¶å¾—åˆ°æœ‰é’ˆå¯¹æ€§çš„è§£ç­”ï¼Œæé—®è€…éœ€è¦æ¸…æ¥šåœ°æ€è€ƒè‡ªå·±çš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯å‡ ç‚¹å»ºè®®ï¼š\r\n\r\n- æ˜ç¡®ä½ çš„ç›®æ ‡\r\n\r\n  åœ¨æé—®ä¹‹å‰ï¼ŒèŠ±äº›æ—¶é—´æ€è€ƒè‡ªå·±çœŸæ­£æƒ³è¦è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆã€‚è¿™æœ‰åŠ©äºé¿å…æ··æ·†ï¼Œå¹¶ä½¿å›ç­”æ›´åŠ æœ‰é’ˆå¯¹æ€§ã€‚\r\n\r\n- æè¿°ä½ çš„æƒ…å¢ƒ\r\n\r\n  åœ¨æé—®æ—¶ï¼Œæä¾›è¶³å¤Ÿçš„èƒŒæ™¯ä¿¡æ¯æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ ·æœ‰åŠ©äºå›ç­”è€…æ›´å¥½åœ°ç†è§£ä½ çš„é—®é¢˜ï¼Œå¹¶æä¾›æ›´åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚\r\n\r\n- æ˜ç¡®ä½ çš„éœ€æ±‚\r\n\r\n  ä¸è¦ä»…ä»…å…³æ³¨è¡¨é¢é—®é¢˜ï¼Œè€Œæ˜¯æ€è€ƒèƒŒåçš„åŸå› å’Œç›®çš„ã€‚è¿™æœ‰åŠ©äºå›ç­”è€…æ›´å¥½åœ°ç†è§£ä½ çš„éœ€æ±‚ï¼Œå¹¶ç»™äºˆæ›´è´´åˆ‡çš„å»ºè®®ã€‚\r\n\r\n- æ¥å—ä¸åŒçš„è§‚ç‚¹\r\n\r\n  æœ‰æ—¶å€™ï¼Œå›ç­”è€…å¯èƒ½ä¼šæå‡ºä¸€äº›ä½ æ²¡æœ‰è€ƒè™‘è¿‡çš„è§‚ç‚¹ã€‚è¦ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œå¹¶è®¤çœŸè€ƒè™‘è¿™äº›å»ºè®®æ˜¯å¦ç¬¦åˆä½ çš„éœ€æ±‚ã€‚\r\n\r\n### ç«™åœ¨å›ç­”è€…çš„è§’åº¦\r\n\r\né™¤äº†æé—®è€…è‡ªèº«ï¼Œä½œä¸ºå›ç­”è€…ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å­¦ä¼šè¯†åˆ« XY Problemï¼Œå¹¶ç»™äºˆæ°å½“çš„å›ç­”ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼š\r\n\r\n- æ˜ç¡®ç†è§£æé—®è€…çš„éœ€æ±‚\r\n\r\n  åœ¨å›ç­”é—®é¢˜ä¹‹å‰ï¼ŒåŠªåŠ›ç†è§£æé—®è€…çœŸæ­£æƒ³è¦è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆã€‚\r\n\r\n- æå‡ºè¿½é—®\r\n\r\n  å¦‚æœæ€€ç–‘æé—®è€…çš„é—®é¢˜æ˜¯å¦çœŸæ­£è¡¨è¾¾äº†ä»–çš„éœ€æ±‚ï¼Œå¯ä»¥é€‚å½“åœ°æå‡ºè¿½é—®ï¼Œå¸®åŠ©ä»–æ›´æ¸…æ¥šåœ°æè¿°é—®é¢˜ã€‚\r\n\r\n- ç»™äºˆå…¨é¢çš„å›ç­”\r\n\r\n  ä¸ä»…ä»…å›ç­”æé—®è€…ç›´æ¥æå‡ºçš„é—®é¢˜ï¼Œè¿˜è¦è€ƒè™‘ä»–èƒŒåçš„éœ€æ±‚ï¼Œç»™äºˆå…¨é¢çš„è§£ç­”ã€‚\r\n\r\næé—®è€…éœ€è¦æ›´æ¸…æ™°åœ°è¡¨è¾¾ä»–ä»¬çš„éœ€æ±‚å’Œé—®é¢˜ï¼Œè€Œå›ç­”è€…åˆ™éœ€è¦ç§¯æå€¾å¬å¹¶ç¡®ä¿å¯¹æé—®è€…çš„éœ€æ±‚æœ‰æ­£ç¡®çš„ç†è§£ã€‚åªæœ‰åŒæ–¹éƒ½åŠªåŠ›æ”¹å–„æ²Ÿé€šï¼Œæ‰èƒ½æœ‰æ•ˆåœ°é¿å… XY Problem çš„å‘ç”Ÿã€‚\r\n\r\n## æœ€å\r\n\r\nåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ° XY Problemã€‚å¸Œæœ›è¿™äº›å†…å®¹èƒ½å¤Ÿå¯¹æ‚¨æœ‰æ‰€å¯å‘ï¼Œå¹¶åœ¨æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œä¸­å‘æŒ¥ç§¯æçš„ä½œç”¨ã€‚\r\n",
    "number": 35,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2024-03-18T18:30:16Z",
    "updatedAt": "2025-02-05T11:56:44Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/35",
    "jsonFilePath": "discussions/35-D_kwDONzrbkM4AeNcN.json",
    "markdownFilePath": "2024/3/35-D_kwDONzrbkM4AeNcN.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcP",
    "title": "æ—¥å†è®¢é˜…æºæŒ‡åŒ—ï¼šåˆ›å»ºã€å‘å¸ƒã€ä½¿ç”¨",
    "body": "![image](https://file.onnttf.site/2024/4/18/1.jpg)\r\n\r\nåœ¨æ•°å­—åŒ–æ—¶ä»£ï¼Œæ—¥å†ä¸ä»…æ˜¯è§„åˆ’æ—¥å¸¸çš„å·¥å…·ï¼Œæ›´æ˜¯æé«˜ç”Ÿäº§åŠ›çš„ä¼™ä¼´ï¼Œå¸®åŠ©æˆ‘ä»¬åˆç†è§„åˆ’æ—¶é—´ï¼Œå®‰æ’ä»»åŠ¡ï¼ŒåŠæ—¶æé†’æˆ‘ä»¬å³å°†ä¸´è¿‘çš„é‡è¦äº‹ä»¶ã€‚éšç€æ™ºèƒ½æ‰‹æœºå’Œç”µè„‘çš„æ™®åŠï¼Œæ—¥å†åº”ç”¨ç¨‹åºä¹Ÿå·²ç»å‘å±•æˆä¸ºæˆ‘ä»¬ç”Ÿæ´»ä¸­çš„å¿…å¤‡å·¥å…·ã€‚ä½†æ˜¯ï¼Œéšç€ä¿¡æ¯é‡çš„æ¿€å¢ï¼Œä¼ ç»Ÿçš„æ‰‹åŠ¨æ—¥ç¨‹ç®¡ç†æ–¹å¼å·²é€æ¸æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚å› æ­¤ï¼Œæ—¥å†è®¢é˜…æºåº”è¿è€Œç”Ÿï¼Œå®ƒæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ—¶é—´ç®¡ç†ï¼Œå¸®åŠ©æˆ‘ä»¬é«˜æ•ˆåº”å¯¹å¤æ‚æ—¥ç¨‹ï¼Œæå‡æ—¶é—´ç®¡ç†çš„æ•ˆç‡ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»æ—¥å†è®¢é˜…æºçš„æ¦‚å¿µï¼Œå¹¶é˜é‡Šå¦‚ä½•åˆ›å»ºã€å‘å¸ƒä»¥åŠä½¿ç”¨æ—¥å†è®¢é˜…æºã€‚\r\n\r\n## ä»€ä¹ˆæ˜¯æ—¥å†è®¢é˜…æº\r\n\r\næ—¥å†è®¢é˜…æºæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œå‘å¸ƒçš„æ—¥å†æ•°æ®ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è®¢é˜…é“¾æ¥ï¼Œå°†å„ç±»æ—¥ç¨‹äº‹ä»¶è‡ªåŠ¨åŒæ­¥åˆ°ä¸ªäººæ—¥å†åº”ç”¨ç¨‹åºä¸­ï¼Œå®ç°æ—¥ç¨‹æ•°æ®çš„è‡ªåŠ¨æ›´æ–°å’ŒåŒæ­¥ã€‚ç”¨æˆ·å¯ä»¥æŒ‰éœ€è®¢é˜…å„ç§ç‰¹å®šçš„æ—¥å†ï¼Œå¦‚ä¸ªäººæ—¥ç¨‹ã€å‡æœŸã€ä½“è‚²èµ›äº‹ã€ä¼šè®®ç­‰ã€‚è¿™ç§æ–¹å¼è®©ç”¨æˆ·èƒ½è½»æ¾åœ°å°†å¤–éƒ¨æ—¥ç¨‹å’Œäº‹ä»¶ä¸ä¸ªäººæ—¥å†æ•´åˆåœ¨ä¸€èµ·ï¼Œå¤§å¤§æé«˜äº†æ—¶é—´ç®¡ç†å’Œæ—¥ç¨‹å®‰æ’çš„æ•ˆç‡ã€‚\r\n\r\n## å¸¸è§çš„æ—¥å†è®¢é˜…æº\r\n\r\n### Exchange Calendar\r\n\r\n[Exchange Calendar](https://support.microsoft.com/en-us/office/introduction-to-the-outlook-calendar-d94c5203-77c7-48ec-90a5-2e2bc10bd6f8) æ˜¯ Microsoft Exchange æä¾›çš„æ—¥å†æœåŠ¡ï¼Œé€šå¸¸ä¸ Microsoft Outlook é…åˆä½¿ç”¨ã€‚å®ƒæä¾›äº†å¼ºå¤§çš„å›¢é˜Ÿåä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬äº‹ä»¶ç®¡ç†å’Œæ—¥å†å…±äº«ç­‰ï¼Œä½¿å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿæ›´åŠ é«˜æ•ˆåœ°åè°ƒå’Œå®‰æ’å·¥ä½œæ—¥ç¨‹ã€‚\r\n\r\n### CalDAV\r\n\r\n[CalDAV](https://en.wikipedia.org/wiki/CalDAV) æ˜¯ [WebDAV](https://en.wikipedia.org/wiki/WebDAV) çš„æ‰©å±•ï¼Œå®ƒä¸ºå®¢æˆ·ç«¯è®¿é—®è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ—¥å†ä¿¡æ¯æä¾›äº†æ ‡å‡†ï¼Œç”¨äºå®¢æˆ·ç«¯è®¿é—®å’Œç®¡ç†æ—¥å†æ•°æ®ã€‚[CalDAV](https://en.wikipedia.org/wiki/CalDAV) å¯ä»¥ä¸å„ç§æ—¥å†åº”ç”¨å’ŒæœåŠ¡é›†æˆï¼ŒåŒ…æ‹¬ Google Calendarã€Apple Calendar å’Œ Microsoft Outlook ç­‰ã€‚é€šè¿‡ [CalDAV](https://en.wikipedia.org/wiki/CalDAV)ï¼Œç”¨æˆ·å¯ä»¥å®ç°å®æ—¶æ›´æ–°ã€å…±äº«æ—¥å†å’Œè®¿é—®æƒé™ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½ï¼Œä¸ºå¤šäººåä½œå’Œç»„ç»‡æ—¥ç¨‹å¸¦æ¥äº†ä¾¿åˆ©ã€‚\r\n\r\n### iCalendar\r\n\r\n[iCalendar](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/) æ˜¯ä¸€ç§é€šç”¨çš„æ—¥å†æ•°æ®äº¤æ¢æ ¼å¼ï¼Œè¢«å¹¿æ³›åº”ç”¨äºæ—¥å†åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®å…±äº«ã€‚[iCalendar](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/) æ–‡ä»¶çš„æ‰©å±•åé€šå¸¸ä¸º `.ical`ã€`.ics`ã€`.ifb` æˆ– `.iCalendar`ã€‚å®ƒä¼˜åŠ¿åœ¨äºç®€å•æ˜“ç”¨ï¼Œå¯ä»¥è½»æ¾åœ°ä¸å„ç§æ—¥å†åº”ç”¨ç¨‹åºå’Œè®¾å¤‡å…¼å®¹ã€‚[iCalendar](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/) æ–‡ä»¶å¯ä»¥åŒ…å«äº‹ä»¶ã€ä»»åŠ¡ã€æé†’ä»¥åŠå…¶ä»–æ—¥ç¨‹å®‰æ’ï¼Œä½¿å…¶æˆä¸ºä¸ªäººå’Œå›¢é˜Ÿæ—¥ç¨‹ç®¡ç†çš„ç†æƒ³é€‰æ‹©ã€‚\r\n\r\næ— è®ºæ˜¯ [iCalendar](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/)ã€[CalDAV](https://en.wikipedia.org/wiki/CalDAV) è¿˜æ˜¯ [Exchange Calendar](https://support.microsoft.com/en-us/office/introduction-to-the-outlook-calendar-d94c5203-77c7-48ec-90a5-2e2bc10bd6f8)ï¼Œè¿™äº›éƒ½æ˜¯é’ˆå¯¹æ—¥ç¨‹ç®¡ç†å’Œä¿¡æ¯å…±äº«é—®é¢˜è®¾è®¡çš„ä¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆã€‚\r\n\r\n- [iCalendar](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/) ä½œä¸ºé€šç”¨çš„æ—¥å†æ•°æ®äº¤æ¢æ ¼å¼ï¼Œé€‚ç”¨äºç®€å•çš„æ—¥ç¨‹å…±äº«å’Œå¯¼å…¥å¯¼å‡ºæ“ä½œ\r\n- [CalDAV](https://en.wikipedia.org/wiki/CalDAV) é€šè¿‡ Web åè®®å®ç°äº†è·¨å¹³å°å’Œè¿œç¨‹è®¿é—®çš„æ—¥å†åŒæ­¥\r\n- [Exchange Calendar](https://support.microsoft.com/en-us/office/introduction-to-the-outlook-calendar-d94c5203-77c7-48ec-90a5-2e2bc10bd6f8) åˆ™æä¾›äº†æ›´åŠ å®Œæ•´å’Œé«˜çº§çš„æ—¥å†æœåŠ¡ï¼Œé€‚ç”¨äºä¼ä¸šå’Œç»„ç»‡å†…éƒ¨çš„æ—¥ç¨‹å®‰æ’å’Œåä½œ\r\n\r\n## æ—¥å†è®¢é˜…æºçš„åˆ¶ä½œåŠä½¿ç”¨\r\n\r\næ¥ä¸‹æ¥çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥æ²¹ä»·è°ƒæ•´æ—¶é—´ä¸ºä¾‹ï¼Œè¯¦ç»†ä»‹ç»å¦‚ä½•åˆ›å»ºä¸€ä¸ª [iCalendar](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/) æ ¼å¼çš„æ—¥å†è®¢é˜…æºã€‚\r\n\r\n### iCalendar çš„åŸºæœ¬è§„èŒƒ\r\n\r\n`iCalendar` æ–‡ä»¶ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œå…¶ä¸­çš„æ¯ä¸ªéƒ¨åˆ†éƒ½ä»¥ `BEGIN:` æ ‡è¯†å¼€å¯ï¼Œå¹¶ä»¥ `END:` æ ‡è¯†ç»“æŸã€‚æ–‡ä»¶çš„ä¸»ä½“éƒ¨åˆ†æ˜¯ `VCALENDAR`ï¼Œå®ƒä½œä¸ºå®¹å™¨ï¼Œå®¹çº³äº†æ–‡ä»¶ä¸­çš„å…¶ä»–æ‰€æœ‰éƒ¨åˆ†ã€‚è¿™äº›éƒ¨åˆ†åŒ…æ‹¬ `VEVENT`ï¼ˆç”¨äºæè¿°äº‹ä»¶ï¼‰ã€`VTODO`ï¼ˆæ ‡è®°å¾…åŠäº‹é¡¹ï¼‰ã€`VJOURNAL`ï¼ˆç”¨äºè®°å½•æ—¥è®°ï¼‰ä»¥åŠ `VTIMEZONE`ï¼ˆè¡¨ç¤ºæ—¶åŒºä¿¡æ¯ï¼‰ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒåŒä¸€ç±»å‹çš„éƒ¨åˆ†å¯ä»¥åœ¨ `iCalendar` æ–‡ä»¶ä¸­å¤šæ¬¡å‡ºç°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªæ–‡ä»¶å¯èƒ½åŒ…å«å¤šä¸ª `VEVENT` éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†æè¿°äº†ä¸€ä¸ªç‹¬ç«‹çš„äº‹ä»¶ã€‚\r\n\r\nå¦‚æœæ‚¨å¸Œæœ›æ›´æ·±å…¥åœ°ç†è§£ `iCalendar` æ ‡å‡†è§„èŒƒï¼Œæˆ‘å»ºè®®æ‚¨æŸ¥é˜… [iCalendar - Design](https://en.wikipedia.org/wiki/iCalendar#Design) å’Œ [iCalendar (RFC 5545)](https://iCalendar.org/RFC-Specifications/iCalendar-RFC-5545/)ï¼Œè¿™ä¸¤ä¸ªé“¾æ¥å†…åŒ…å«äº†ä¸°å¯Œçš„å†…å®¹ã€‚\r\n\r\n### ç¼–å†™æ—¥å†è®¢é˜…æº\r\n\r\n```text\r\nBEGIN:VCALENDAR\r\nPRODID:-//onnttf.site//æ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨//CN\r\nVERSION:2.0\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\nX-WR-CALNAME:æ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨\r\nX-WR-TIMEZONE:Asia/Shanghai\r\nX-WR-CALDESC:æ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨ æ›´æ–°æ—¶é—´ï¼š2024-04-18 16:12:34\r\nBEGIN:VTIMEZONE\r\nTZID:Asia/Shanghai\r\nX-LIC-LOCATION:Asia/Shanghai\r\nBEGIN:STANDARD\r\nTZOFFSETFROM:+0800\r\nTZOFFSETTO:+0800\r\nTZNAME:CST\r\nDTSTART:19700101T000000\r\nEND:STANDARD\r\nEND:VTIMEZONE\r\nBEGIN:VEVENT\r\nUID:20240103T000000_oilprice@onnttf.site\r\nSUMMARY:æ²¹ä»·è°ƒæ•´\r\nDESCRIPTION:ç¬¬ 1 æ¬¡è°ƒæ•´\r\nDTSTART;VALUE=DATE:20240103\r\nDTEND;VALUE=DATE:20240103\r\nDTSTAMP:20240418T161234Z\r\nSTATUS:CONFIRMED\r\nCREATED;TZID=Asia/Shanghai:20240418T161234\r\nLAST-MODIFIED;TZID=Asia/Shanghai:20240418T161234\r\nSEQUENCE:0\r\nEND:VEVENT\r\nEND:VCALENDAR\r\n```\r\n\r\nä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„ `iCalendar` æ–‡ä»¶ï¼Œç”¨æ¥è¡¨ç¤ºä¸€æ¬¡æ²¹ä»·è°ƒæ•´çš„æƒ…å†µã€‚å®ƒåŒ…å«äº†æ—¥å†çš„åŸºæœ¬ä¿¡æ¯ã€æ—¶åŒºä¿¡æ¯ä»¥åŠä¸€ä¸ªäº‹ä»¶ï¼Œè®©æˆ‘ä»¬è§£è¯»ä¸€ä¸‹å…¶ä¸­çš„ä¿¡æ¯ï¼š\r\n\r\n- `PRODID`ï¼šè¿™ä¸ªå±æ€§ç”¨äºæŒ‡å®šç”Ÿæˆè¯¥æ—¥å†æ–‡ä»¶çš„äº§å“æ ‡è¯†ç¬¦ã€‚è¿™ä¸ªæ ‡è¯†ç¬¦é€šå¸¸ä»¥ `-//` ä½œä¸ºå‰ç¼€ï¼Œåè¾¹è·Ÿéšç€çš„æ˜¯ç»„ç»‡åæˆ–ç½‘ç«™åŸŸåï¼Œæœ€åæ˜¯äº§å“æˆ–æœåŠ¡çš„åç§°ä»¥åŠè¯­è¨€ä»£ç ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œ`PRODID` çš„å€¼ä¸º `-//onnttf.site//æ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨//CN`ï¼Œè¯´æ˜è¯¥æ—¥å†æ–‡ä»¶æ˜¯ç”± `onnttf.site` ç½‘ç«™ç”Ÿæˆçš„ï¼Œç”¨äºå±•ç¤ºæ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨ã€‚\r\n\r\n- `VERSION`ï¼šè¿™ä¸ªå±æ€§ä»£è¡¨ `iCalendar` è§„èŒƒçš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒçš„ç‰ˆæœ¬ä¸º `2.0`ã€‚\r\n\r\n- `CALSCALE`ï¼šè¿™éƒ¨åˆ†å®šä¹‰äº†æ—¥å†æ‰€é‡‡ç”¨çš„å†æ³•ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œ`GREGORIAN` è¡¨æ˜æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨å…¬å†ä½œä¸ºåŸºç¡€ã€‚\r\n\r\n- `METHOD`ï¼šè¿™ä¸ªå­—æ®µå®šä¹‰äº†åˆ›å»ºæˆ–æ›´æ–°æ—¥å†æ•°æ®çš„æ–¹æ³•ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ `PUBLISH`ï¼Œæ„å³æ˜¯å‘å¸ƒæ—¥å†ä¿¡æ¯ï¼Œå°†æ—¥å†æ•°æ®å‘é€ç»™è®¢é˜…è€…ã€‚\r\n\r\n- `VTIMEZONE`ï¼šè¿™éƒ¨åˆ†å®šä¹‰äº†æ—¶åŒºä¿¡æ¯ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ—¶åŒºè¢«è®¾ç½®ä¸º `Asia/Shanghai`ã€‚\r\n\r\n- `VEVENT`ï¼šè¿™éƒ¨åˆ†å®šä¹‰äº†äº‹ä»¶çš„å„ç§ä¿¡æ¯ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œè¿™ä¸ªäº‹ä»¶æ˜¯å…³äºæ²¹ä»·çš„è°ƒæ•´ã€‚\r\n\r\n  - `UID`ï¼šäº‹ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦\r\n  - `SUMMARY`ï¼šäº‹ä»¶çš„æ‘˜è¦ï¼Œç®€è¦æè¿°äº†äº‹ä»¶çš„å†…å®¹\r\n  - `DESCRIPTION`ï¼šäº‹ä»¶çš„è¯¦ç»†æè¿°\r\n  - `DTSTART`ï¼šäº‹ä»¶çš„å¼€å§‹æ—¶é—´\r\n  - `DTEND`ï¼šäº‹ä»¶çš„ç»“æŸæ—¶é—´\r\n  - `DTSTAMP`ï¼šäº‹ä»¶çš„æ—¶é—´æˆ³\r\n  - `STATUS`ï¼šäº‹ä»¶çš„çŠ¶æ€ï¼Œè¿™é‡Œæ˜¯ `CONFIRMED`ï¼Œè¡¨ç¤ºäº‹ä»¶å·²ç¡®è®¤\r\n  - `CREATED`ï¼šäº‹ä»¶çš„åˆ›å»ºæ—¶é—´\r\n  - `LAST-MODIFIED`ï¼šäº‹ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´\r\n  - `SEQUENCE`ï¼šäº‹ä»¶åºåˆ—å·\r\n\r\nç°åœ¨è®©æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€æ­¥ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºæ²¹ä»·è°ƒæ•´çš„å‡†ç¡®æ—¶é—´ã€‚æ‹¿åˆ°è¿™äº›ä¿¡æ¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§ä¸Šæ–‡ä¸­ `VEVENT` çš„æ ¼å¼æ¥ç¼–å†™æ–°çš„äº‹ä»¶ï¼Œæœ€åå°†è¿™äº›å†…å®¹ä¿å­˜åˆ° `oil_price_adjustment.ics` æ–‡ä»¶ä¸­ã€‚å®Œæˆåï¼Œå¯ä»¥åœ¨ [iCalendar Validator](https://iCalendar.org/validator.html) è¿›è¡Œæ ¼å¼æ ¡éªŒï¼Œä»¥ä¿è¯æˆ‘ä»¬çš„æ–‡ä»¶æ²¡æœ‰é”™è¯¯ã€‚\r\n\r\n### å‘å¸ƒæ—¥å†è®¢é˜…æº\r\n\r\nä¸ºäº†æ›´æ–¹ä¾¿åœ°è®©ä»–äººè®¢é˜…æ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ GitHub è¿›è¡Œæ‰˜ç®¡ã€‚æ­¥éª¤å…¶å®éå¸¸ç®€å•ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ª `Public` çš„ä»“åº“ï¼Œç„¶åå°†æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ `oil_price_adjustment.ics` æ–‡ä»¶ä¸Šä¼ è¿›å»ã€‚è¿™æ ·ï¼Œä»»ä½•äººéƒ½å¯ä»¥è½»æ¾è®¿é—®å¹¶è®¢é˜…è¿™ä»½æ—¶é—´è¡¨äº†ã€‚\r\n\r\né€šè¿‡å°†æ—¥å†è®¢é˜…æºå‘å¸ƒè‡³äº‘ç«¯ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¸¦æ¥æ›´å¤šçš„ä¾¿åˆ©æ€§å’Œå®æ—¶æ€§ã€‚è¿™ç§æ–¹å¼è®©ç”¨æˆ·éšæ—¶éšåœ°æµè§ˆå¹¶è®¢é˜…æ—¥å†ï¼Œä¸€æ—¦æºæ–‡ä»¶å‘ç”Ÿæ›´æ–°ï¼Œæ‰€æœ‰è®¢é˜…è€…çš„æ—¥å†å°±ä¼šè‡ªåŠ¨è¿›è¡ŒåŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚æ— è®ºç”¨æˆ·æ‰€ä½¿ç”¨çš„è®¾å¤‡å’Œå¹³å°æ˜¯ä»€ä¹ˆï¼Œä»–ä»¬éƒ½å¯ä»¥è½»æ¾è·å–åˆ°è¿™äº›æ—¥å†è®¢é˜…æºï¼Œä½¿å¾—ä¿¡æ¯çš„å…±äº«å’Œä¼ æ’­è¿‡ç¨‹å˜å¾—æ›´åŠ ä¾¿æ·å’Œé«˜æ•ˆã€‚\r\n\r\n### ä½¿ç”¨æ—¥å†è®¢é˜…æº\r\n\r\nä¸‹é¢ä»¥è‹¹æœæ—¥å†åº”ç”¨ä¸ºä¾‹ï¼š\r\n\r\n1. åœ¨æ‚¨çš„è‹¹æœç”µè„‘ä¸Šï¼Œæ‰¾åˆ°å¹¶æ‰“å¼€æ—¥å†åº”ç”¨ç¨‹åº\r\n2. ç‚¹å‡»èœå•æ ä¸­çš„\"æ–‡ä»¶\"é€‰é¡¹\r\n3. åœ¨æ–‡ä»¶èœå•ä¸­é€‰æ‹©\"æ–°å»ºæ—¥å†è®¢é˜…\"\r\n4. åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œè¾“å…¥æƒ³è¦è®¢é˜…çš„é“¾æ¥ï¼Œå¦‚ï¼š<https://raw.githubusercontent.com/onnttf/calendar/main/oil_price_adjustment.ics>\r\n5. è¾“å…¥å®Œæ¯•åï¼Œç‚¹å‡»\"è®¢é˜…\"å³å¯\r\n6. å¯ä»¥æ ¹æ®æ‚¨çš„ä¸ªäººéœ€è¦è°ƒæ•´ä¸€äº›è®¾ç½®ï¼Œä¾‹å¦‚æ›´æ–°é¢‘ç‡ã€æé†’è®¾ç½®ç­‰\r\n7. åœ¨å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œç‚¹å‡»\"å¥½\"æˆ–\"å®Œæˆ\"æŒ‰é’®ï¼Œå³å¯å®Œæˆè®¢é˜…\r\n\r\nç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨æ—¥å†åº”ç”¨ä¸­æŸ¥çœ‹æ²¹ä»·è°ƒæ•´ä¿¡æ¯äº†ã€‚\r\n\r\n> é™¤äº†è‹¹æœæ—¥å†åº”ç”¨ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æ”¯æŒè®¢é˜…åŠŸèƒ½çš„æ—¥å†åº”ç”¨ï¼Œä¾‹å¦‚ Google Calendarã€Microsoft Outlook ç­‰ã€‚\r\n\r\n## æœ€å\r\n\r\n2024 å¹´æ²¹ä»·è°ƒæ•´æ—¶é—´è¡¨å·²åˆ›å»ºå®Œæˆå¹¶ä¸Šä¼ è‡³[æ­¤ä»“åº“](https://github.com/onnttf/calendar)ã€‚è¯¥æ—¶é—´è¡¨å°†æŒç»­æ›´æ–°ï¼Œæ‚¨å¯é€šè¿‡è®¢é˜… <https://raw.githubusercontent.com/onnttf/calendar/main/oil_price_adjustment.ics> è·å–æœ€æ–°çš„è°ƒæ•´ä¿¡æ¯ã€‚\r\n",
    "number": 36,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2024-04-12T10:29:57Z",
    "updatedAt": "2025-02-05T11:57:17Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/36",
    "jsonFilePath": "discussions/36-D_kwDONzrbkM4AeNcP.json",
    "markdownFilePath": "2024/4/36-D_kwDONzrbkM4AeNcP.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcR",
    "title": "SMART åŸåˆ™ï¼šé«˜æ•ˆå®Œæˆç›®æ ‡çš„ç§˜è¯€",
    "body": "åœ¨å½“ä»Šå¿«èŠ‚å¥çš„ç”Ÿæ´»å’Œå·¥ä½œç¯å¢ƒä¸­ï¼Œè®¾å®šæ˜ç¡®ä¸”å¯å®ç°çš„ç›®æ ‡è‡³å…³é‡è¦ã€‚æ— è®ºæ˜¯ä¸ªäººå‘å±•ã€å›¢é˜Ÿåä½œï¼Œè¿˜æ˜¯ä¼ä¸šæˆ˜ç•¥ï¼Œå¥½çš„ç›®æ ‡éƒ½èƒ½æŒ‡å¼•æ–¹å‘ã€æé«˜æ•ˆç‡ã€ä¿ƒè¿›æˆåŠŸã€‚è€Œ SMART åŸåˆ™ï¼Œä½œä¸ºä¸€ç§è¢«å¹¿æ³›è®¤å¯çš„ç›®æ ‡è®¾å®šæ–¹æ³•ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç³»ç»ŸåŒ–çš„æ¡†æ¶ï¼Œå¸®åŠ©æˆ‘ä»¬åˆ¶å®šæ¸…æ™°ã€å¯è¡Œä¸”å¯Œæœ‰æŒ‘æˆ˜æ€§çš„ç›®æ ‡ã€‚\r\n\r\n## SMART åŸåˆ™æ˜¯ä»€ä¹ˆ\r\n\r\nSMART åŸåˆ™æ˜¯ä¸€ä¸ªç”¨äºè®¾å®šç›®æ ‡çš„æ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©äººä»¬åˆ›å»ºæ¸…æ™°ã€å¯è¡Œå’Œå¯è¡¡é‡çš„ç›®æ ‡ã€‚SMART ä»£è¡¨äº”ä¸ªå…³é”®æ ‡å‡†ï¼š\r\n\r\n- **Specificï¼ˆå…·ä½“ï¼‰**\r\n- **Measurableï¼ˆå¯è¡¡é‡ï¼‰**\r\n- **Achievableï¼ˆå¯å®ç°ï¼‰**\r\n- **Relevantï¼ˆç›¸å…³ï¼‰**\r\n- **Time-boundï¼ˆæœ‰æ—¶é™ï¼‰**\r\n\r\næ¯ä¸ªå…ƒç´ éƒ½ä¸ºç›®æ ‡è®¾å®šæä¾›äº†æ˜ç¡®çš„æŒ‡å¯¼ï¼Œä½¿å…¶æ›´å…·å¯æ“ä½œæ€§å’Œå®é™…æ„ä¹‰ã€‚\r\n\r\n### Specificï¼ˆå…·ä½“ï¼‰\r\n\r\nç›®æ ‡åº”è¯¥æ˜ç¡®å…·ä½“ï¼Œä¸èƒ½å«ç³Šå…¶è¾ã€‚è¿™æ„å‘³ç€ä½ è¦æ¸…æ¥šåœ°çŸ¥é“ä½ æƒ³è¦å®ç°ä»€ä¹ˆã€ä¸ºä»€ä¹ˆè¦å®ç°å®ƒï¼Œä»¥åŠå¦‚ä½•å»å®ç°å®ƒã€‚å…·ä½“çš„ç›®æ ‡èƒ½å¤Ÿæ›´å¥½åœ°å¼•å¯¼è¡ŒåŠ¨è®¡åˆ’ï¼Œé¿å…è¿·å¤±æ–¹å‘ã€‚\r\n\r\nç¤ºä¾‹ï¼šç›¸æ¯”äº\"æˆ‘è¦é”»ç‚¼\"ï¼Œä¸€ä¸ªå…·ä½“çš„ç›®æ ‡æ˜¯\"æˆ‘è¦æ¯å‘¨å»å¥èº«æˆ¿ 3 æ¬¡ï¼Œæ¯æ¬¡é”»ç‚¼ 1 ä¸ªå°æ—¶\"ã€‚\r\n\r\n### Measurableï¼ˆå¯è¡¡é‡ï¼‰\r\n\r\nç›®æ ‡éœ€è¦æœ‰å¯è¡¡é‡çš„æ ‡å‡†ï¼Œè¿™æ ·æ‰èƒ½è¿½è¸ªè¿›å±•å¹¶è¯„ä¼°æ˜¯å¦è¾¾æˆäº†ç›®æ ‡ã€‚ä½¿ç”¨æ•°é‡ã€é¢‘ç‡ã€ç™¾åˆ†æ¯”ç­‰å…·ä½“æ•°æ®æ¥è¡¡é‡ã€‚\r\n\r\nç¤ºä¾‹ï¼šå¦‚æœç›®æ ‡æ˜¯\"å¢åŠ é”€å”®é¢\"ï¼Œé‚£ä¹ˆå¯è¡¡é‡çš„ç›®æ ‡æ˜¯\"åœ¨ä¸‹å­£åº¦å†…å°†é”€å”®é¢æé«˜ 20%\"ã€‚\r\n\r\n### Achievableï¼ˆå¯å®ç°ï¼‰\r\n\r\nç›®æ ‡åº”è¯¥æ˜¯ç°å®ä¸”å¯å®ç°çš„ã€‚è®¾å®šä¸€ä¸ªå¯ä»¥é€šè¿‡åŠªåŠ›è¾¾æˆçš„ç›®æ ‡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé¥ä¸å¯åŠçš„ç›®æ ‡ã€‚è¿™éœ€è¦è¯„ä¼°ç°æœ‰èµ„æºã€èƒ½åŠ›å’Œæ—¶é—´ã€‚\r\n\r\nç¤ºä¾‹ï¼šå¦‚æœä½ ç›®å‰æ²¡æœ‰è·‘æ­¥ä¹ æƒ¯ï¼Œè®¾å®š\"åœ¨ 3 ä¸ªæœˆå†…è·‘å®Œé©¬æ‹‰æ¾\"å¯èƒ½ä¸åˆ‡å®é™…ï¼Œä¸€ä¸ªå¯å®ç°çš„ç›®æ ‡å¯èƒ½æ˜¯\"åœ¨ 3 ä¸ªæœˆå†…å®Œæˆ 5 å…¬é‡Œè·‘æ­¥\"ã€‚\r\n\r\n### Relevantï¼ˆç›¸å…³ï¼‰\r\n\r\nç›®æ ‡åº”è¯¥ä¸æ›´å¤§çš„è®¡åˆ’æˆ–é•¿æœŸæ„¿æ™¯ç›¸å…³è”ï¼Œç¡®ä¿ä½ çš„åŠªåŠ›æ–¹å‘ä¸€è‡´ã€‚ç›¸å…³çš„ç›®æ ‡æ›´æœ‰æ„ä¹‰ï¼Œèƒ½å¤Ÿæ¿€å‘æŒä¹…çš„åŠ¨åŠ›ã€‚\r\n\r\nç¤ºä¾‹ï¼šå¦‚æœä½ çš„èŒä¸šç›®æ ‡æ˜¯æˆä¸ºä¸€åæ•°æ®ç§‘å­¦å®¶ï¼Œé‚£ä¹ˆå­¦ä¹  `Python` ç¼–ç¨‹è¯­è¨€å°±æ˜¯ä¸€ä¸ªç›¸å…³çš„ç›®æ ‡ã€‚\r\n\r\n### Time-boundï¼ˆæœ‰æ—¶é™ï¼‰\r\n\r\nç›®æ ‡éœ€è¦æœ‰æ˜ç¡®çš„æˆªæ­¢æ—¥æœŸï¼Œè¿™æ ·ä½ æ‰èƒ½æœ‰ç´§è¿«æ„Ÿå¹¶åˆç†å®‰æ’æ—¶é—´ã€‚è®¾å®šæ—¶é™å¯ä»¥é˜²æ­¢æ‹–å»¶ï¼Œç¡®ä¿åœ¨ç‰¹å®šæ—¶é—´å†…å®Œæˆç›®æ ‡ã€‚\r\n\r\nç¤ºä¾‹ï¼šè®¾å®šä¸€ä¸ªå…·ä½“çš„æ—¶é—´è¡¨ï¼Œæ¯”å¦‚\"æˆ‘è¦åœ¨æ˜å¹´å¹´åº•å‰å®Œæˆæˆ‘çš„å°è¯´åˆç¨¿\"ï¼Œè€Œä¸æ˜¯ç®€å•åœ°è¯´\"æˆ‘æƒ³å†™ä¸€æœ¬ä¹¦\"ã€‚\r\n\r\n## å¦‚ä½•åº”ç”¨ SMART åŸåˆ™\r\n\r\n### ç›®æ ‡è®¾å®š\r\n\r\né¦–å…ˆï¼Œæ ¹æ® SMART åŸåˆ™è®¾å®šå…·ä½“çš„ç›®æ ‡ï¼Œç¡®ä¿ç›®æ ‡ç¬¦åˆäº”ä¸ªæ ‡å‡†ã€‚\r\n\r\n### è¡ŒåŠ¨è®¡åˆ’\r\n\r\nåˆ¶å®šè¯¦ç»†çš„è¡ŒåŠ¨è®¡åˆ’ï¼ŒåŒ…æ‹¬æ¯å¤©æˆ–æ¯å‘¨éœ€è¦å®Œæˆçš„å…·ä½“ä»»åŠ¡ã€‚\r\n\r\n### è¿›åº¦è·Ÿè¸ª\r\n\r\nå®šæœŸæ£€æŸ¥ç›®æ ‡çš„è¿›å±•ï¼Œæ ¹æ®éœ€è¦è°ƒæ•´ç­–ç•¥å’Œæ–¹æ³•ã€‚\r\n\r\n### åé¦ˆå’Œè°ƒæ•´\r\n\r\næ ¹æ®å®é™…è¿›å±•å’Œåé¦ˆï¼Œä¸æ–­ä¼˜åŒ–ç›®æ ‡å’Œè¡ŒåŠ¨è®¡åˆ’ï¼Œç¡®ä¿æœ€ç»ˆè¾¾æˆç›®æ ‡ã€‚\r\n\r\n**ç›®æ ‡å¹¶éä¸€æˆä¸å˜ï¼Œå®ƒä»¬å¯èƒ½éšç€æ‚¨çš„æƒ…å†µå’Œä¼˜å…ˆçº§å˜åŒ–è€Œè¿›è¡Œè°ƒæ•´å’Œä¿®è®¢ã€‚å› æ­¤éœ€è¦å®šæœŸå®¡æŸ¥ç›®æ ‡ï¼Œè¯„ä¼°è¿›åº¦ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œä»¥ç¡®ä¿å®ƒä»¬ä»ç„¶ç›¸å…³ä¸”å¯å®ç°ã€‚**\r\n\r\n## æœ€å\r\n\r\nSMART åŸåˆ™æ˜¯ä¸€ä¸ªç®€å•å´æœ‰æ•ˆçš„ç›®æ ‡è®¾å®šå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°å®Œæˆç›®æ ‡ã€‚å¦‚æœä½ æ­£åœ¨åŠªåŠ›å®ç°è‡ªå·±çš„ç›®æ ‡ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ SMART åŸåˆ™ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦èƒ½å¸®åŠ©ä½ ã€‚\r\n",
    "number": 37,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2024-05-28T20:19:17Z",
    "updatedAt": "2025-02-05T11:57:40Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/37",
    "jsonFilePath": "discussions/37-D_kwDONzrbkM4AeNcR.json",
    "markdownFilePath": "2024/5/37-D_kwDONzrbkM4AeNcR.md"
  },
  {
    "id": "D_kwDONzrbkM4AeNcT",
    "title": "Go ç¼–ç¨‹å…¥é—¨ï¼šä»å®è·µä¸­å­¦ä¹ æ ¸å¿ƒæ¦‚å¿µ",
    "body": "åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä»£ç å®æˆ˜ï¼Œæ·±å…¥å­¦ä¹  `Go` è¯­è¨€çš„æ ¸å¿ƒæ¦‚å¿µä¸æœ€ä½³å®è·µã€‚ä¸ä»…å¸¦ä½ å¤¯å®åŸºç¡€ï¼Œè¿˜å°†è®©ä½ åˆ‡èº«æ„Ÿå—åˆ° `Go` åœ¨é«˜æ•ˆå¹¶å‘å¤„ç†å’Œæ¨¡å—åŒ–è®¾è®¡ä¸Šçš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼Œå¸®åŠ©ä½ è½»æ¾æŒæ¡è¿™ä¸€å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ã€‚\r\n\r\n## å®Œæ•´ä»£ç \r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n    \"context\"\r\n    \"errors\"\r\n    \"fmt\"\r\n    \"math/rand\"\r\n    \"sync\"\r\n    \"time\"\r\n)\r\n\r\n// Bug è¡¨ç¤ºä¸€ä¸ªè½¯ä»¶ç¼ºé™·\r\ntype Bug struct {\r\n    ID          int\r\n    Priority    Priority\r\n    Type        BugType\r\n    Description string\r\n}\r\n\r\n// Priority è¡¨ç¤º bug çš„ä¼˜å…ˆçº§\r\ntype Priority int\r\n\r\nconst (\r\n    Low Priority = iota + 1\r\n    Medium\r\n    High\r\n    Critical\r\n)\r\n\r\nfunc (p Priority) String() string {\r\n    return [...]string{\"\", \"Low\", \"Medium\", \"High\", \"Critical\"}[p]\r\n}\r\n\r\n// BugType è¡¨ç¤º bug çš„ç±»å‹\r\ntype BugType string\r\n\r\nconst (\r\n    UIBug       BugType = \"UI\"\r\n    BackendBug  BugType = \"Backend\"\r\n    DatabaseBug BugType = \"Database\"\r\n    APIBug      BugType = \"API\"\r\n)\r\n\r\n// Result è¡¨ç¤ºå¤„ç† bug çš„ç»“æœ\r\ntype Result struct {\r\n    BugID int\r\n    Error error\r\n}\r\n\r\nvar (\r\n    ErrProcessingFailed = errors.New(\"å¤„ç†å¤±è´¥\")\r\n    ErrTimeout          = errors.New(\"å¤„ç†è¶…æ—¶\")\r\n)\r\n\r\n// BugProcessor å®šä¹‰äº†å¤„ç† bug çš„æ¥å£\r\ntype BugProcessor interface {\r\n    Process(context.Context, Bug) Result\r\n}\r\n\r\n// SimpleBugProcessor æ˜¯ BugProcessor çš„ä¸€ä¸ªç®€å•å®ç°\r\ntype SimpleBugProcessor struct{}\r\n\r\nfunc (p SimpleBugProcessor) Process(ctx context.Context, b Bug) Result {\r\n    // æ¨¡æ‹Ÿå¤„ç†æ—¶é—´\r\n    processingTime := time.Duration(rand.Intn(10000)) * time.Millisecond\r\n    select {\r\n    case <-time.After(processingTime):\r\n        // æ¨¡æ‹Ÿå¤„ç†æˆåŠŸæˆ–å¤±è´¥\r\n        if rand.Float32() < 0.1 {\r\n            return Result{BugID: b.ID, Error: ErrProcessingFailed}\r\n        }\r\n        fmt.Printf(\"å¤„ç† %s bug #%dï¼ˆä¼˜å…ˆçº§ï¼š%sï¼‰ï¼š%s\\n\", b.Type, b.ID, b.Priority, b.Description)\r\n    return Result{BugID: b.ID, Error: nil}\r\n    case <-ctx.Done():\r\n        return Result{BugID: b.ID, Error: ErrTimeout}\r\n    }\r\n}\r\n\r\n// Notifier å®šä¹‰äº†å‘é€é€šçŸ¥çš„æ¥å£\r\ntype Notifier interface {\r\n    Notify(message string) error\r\n}\r\n\r\n// EmailNotifier é€šè¿‡é‚®ä»¶å‘é€é€šçŸ¥\r\ntype EmailNotifier struct {\r\n    To string\r\n}\r\n\r\nfunc (e EmailNotifier) Notify(message string) error {\r\n    fmt.Printf(\"å‘é€é‚®ä»¶åˆ° %sï¼š%s\\n\", e.To, message)\r\n    return nil\r\n}\r\n\r\n// BugManager ç®¡ç† bug å¤„ç†å’Œé€šçŸ¥\r\ntype BugManager struct {\r\n    processor BugProcessor\r\n    notifiers []Notifier\r\n}\r\n\r\nfunc NewBugManager(processor BugProcessor, notifiers ...Notifier) *BugManager {\r\n    return &BugManager{\r\n        processor: processor,\r\n        notifiers: notifiers,\r\n    }\r\n}\r\n\r\nfunc (bm *BugManager) ProcessBugs(ctx context.Context, bugs []Bug) (int, int) {\r\n    results := make(chan Result, len(bugs))\r\n    var wg sync.WaitGroup\r\n\r\n    for _, bug := range bugs {\r\n        wg.Add(1)\r\n        go func(b Bug) {\r\n            defer wg.Done()\r\n            results <- bm.processor.Process(ctx, b)\r\n        }(bug)\r\n    }\r\n\r\n    go func() {\r\n        wg.Wait()\r\n        close(results)\r\n    }()\r\n\r\n    successCount, failCount := 0, 0\r\n    for result := range results {\r\n        if result.Error != nil {\r\n            failCount++\r\n            fmt.Printf(\"Bug #%d å¤„ç†å¤±è´¥ï¼š%v\\n\", result.BugID, result.Error)\r\n        } else {\r\n            successCount++\r\n        }\r\n    }\r\n\r\n    return successCount, failCount\r\n}\r\n\r\nfunc (bm *BugManager) NotifyAll(message string) {\r\n    for _, notifier := range bm.notifiers {\r\n    if err := notifier.Notify(message); err != nil {\r\n        fmt.Printf(\"é€šçŸ¥å¤±è´¥ï¼š%v\\n\", err)\r\n    }\r\n    }\r\n}\r\n\r\nfunc generateBugs(n int) []Bug {\r\n    bugs := make([]Bug, n)\r\n    types := []BugType{UIBug, BackendBug, DatabaseBug, APIBug}\r\n    priorities := []Priority{Low, Medium, High, Critical}\r\n\r\n    for i := 0; i < n; i++ {\r\n        bugs[i] = Bug{\r\n            ID:          i + 1,\r\n            Priority:    priorities[rand.Intn(len(priorities))],\r\n            Type:        types[rand.Intn(len(types))],\r\n            Description: fmt.Sprintf(\"Bug %d æè¿°\", i+1),\r\n    }\r\n    }\r\n    return bugs\r\n}\r\n\r\n// bugTypeStats ç»Ÿè®¡ä¸åŒç±»å‹ bug çš„æ•°é‡\r\nfunc bugTypeStats(bugs []Bug) map[BugType]int {\r\n    stats := make(map[BugType]int)\r\n    for _, bug := range bugs {\r\n        stats[bug.Type]++\r\n    }\r\n    return stats\r\n}\r\n\r\nfunc main() {\r\n    rand.Seed(time.Now().UnixNano())\r\n\r\n    developer := \"å°æ˜\"\r\n    bugCount := 20\r\n\r\n    bugs := generateBugs(bugCount)\r\n\r\n    fmt.Printf(\"%s æœ‰ %d ä¸ª bug éœ€è¦å¤„ç†ï¼\\n\", developer, bugCount)\r\n\r\n    // æ˜¾ç¤º bug ç±»å‹ç»Ÿè®¡\r\n    stats := bugTypeStats(bugs)\r\n    fmt.Println(\"\\n==== Bug ç±»å‹ç»Ÿè®¡ ====\")\r\n    for bugType, count := range stats {\r\n        fmt.Printf(\"  %sï¼š%d\\n\", bugType, count)\r\n    }\r\n\r\n    manager := NewBugManager(\r\n        SimpleBugProcessor{},\r\n        EmailNotifier{To: \"xiaoming@example.com\"},\r\n    )\r\n\r\n    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)\r\n    defer cancel()\r\n\r\n    fmt.Println(\"\\n==== å¼€å§‹å¤„ç† Bugs ====\")\r\n    successCount, failCount := manager.ProcessBugs(ctx, bugs)\r\n\r\n    fmt.Printf(\"\\nå¤„ç†ç»“æœç»Ÿè®¡ï¼š\\n\")\r\n    fmt.Printf(\"æˆåŠŸï¼š%d\\n\", successCount)\r\n    fmt.Printf(\"å¤±è´¥ï¼š%d\\n\", failCount)\r\n\r\n    manager.NotifyAll(fmt.Sprintf(\"Bug å¤„ç†å®Œæˆã€‚æˆåŠŸï¼š%dï¼Œå¤±è´¥ï¼š%d\", successCount, failCount))\r\n}\r\n```\r\n\r\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€æ­¥è§£æè¿™äº›åŠŸèƒ½çš„å®ç°ä»£ç ã€‚\r\n\r\n## ä»£ç ç»“æ„ä¸æ ¸å¿ƒåŠŸèƒ½è§£æ\r\n\r\nåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œå®ç°äº† `Bug` çš„åˆ›å»ºã€ç»Ÿè®¡å’Œå¤„ç†ï¼Œä»¥åŠå‘é€é€šçŸ¥çš„åŠŸèƒ½ã€‚æ¶µç›–äº†å¤§éƒ¨åˆ†çš„ `Go` è¯­è¨€ç‰¹æ€§ã€‚\r\n\r\n### æ•°æ®ç»“æ„ä¸ç±»å‹å®šä¹‰\r\n\r\n- å®šä¹‰äº† `Bug`ã€`Priority` å’Œ `BugType` ç­‰åŸºæœ¬æ•°æ®ç»“æ„å’Œç±»å‹ï¼Œæå‡ä»£ç å¯è¯»æ€§ä¸ç±»å‹å®‰å…¨ï¼š\r\n\r\n  - `Bug` ç»“æ„ä½“å°è£…äº†æ¯ä¸ª `Bug` çš„ `ID`ã€ä¼˜å…ˆçº§ã€ç±»å‹ä»¥åŠæè¿°ä¿¡æ¯\r\n  - `Priority` ä½¿ç”¨è‡ªå®šä¹‰çš„æ•´æ•°ç±»å‹è¡¨ç¤ºï¼Œå¹¶é€šè¿‡å¸¸é‡è¿›è¡Œç­‰çº§åˆ’åˆ†ï¼ˆå¦‚ `Low`ã€`Medium`ã€`High`ã€`Critical`ï¼‰ã€‚åŒæ—¶å®ç°äº† `String` æ–¹æ³•ï¼Œä½¿å¾—åœ¨è¾“å‡ºæ—¶èƒ½å¤Ÿæ˜¾ç¤ºæ›´å…·å¯è¯»æ€§çš„ä¼˜å…ˆçº§åç§°\r\n  - `BugType` ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹ï¼Œå®šä¹‰äº† `Bug` çš„å››ç§å¸¸è§åˆ†ç±»ï¼š`UIBug`ã€`BackendBug`ã€`DatabaseBug` å’Œ `APIBug`\r\n\r\n- åˆ©ç”¨ `slice` å’Œ `map` çš„ç»„åˆï¼Œç®€åŒ–æ•°æ®çš„ç»„ç»‡ä¸ç®¡ç†\r\n\r\n### æ¥å£ä¸å®ç°\r\n\r\né¡¹ç›®é€šè¿‡ `BugProcessor` å’Œ `Notifier` æ¥å£è§£è€¦äº† `Bug` å¤„ç†è¿‡ç¨‹å’Œå¤„ç†ç»“æœçš„é€šçŸ¥æµç¨‹ã€‚\r\n\r\n- `BugProcessor` æ¥å£å®šä¹‰äº† `Process` æ–¹æ³•ï¼Œè¡¨ç¤ºå¦‚ä½•å¤„ç†ä¸€ä¸ª `Bug`\r\n\r\n  `SimpleBugProcessor` æ˜¯å…¶å®ç°ï¼Œæ¨¡æ‹Ÿäº†å¤„ç†æ—¶é—´ï¼Œå¹¶éšæœºæ¨¡æ‹Ÿå¤„ç†æˆåŠŸæˆ–å¤±è´¥ã€‚\r\n\r\n- `Notifier` æ¥å£åˆ™ç”¨äºé€šçŸ¥çš„å‘é€\r\n\r\n  `EmailNotifier` å®ç°äº†é€šè¿‡ç”µå­é‚®ä»¶å‘é€ `Bug` å¤„ç†ç»“æœçš„åŠŸèƒ½ã€‚\r\n\r\né€šè¿‡è¿™ç§æ¥å£ä¸å®ç°åˆ†ç¦»çš„è®¾è®¡ï¼Œå¯ä»¥è½»æ¾æ‰©å±•å¤„ç†é€»è¾‘å’Œé€šçŸ¥æ–¹å¼ã€‚\r\n\r\n### å¹¶å‘ä¸ä»»åŠ¡ç®¡ç†\r\n\r\nå¹¶å‘æ˜¯ `Go` è¯­è¨€çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ `goroutines` æ¥å¹¶å‘å¤„ç† bugï¼Œ`sync.WaitGroup` åˆ™å¸®åŠ©æˆ‘ä»¬ç®¡ç†è¿™äº›å¹¶å‘ä»»åŠ¡çš„æ‰§è¡Œæµç¨‹ã€‚\r\n\r\næ¯ä¸ª bug çš„å¤„ç†è¿‡ç¨‹éƒ½æ˜¯é€šè¿‡ `goroutine` æ¥æ‰§è¡Œï¼Œåˆ©ç”¨ `channel` æ¥ä¼ é€’å¤„ç†ç»“æœã€‚\r\n`sync.WaitGroup` ä¿è¯äº†ä¸»ç¨‹åºèƒ½å¤Ÿç­‰å¾…æ‰€æœ‰å¹¶å‘ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åå†è¿›è¡Œç»Ÿè®¡å’Œåç»­æ“ä½œã€‚\r\n\r\n### ä¸Šä¸‹æ–‡ç®¡ç†\r\n\r\n`context` åŒ…çš„ä½¿ç”¨å±•ç¤ºäº†å¦‚ä½•åœ¨å¹¶å‘ç¨‹åºä¸­ç®¡ç†è¶…æ—¶ä¸å–æ¶ˆæ“ä½œã€‚åœ¨ `ProcessBugs` æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ `context.WithTimeout` æ¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå½“ä»»åŠ¡å¤„ç†æ—¶é—´è¿‡é•¿æ—¶ä¼šè‡ªåŠ¨è§¦å‘å–æ¶ˆï¼Œé¿å…æ— é™åˆ¶çš„ç­‰å¾…ã€‚è¿™ç§è¶…æ—¶æ§åˆ¶æœºåˆ¶å¯ä»¥æœ‰æ•ˆé˜²æ­¢ç³»ç»Ÿç”±äºæŸä¸ªä»»åŠ¡é˜»å¡è€Œé™·å…¥å¡é¡¿ã€‚\r\n\r\n### é”™è¯¯å¤„ç†\r\n\r\né”™è¯¯å¤„ç†åœ¨ `Go` ç¼–ç¨‹ä¸­è‡³å…³é‡è¦ã€‚åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œå¤„ç†è¿‡ç¨‹ä¸­ä¼šè¿”å›è‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ï¼Œå¦‚ `ErrProcessingFailed`ï¼ˆå¤„ç†å¤±è´¥ï¼‰å’Œ `ErrTimeout`ï¼ˆå¤„ç†è¶…æ—¶ï¼‰ã€‚åœ¨ `ProcessBugs` æ–¹æ³•ä¸­ï¼Œæ ¹æ®ä¸åŒçš„é”™è¯¯ç±»å‹ï¼Œç¨‹åºè¾“å‡ºç›¸åº”çš„å¤±è´¥ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œè®¡æ•°ï¼Œæœ€ç»ˆé€šè¿‡ `NotifyAll` æ–¹æ³•å‘é€é€šçŸ¥ï¼Œå‘ŠçŸ¥å¤„ç†ç»“æœã€‚\r\n\r\n### æ¨¡å—åŒ–è®¾è®¡ä¸æ‰©å±•æ€§\r\n\r\né¡¹ç›®ä¸­å„æ¨¡å—ä¹‹é—´é€šè¿‡æ¥å£ç›¸äº’è§£è€¦ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾æ›¿æ¢ `SimpleBugProcessor` ä¸ºæ›´å¤æ‚çš„å¤„ç†é€»è¾‘ï¼Œæˆ–è€…é€šè¿‡å®ç°æ–°çš„ `Notifier`ï¼ˆå¦‚çŸ­ä¿¡é€šçŸ¥ï¼‰æ¥å¢åŠ é€šçŸ¥æ¸ é“ã€‚\r\n\r\nå„ä¸ªæ¨¡å—çš„èŒè´£å•ä¸€ä¸”æ˜ç¡®ï¼Œç¬¦åˆé¢å‘æ¥å£ç¼–ç¨‹çš„æ€æƒ³ï¼Œè¿™ä¸ä»…æå‡äº†ä»£ç çš„å¯è¯»æ€§ï¼Œè¿˜ä¸ºæ—¥åçš„ç»´æŠ¤ä¸æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚\r\n\r\n## æ€»ç»“\r\n\r\né€šè¿‡ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬æ·±å…¥å®è·µäº† `Go` è¯­è¨€çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒåŒ…æ‹¬æ•°æ®ç»“æ„è®¾è®¡ã€æ¥å£ä¸å®ç°çš„è§£è€¦ã€å¹¶å‘å¤„ç†ã€ä¸Šä¸‹æ–‡ç®¡ç†ä»¥åŠé”™è¯¯å¤„ç†ç­‰å†…å®¹ã€‚\r\n\r\nä»£ç å±•ç¤ºäº† `Go` åœ¨é«˜æ•ˆå¹¶å‘å¤„ç†å’Œæ¨¡å—åŒ–è®¾è®¡ä¸Šçš„ä¼˜åŠ¿ï¼š\r\n\r\n- ç»“æ„æ¸…æ™°\r\n- èŒè´£æ˜ç¡®\r\n- å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§\r\n\r\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿™ç§è®¾è®¡ä¸ä»…æå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œè¿˜ä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å¥ å®šäº†åŸºç¡€ï¼Œå……åˆ†ä½“ç°äº† `Go` è¯­è¨€çš„ç®€æ´ä¸é«˜æ•ˆã€‚\r\n",
    "number": 38,
    "labels": {
      "nodes": []
    },
    "category": {
      "id": "DIC_kwDONzrbkM4Cmnbf",
      "name": "Show and tell",
      "slug": "show-and-tell",
      "emoji": ":raised_hands:",
      "emojiHTML": "<div>ğŸ™Œ</div>"
    },
    "author": {
      "login": "onnttf"
    },
    "authorAssociation": "OWNER",
    "createdAt": "2024-08-22T17:58:21Z",
    "updatedAt": "2025-02-05T11:58:05Z",
    "repository": {
      "id": "R_kgDONzrbkA",
      "url": "https://github.com/onnttf/blog"
    },
    "url": "https://github.com/onnttf/blog/discussions/38",
    "jsonFilePath": "discussions/38-D_kwDONzrbkM4AeNcT.json",
    "markdownFilePath": "2024/8/38-D_kwDONzrbkM4AeNcT.md"
  }
]

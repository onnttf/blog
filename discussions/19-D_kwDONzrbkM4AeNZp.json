{"id":"D_kwDONzrbkM4AeNZp","title":"10 分钟创建你的第一个 CocoaPods 公有库","body":"想让你的代码被全世界的开发者使用吗？本文将手把手教你创建、配置并发布一个 `CocoaPods` 公有库。\r\n\r\n## 注册 CocoaPods 账号\r\n\r\n### 创建账号\r\n\r\n```bash\r\n# 使用 --verbose 参数可以看到详细的注册过程，方便排查问题\r\n$ pod trunk register {你的邮箱} '{你的用户名}' --verbose\r\n# ... 更多连接信息 ...\r\nopening connection to trunk.cocoapods.org:443...\r\n[!] Please verify the session by clicking the link in the verification email\r\n```\r\n\r\n### 验证邮箱\r\n\r\n1. 打开邮箱查收标题为 **[CocoaPods] Confirm your session** 的验证邮件\r\n2. 点击验证链接，完成注册\r\n\r\n### 验证注册状态\r\n\r\n```bash\r\n$ pod trunk me\r\n  - Name:     YOURNAME\r\n  - Email:    YOURMAIL\r\n  - Since:    May 23rd, 2018 03:02\r\n  - Pods:\r\n    - PodName\r\n  - Sessions:\r\n    - June 20th, 08:17     -        October 26th, 08:39. IP: xxx.xxx.xxx.xxx\r\n```\r\n\r\n## 创建公有 Pod 库\r\n\r\n### 创建 GitHub 仓库\r\n\r\n1. 在 `GitHub` 创建新仓库\r\n2. 记录重要信息\r\n\r\n   - 仓库主页：<<https://github.com/{GitHub> 用户名}/{Pod 名称}>\r\n   - Clone 地址：<<https://github.com/{GitHub> 用户名}/{Pod 名称}.git>\r\n\r\n### 使用 pod 脚手架创建 pod 库\r\n\r\n```bash\r\n$ pod lib create {YOURPODNAME}\r\nCloning `https://github.com/CocoaPods/pod-template.git` into `YOURPODNAME`.\r\nConfiguring YOURPODNAME template.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\n\r\n------------------------------\r\n\r\nTo get you started we need to ask a few questions, this should only take a minute.\r\n\r\nIf this is your first time we recommend running through with the guide:\r\n - https://guides.cocoapods.org/making/using-pod-lib-create.html\r\n ( hold cmd and click links to open in a browser. )\r\n\r\n\r\nWhat platform do you want to use?? [ iOS / macOS ]\r\n > {iOS}\r\n\r\nWhat language do you want to use?? [ Swift / ObjC ]\r\n > {ObjC}\r\n\r\nWould you like to include a demo application with your library? [ Yes / No ]\r\n > {Yes}\r\n\r\nWhich testing frameworks will you use? [ Specta / Kiwi / None ]\r\n > {None}\r\n\r\nWould you like to do view based testing? [ Yes / No ]\r\n > {No}\r\n\r\nWhat is your class prefix?\r\n > {Prefix}\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\nsecurity: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.\r\n\r\nRunning pod install on your new library.\r\n\r\nAnalyzing dependencies\r\nFetching podspec for `YOURPODNAME` from `../`\r\nDownloading dependencies\r\nInstalling YOURPODNAME (0.1.0)\r\nGenerating Pods project\r\nIntegrating client project\r\n```\r\n\r\n### 配置 .podspec\r\n\r\n`.podspec` 文件是你的 `Pod` 库的核心配置信息，包含了版本、作者、依赖等重要元数据，需要仔细配置每一项：\r\n\r\n```ruby\r\nPod::Spec.new do |s|\r\n  s.name             = '{Pod 名称}'              # Pod 名称\r\n  s.version          = '0.1.0'                # 版本号\r\n  s.summary          = '一句话描述你的 Pod'      # 简短描述\r\n  s.description      = <<-DESC                # 详细描述\r\n                       详细描述你的 Pod 能做什么，\r\n                       有什么特点和优势。\r\n                       DESC\r\n  s.homepage         = 'https://github.com/{GitHub 用户名}/{Pod 名称}'\r\n  s.license          = { :type => 'MIT', :file => 'LICENSE' }\r\n  s.author           = { '{作者}' => '{邮箱}' }\r\n  s.source           = { :git => '你的仓库地址.git', :tag => s.version.to_s }\r\n  s.ios.deployment_target = '8.0'\r\n  s.source_files = '{Pod 名称}/Classes/**/*'\r\nend\r\n```\r\n\r\n### 验证与发布\r\n\r\n1. 验证配置\r\n\r\n   ```bash\r\n   pod lib lint\r\n   ```\r\n\r\n2. 提交代码\r\n\r\n   ```bash\r\n   git add .\r\n   git commit -m \"初始化 Pod 库\"\r\n   git push\r\n   ```\r\n\r\n3. 创建发布版本\r\n\r\n   ```bash\r\n   git tag -a 0.1.0 -m '第一个版本'\r\n   git push origin --tags\r\n   ```\r\n\r\n4. 发布到 `CocoaPods`\r\n\r\n   ```bash\r\n   $ pod trunk push\r\n\r\n   [!] Found podspec `YOURPODNAME.podspec`\r\n   Updating spec repo `master`\r\n   Validating podspec\r\n   -> YOURPODNAME (0.1.0)\r\n       - NOTE  | xcodebuild:  note: Using new build system\r\n       - NOTE  | [iOS] xcodebuild:  note: Planning build\r\n       - NOTE  | [iOS] xcodebuild:  note: Constructing build description\r\n       - NOTE  | xcodebuild:  note: Execution policy exception registration failed and was skipped: Error Domain=NSPOSIXErrorDomain Code=1 \"Operation not permitted\"\r\n       - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically.\r\n\r\n   Updating spec repo `master`\r\n\r\n   --------------------------------------------------------------------------------\r\n   🎉  Congrats\r\n\r\n   🚀  YOURPODNAME (0.1.0) successfully published\r\n   📅  June 18th, 10:30\r\n   🌎  https://cocoapods.org/pods/YOURPODNAME\r\n   👍  Tell your friends!\r\n   --------------------------------------------------------------------------------\r\n   ```\r\n\r\n## 如何在项目中集成你的 Pod\r\n\r\n至此，你已成功发布了自己的第一个 `CocoaPods` 公有库，让我们看看其他开发者如何使用它：\r\n\r\n1. 在项目的 `Podfile` 中添加依赖\r\n\r\n   ```ruby\r\n   # 使用最新版本\r\n   pod '{你的 Pod 名称}'\r\n\r\n   # 或指定版本\r\n   pod '{你的 Pod 名称}', '~> 0.1.0'\r\n   ```\r\n\r\n2. 执行安装命令\r\n\r\n   ```bash\r\n   pod install\r\n   ```\r\n\r\n3. 在代码中导入并使用\r\n\r\n   ```objc\r\n   // Objective-C\r\n   #import <你的 Pod 名称/头文件名称.h>\r\n\r\n   // Swift\r\n   import 你的 Pod 名称\r\n   ```\r\n\r\n## 最后\r\n\r\n你可以通过以下方式来持续改进你的库：\r\n\r\n- 添加详细的文档说明和使用示例\r\n- 不断优化代码质量\r\n- 及时处理用户反馈和 `issue`\r\n- 定期发布新版本修复问题和增加功能\r\n\r\n希望你能在开源社区收获成长，让更多开发者受益于你的代码！\r\n","number":19,"labels":{"nodes":[]},"category":{"id":"DIC_kwDONzrbkM4Cmnbf","name":"Show and tell","slug":"show-and-tell","emoji":":raised_hands:","emojiHTML":"<div>🙌</div>"},"author":{"login":"onnttf"},"authorAssociation":"OWNER","createdAt":"2019-06-21T08:00:00Z","updatedAt":"2025-02-05T10:59:38Z","repository":{"id":"R_kgDONzrbkA","url":"https://github.com/onnttf/blog"},"url":"https://github.com/onnttf/blog/discussions/19","updatedAtTimestamp":1738753178,"jsonFilePath":"discussions/19-D_kwDONzrbkM4AeNZp.json","markdownFilePath":"2019/6/19-D_kwDONzrbkM4AeNZp.md"}

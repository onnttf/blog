{"id":"D_kwDONzrbkM4AeLdH","title":"åŠ¨æ€æ›´æ¢ App å›¾æ ‡","body":"ä» `iOS 10.3` å¼€å§‹ï¼ŒApple æä¾›äº†åŠ¨æ€æ›´æ¢åº”ç”¨å›¾æ ‡çš„åŠŸèƒ½ã€‚è¿™ä¸ªåŠŸèƒ½è®©æˆ‘ä»¬å¯ä»¥åœ¨ä¸å‘ç‰ˆçš„æƒ…å†µä¸‹æ›´æ¢ App å›¾æ ‡ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›é™åˆ¶éœ€è¦æ³¨æ„ï¼š\r\n\r\n1. æ‰€æœ‰å¯æ›¿æ¢çš„å›¾æ ‡å¿…é¡»é¢„å…ˆæ‰“åŒ…åˆ°é¡¹ç›®ä¸­\r\n2. æ›´æ¢å›¾æ ‡æ—¶éœ€è¦è·å¾—ç”¨æˆ·æˆæƒï¼ˆè™½ç„¶æœ‰ç»•è¿‡æ–¹æ³•ä½†ä¸å»ºè®®ä½¿ç”¨ï¼‰\r\n\r\nå°½ç®¡å­˜åœ¨è¿™äº›é™åˆ¶ï¼Œä½†è¿™ä¸ªåŠŸèƒ½ä»ç„¶èƒ½ä¸ºç”¨æˆ·ä½“éªŒå¸¦æ¥æ˜¾è‘—æå‡ï¼š\r\n\r\n1. åœ¨èŠ‚å‡æ—¥æœŸé—´å¯ä»¥æ— éœ€å‘ç‰ˆå³å¯æ›´æ¢åº”å­£å›¾æ ‡\r\n2. åœ¨é‡å¤§æ´»åŠ¨æœŸé—´å¯ä»¥åŠæ—¶æ›´æ¢è¥é”€å›¾æ ‡ï¼Œæ— éœ€æ‹…å¿ƒå‘ç‰ˆé£é™©\r\n\r\n**æ³¨æ„**ï¼šæ›´æ¢å›¾æ ‡ä¼šåŒæ­¥æ›´æ–°åº”ç”¨åœ¨é€šçŸ¥æ ã€è®¾ç½®ç•Œé¢ç­‰æ‰€æœ‰åœºæ™¯ä¸‹çš„å›¾æ ‡ã€‚\r\n\r\n## å‡†å¤‡æ›¿æ¢å›¾æ ‡\r\n\r\néœ€è¦å°†å¾…æ›¿æ¢çš„å›¾æ ‡æ–‡ä»¶æ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆä¸èƒ½æ”¾åœ¨ `.xcassets` ä¸­ï¼‰ã€‚å»ºè®®æŒ‰å¦‚ä¸‹æ ¼å¼å‘½åå›¾æ ‡æ–‡ä»¶ï¼š\r\nä¾‹å¦‚ `<xx20x20@2x.png>`ã€`<xx20x20@3x.png>` ç­‰ï¼Œè¿™æ ·åœ¨é…ç½® `Info.plist` æ—¶ä¼šæ›´æ–¹ä¾¿ã€‚\r\n\r\n![image](https://file.onnttf.site/2018/07/10/1.jpg)\r\n\r\n**æç¤º**ï¼šç†è®ºä¸Šä¹Ÿå¯ä»¥åªæä¾›ä¸€å¥—å›¾æ ‡æ–‡ä»¶ï¼Œå‘½åä¸º `<xx@2x.png>`ã€`<xx@3x.png>` ç­‰ã€‚ä½†ä¸ºäº†æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œå»ºè®®æä¾›å®Œæ•´çš„å°ºå¯¸ç³»åˆ—ã€‚å› ä¸ºç³»ç»Ÿä¼šå¯¹å¤§å°ºå¯¸å›¾æ ‡è¿›è¡Œå‹ç¼©æ¥é€‚é…å°å°ºå¯¸åœºæ™¯ã€‚\r\n\r\n## ä¿®æ”¹ `Info.plist`\r\n\r\nè¦å®ç°åŠ¨æ€æ¢å›¾æ ‡åŠŸèƒ½ï¼Œéœ€è¦åœ¨ `Info.plist` ä¸­è¿›è¡Œå¿…è¦çš„é…ç½®ï¼š\r\n\r\n![image](https://file.onnttf.site/2018/07/10/2.jpg)\r\n\r\n- CFBundleIcons\r\n\r\n  åŒ…å«æ‰€æœ‰åº”ç”¨å›¾æ ‡ä¿¡æ¯çš„å­—å…¸\r\n\r\n- CFBundlePrimaryIcon\r\n\r\n  ä¸»å›¾æ ‡é…ç½®ï¼Œå¦‚æœåœ¨ `Assets.xcassets` ä¸­å·²é…ç½®åˆ™ä¼šè¢«è‡ªåŠ¨ä½¿ç”¨\r\n\r\n- CFBundleAlternateIcons\r\n\r\n  å¯æ›¿æ¢å›¾æ ‡çš„é…ç½®æ•°ç»„\r\n\r\n- UIPrerenderedIcon\r\n\r\n  æ˜¯å¦é¢„æ¸²æŸ“ï¼Œè‹¥æœªè®¾ç½®æˆ–è®¾ä¸º `NO` åˆ™ç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ å…‰æ³½æ•ˆæœ\r\n\r\nè¯¦ç»†çš„é…ç½®è¯´æ˜è¯·å‚è€ƒ [CFBundleIcons, CFBundlePrimaryIcon, CFBundleAlternateIcons](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW10)ã€‚\r\n\r\n**æ³¨æ„**ï¼šå¦‚éœ€æ”¯æŒ iPadï¼Œéœ€è¦åœ¨ `CFBundleIcons~ipad` ä¸­è¿›è¡Œç›¸åŒé…ç½®ã€‚\r\n\r\n## ç¼–å†™ä»£ç \r\n\r\nç³»ç»Ÿæä¾›äº†ä»¥ä¸‹å‡ ä¸ªå…³é”® `API`ï¼š\r\n\r\n```objc\r\n// If false, alternate icons are not supported for the current process.\r\n// æ£€æŸ¥æ˜¯å¦æ”¯æŒæ›´æ¢å›¾æ ‡\r\n@property (readonly, nonatomic) BOOL supportsAlternateIcons NS_EXTENSION_UNAVAILABLE(\"Extensions may not have alternate icons\") API_AVAILABLE(ios(10.3), tvos(10.2));\r\n\r\n// Pass `nil` to use the primary application icon. The completion handler will be invoked asynchronously on an arbitrary background queue; be sure to dispatch back to the main queue before doing any further UI work.\r\n// æ›´æ¢å›¾æ ‡\r\n- (void)setAlternateIconName:(nullable NSString *)alternateIconName completionHandler:(nullable void (^)(NSError *_Nullable error))completionHandler NS_EXTENSION_UNAVAILABLE(\"Extensions may not have alternate icons\") API_AVAILABLE(ios(10.3), tvos(10.2));\r\n\r\n// If `nil`, the primary application icon is being used.\r\n// å½“å‰å›¾æ ‡çš„åç§°\r\n@property (nullable, readonly, nonatomic) NSString *alternateIconName NS_EXTENSION_UNAVAILABLE(\"Extensions may not have alternate icons\") API_AVAILABLE(ios(10.3), tvos(10.2));\r\n```\r\n\r\nè¿™äº› `API` ä½¿ç”¨èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š\r\n\r\n```objc\r\n- (void)setAlternateIconName:(nullable NSString *)alternateIconName completionHandler:(nullable void (^)(NSError *_Nullable error))completionHandler\r\n```\r\n\r\nå…¶ä¸­çš„ `alternateIconName` å‚æ•°éœ€è¦ä¸ `Info.plist` ä¸­é…ç½®çš„åç§°ä¿æŒä¸€è‡´ï¼Œå¦‚ç¤ºä¾‹ä¸­çš„ `female` æˆ– `male`ã€‚\r\n\r\n## ä»£ç ç¤ºä¾‹\r\n\r\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„å›¾æ ‡ç®¡ç†å·¥å…·ç±»å®ç°ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ [DynamicAppIconDemo](https://github.com/onnttf/DynamicAppIconDemo) æŸ¥çœ‹ `FSAppIconManager` çš„æºç ï¼š\r\n\r\n```objc\r\n+ (NSString *)getCurrentAppIconName {\r\n    if (@available(iOS 10.3, *)) {\r\n        return ([UIApplication sharedApplication].alternateIconName.length == 0) ? @\"\" : [UIApplication sharedApplication].alternateIconName;\r\n    } else {\r\n        // Fallback on earlier versions\r\n        return @\"\";\r\n    }\r\n}\r\n\r\n+ (BOOL)canChangeAppIcon {\r\n    if (@available(iOS 10.3, *)) {\r\n        return [[UIApplication sharedApplication] supportsAlternateIcons];\r\n    } else {\r\n        // Fallback on earlier versions\r\n        return NO;\r\n    }\r\n}\r\n\r\n+ (void)changeAppIconWithIconName:(NSString *)iconName completionHandler:(void (^)(NSError * _Nullable))completionHandler {\r\n    if (@available(iOS 10.3, *)) {\r\n        [[UIApplication sharedApplication] setAlternateIconName:iconName completionHandler:^(NSError * _Nullable error) {\r\n            if (!error) {\r\n                completionHandler(nil);\r\n            } else {\r\n                completionHandler(error);\r\n            }\r\n        }];\r\n    } else {\r\n        // Fallback on earlier versions\r\n        NSDictionary *userInfo = @{\r\n            NSLocalizedDescriptionKey: NSLocalizedString(@\"AppIcon change failed\", nil),\r\n            NSLocalizedFailureReasonErrorKey: NSLocalizedString(@\"The current system version does not support replacing the AppIcon.\", nil),\r\n            NSLocalizedRecoverySuggestionErrorKey: NSLocalizedString(@\"\", nil)\r\n        };\r\n        NSError *error = [NSError errorWithDomain:@\"\"\r\n                                             code:34001\r\n                                         userInfo:userInfo];\r\n        completionHandler(error);\r\n    }\r\n}\r\n```\r\n\r\n## App Icon ç›¸å…³çš„èµ„æ–™\r\n\r\n### å±æ€§è¦æ±‚\r\n\r\n| Attribute   | Value                                                                                                                                                  |\r\n| :---------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| Format      | PNG                                                                                                                                                    |\r\n| Color space | sRGB or P3 (see [Color Management](https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/color/#color-management))           |\r\n| Layers      | Flattened with no transparency                                                                                                                         |\r\n| Resolution  | Varies. See [Image Size and Resolution](https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/image-size-and-resolution/) |\r\n| Shape       | Square with no rounded corners                                                                                                                         |\r\n\r\n### å°ºå¯¸è§„æ ¼\r\n\r\n| Device or context | Icon size                             |\r\n| :---------------- | :------------------------------------ |\r\n| iPhone            | 180px Ã— 180px (60pt Ã— 60pt @3x)       |\r\n|                   | 120px Ã— 120px (60pt Ã— 60pt @2x)       |\r\n| iPad Pro          | 167px Ã— 167px (83.5pt Ã— 83.5pt @2x)   |\r\n| iPad, iPad mini   | 152px Ã— 152px (76pt Ã— 76pt @2x)       |\r\n| App Store         | 1024px Ã— 1024px (1024pt Ã— 1024pt @1x) |\r\n\r\n### Spotlightã€Settings å’Œ Notification å›¾æ ‡å°ºå¯¸\r\n\r\n| Device or context         | Spotlight icon size             | Settings icon size            | Notification icon size        |\r\n| :------------------------ | :------------------------------ | :---------------------------- | :---------------------------- |\r\n| iPhone                    | 120px Ã— 120px (40pt Ã— 40pt @3x) | 87px Ã— 87px (29pt Ã— 29pt @3x) | 60px Ã— 60px (20pt Ã— 20pt @3x) |\r\n|                           | 80px Ã— 80px (40pt Ã— 40pt @2x)   | 58px Ã— 58px (29pt Ã— 29pt @2x) | 40px Ã— 40px (20pt Ã— 20pt @2x) |\r\n| iPad Pro, iPad, iPad mini | 80px Ã— 80px (40pt Ã— 40pt @2x)   | 58px Ã— 58px (29pt Ã— 29pt @2x) | 40px Ã— 40px (20pt Ã— 20pt @2x) |\r\n\r\n### æ³¨æ„äº‹é¡¹\r\n\r\nå…³äº `Settings` å›¾æ ‡çš„ç‰¹åˆ«è¯´æ˜ï¼šè¯·å‹¿æ‰‹åŠ¨ä¸ºå…¶æ·»åŠ è¾¹æ¡†æˆ–é®ç½©æ•ˆæœï¼Œå› ä¸ºç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå›¾æ ‡æ·»åŠ  1 åƒç´ å®½çš„æè¾¹ï¼Œä»¥ç¡®ä¿å›¾æ ‡åœ¨ç™½è‰²èƒŒæ™¯ä¸Šèƒ½å¤Ÿæ¸…æ™°æ˜¾ç¤ºã€‚è¿™æ ·çš„è‡ªåŠ¨å¤„ç†å¯ä»¥ä¿è¯å›¾æ ‡åœ¨ç³»ç»Ÿè®¾ç½®ç•Œé¢ä¸­æœ‰ç»Ÿä¸€çš„å±•ç¤ºæ•ˆæœã€‚\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº† `iOS` åŠ¨æ€æ›´æ¢åº”ç”¨å›¾æ ‡çš„å®ç°æ–¹æ³•ï¼Œä»å‡†å¤‡å›¾æ ‡æ–‡ä»¶ã€é…ç½® `Info.plist` åˆ°ç¼–å†™ä»£ç ï¼Œä¸ºå¼€å‘è€…æä¾›äº†å®Œæ•´çš„æŠ€æœ¯æŒ‡å—ã€‚\r\n\r\nè™½ç„¶è¿™ä¸ªåŠŸèƒ½æœ‰ä¸€äº›ä½¿ç”¨é™åˆ¶ï¼Œä½†å®ƒä¸ºæå‡ç”¨æˆ·ä½“éªŒæä¾›äº†çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åˆç†è¿ç”¨è¿™ä¸€åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨èŠ‚å‡æ—¥æˆ–è¥é”€æ´»åŠ¨æœŸé—´ï¼Œæ— éœ€å‘ç‰ˆå³å¯åŠ¨æ€æ›´æ–°åº”ç”¨å›¾æ ‡ï¼Œè®©åº”ç”¨ç•Œé¢æ›´å…·å¸å¼•åŠ›å’Œæ—¶æ•ˆæ€§ã€‚\r\n\r\nå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°è¿ç”¨è¿™ä¸€åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´ä¸°å¯Œçš„åº”ç”¨ä½“éªŒã€‚\r\n","number":14,"labels":{"nodes":[{"id":"LA_kwDONzrbkM8AAAAB4nYwyw","name":"iOS","url":"https://github.com/onnttf/blog/labels/iOS"}]},"category":{"id":"DIC_kwDONzrbkM4Cmnbf","name":"Show and tell","slug":"show-and-tell","emoji":":raised_hands:","emojiHTML":"<div>ğŸ™Œ</div>"},"author":{"login":"onnttf"},"authorAssociation":"OWNER","createdAt":"2018-07-10T08:00:00Z","updatedAt":"2025-02-03T15:41:40Z","repository":{"id":"R_kgDONzrbkA","url":"https://github.com/onnttf/blog"},"url":"https://github.com/onnttf/blog/discussions/14","jsonFilePath":"discussions/14-D_kwDONzrbkM4AeLdH.json","markdownFilePath":"2018/07/14-D_kwDONzrbkM4AeLdH.md"}

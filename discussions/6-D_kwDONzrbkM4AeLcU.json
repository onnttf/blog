{"id":"D_kwDONzrbkM4AeLcU","title":"äºŒç»´ç ç”Ÿæˆä¸ç¾åŒ–","body":"åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼ŒäºŒç»´ç ä½œä¸ºä¿¡æ¯ä¼ é€’çš„é‡è¦è½½ä½“ï¼Œå·²æ·±åº¦èå…¥æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ã€‚ä»ç§»åŠ¨æ”¯ä»˜ã€ç¤¾äº¤åˆ†äº«åˆ°èº«ä»½éªŒè¯ï¼ŒäºŒç»´ç ä»¥å…¶å¿«é€Ÿä¾¿æ·çš„ç‰¹ç‚¹ï¼Œæˆä¸ºç°ä»£ç§»åŠ¨åº”ç”¨ä¸å¯æˆ–ç¼ºçš„æ ‡é…åŠŸèƒ½ã€‚\r\n\r\næœ¬æ–‡å°†ç³»ç»Ÿè®²è§£å¦‚ä½•ä½¿ç”¨ [CIQRCodeGenerator](https://developer.apple.com/library/content/documentation/GraphicsImaging/Reference/CoreImageFilterReference/#//apple_ref/doc/filter/ci/CIQRCodeGenerator) å®ç°äºŒç»´ç çš„ç”Ÿæˆä¸ç¾åŒ–ã€‚\r\n\r\n## éœ€æ±‚èƒŒæ™¯\r\n\r\næœ¬æ–‡æºäºä¸€ä¸ªå®é™…é¡¹ç›®éœ€æ±‚ - å¼€å‘ç±»ä¼¼æ”¯ä»˜å®çº¢åŒ…çš„äºŒç»´ç åˆ†äº«åŠŸèƒ½ã€‚\r\n\r\nå…·ä½“è¦æ±‚åŒ…æ‹¬ï¼š\r\n\r\n1. ç”Ÿæˆé«˜æ¸…çš„äºŒç»´ç ï¼Œç¡®ä¿ç¨³å®šçš„è¯†åˆ«æ•ˆæœ\r\n2. åœ¨äºŒç»´ç ä¸­å¤®åµŒå…¥å“ç‰Œ `logo`ï¼Œæå‡å“ç‰Œè¾¨è¯†åº¦\r\n3. æ”¯æŒæ·»åŠ ç²¾ç¾èƒŒæ™¯å›¾ç‰‡ï¼Œè®©äºŒç»´ç æ›´å…·è§†è§‰å¸å¼•åŠ›\r\n4. å®ç°äºŒç»´ç é¢œè‰²çš„çµæ´»å®šåˆ¶ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„è®¾è®¡éœ€æ±‚\r\n\r\nåœ¨æ¥ä¸‹æ¥çš„å†…å®¹ä¸­ï¼Œå°†ç³»ç»Ÿä¸”è¯¦ç»†åœ°è®²è§£å®ç°äºŒç»´ç ç”Ÿæˆä¸ç¾åŒ–çš„å®Œæ•´æµç¨‹ã€‚\r\n\r\n## æ ¸å¿ƒåŠŸèƒ½å®ç°\r\n\r\nåœ¨å¼€å§‹ç¼–ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š\r\n\r\n- **CIQRCodeGenerator**: `CoreImage` æ¡†æ¶æä¾›çš„åŸç”ŸäºŒç»´ç ç”Ÿæˆå™¨\r\n- **çº é”™çº§åˆ«**: äºŒç»´ç çš„å®¹é”™èƒ½åŠ›ï¼Œåˆ†ä¸º L(7%)ã€M(15%)ã€Q(25%)ã€H(30%) å››ä¸ªç­‰çº§\r\n- **æ¸…æ™°åº¦å¤„ç†**: åŸç”Ÿç”Ÿæˆçš„äºŒç»´ç å¯èƒ½æ¨¡ç³Šï¼Œéœ€è¦è¿›è¡Œä¼˜åŒ–\r\n\r\n### ç”ŸæˆäºŒç»´ç \r\n\r\nç”ŸæˆäºŒç»´ç çš„åœºæ™¯éå¸¸å¹¿æ³›ï¼Œä¸ºäº†å®ç°äºŒç»´ç åŠŸèƒ½çš„çµæ´»å¤ç”¨ï¼Œæˆ‘ä»¬å°†äºŒç»´ç ç”Ÿæˆé€»è¾‘å°è£…ä¸º `UIImage` çš„æ‰©å±•ã€‚\r\n\r\næ•´ä¸ªç”Ÿæˆè¿‡ç¨‹ä¸»è¦åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š\r\n\r\n1. å¯¼å…¥ `Core Image` æ¡†æ¶\r\n\r\n   ```objc\r\n   #import <CoreImage/CoreImage.h>\r\n   ```\r\n\r\n2. åˆ©ç”¨ `CIFilter` åˆ›å»ºäºŒç»´ç \r\n\r\n   ```objc\r\n   // åˆ›å»º QR Code ç”Ÿæˆå™¨æ»¤é•œ\r\n   CIFilter *filter = [CIFilter filterWithName:@\"CIQRCodeGenerator\"];\r\n   // å°† filter æ‰€æœ‰å±æ€§è®¾ç½®ä¸ºé»˜è®¤å€¼\r\n   [filter setDefaults];\r\n\r\n   // å°†å¾…ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º UTF-8 æ ¼å¼çš„æ•°æ®\r\n   NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];\r\n   [filter setValue:data forKey:@\"inputMessage\"];\r\n\r\n   // è®¾ç½®äºŒç»´ç çš„çº é”™çº§åˆ«ï¼Œçº é”™çº§åˆ«è¶Šé«˜ï¼ŒäºŒç»´ç çš„æŠ—æŸåèƒ½åŠ›è¶Šå¼º\r\n   // L (7%): é€‚ç”¨äºç¯å¢ƒè¾ƒå¥½çš„åœºæ™¯\r\n   // M (15%): å¸¸è§„ä½¿ç”¨çš„æ¨èçº§åˆ«\r\n   // Q (25%): é€‚åˆå¤æ‚åœºæ™¯æˆ–éœ€è¦æ·»åŠ  Logo\r\n   // H (30%): å¯¹æ¸…æ™°åº¦è¦æ±‚æœ€é«˜çš„åœºæ™¯\r\n   [filter setValue:@\"H\" forKey:@\"inputCorrectionLevel\"];\r\n\r\n   // è·å–ç”Ÿæˆçš„äºŒç»´ç å›¾åƒ\r\n   CIImage *outputImage = [filter outputImage];\r\n   ```\r\n\r\n### æ¸…æ™°åº¦ä¼˜åŒ–\r\n\r\nåŸç”Ÿç”Ÿæˆçš„äºŒç»´ç å›¾åƒåˆ†è¾¨ç‡è¾ƒä½ï¼Œä¸ºäº†è·å¾—æ›´å¥½çš„è¯†åˆ«æ•ˆæœå’Œè§†è§‰ä½“éªŒï¼Œæˆ‘ä»¬æä¾›ä¸¤ç§ä¼˜åŒ–æ–¹æ¡ˆã€‚\r\n\r\n#### CoreGraphics ä¼˜åŒ–æ–¹æ¡ˆ\r\n\r\nè¿™ç§æ–¹æ¡ˆé€šè¿‡ `CoreGraphics` æ¡†æ¶å¯¹äºŒç»´ç å›¾åƒè¿›è¡Œé‡ç»˜å’Œç¼©æ”¾ï¼Œèƒ½æœ‰æ•ˆæå‡å›¾åƒæ¸…æ™°åº¦ã€‚\r\n\r\n```objc\r\n/**\r\n è°ƒæ•´äºŒç»´ç æ¸…æ™°åº¦\r\n\r\n @param img åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param size ç›®æ ‡äºŒç»´ç å°ºå¯¸\r\n @return ä¼˜åŒ–åçš„æ¸…æ™°äºŒç»´ç å›¾ç‰‡\r\n */\r\n- (UIImage *)getHDImgWithCIImage:(CIImage *)img size:(CGSize)size {\r\n    // è®¡ç®—ç»˜åˆ¶åŒºåŸŸå’Œç¼©æ”¾æ¯”ä¾‹\r\n    CGRect extent = CGRectIntegral(img.extent);\r\n    CGFloat scale = MIN(size.width / CGRectGetWidth(extent), size.height / CGRectGetHeight(extent));\r\n\r\n    // åˆ›å»ºç°åº¦è‰²å½©ç©ºé—´çš„ä½å›¾ä¸Šä¸‹æ–‡\r\n    size_t width = CGRectGetWidth(extent) * scale;\r\n    size_t height = CGRectGetHeight(extent) * scale;\r\n    CGColorSpaceRef cs = CGColorSpaceCreateDeviceGray();\r\n    CGContextRef bitmapRef = CGBitmapContextCreate(nil, width, height, 8, 0, cs, (CGBitmapInfo)kCGImageAlphaNone);\r\n\r\n    // å°† CIImage è½¬æ¢ä¸º CGImage\r\n    CIContext *context = [CIContext contextWithOptions:nil];\r\n    CGImageRef bitmapImage = [context createCGImage:img fromRect:extent];\r\n\r\n    // è®¾ç½®å›¾åƒè´¨é‡å¹¶æ‰§è¡Œç¼©æ”¾ç»˜åˆ¶\r\n    CGContextSetInterpolationQuality(bitmapRef, kCGInterpolationNone);\r\n    CGContextScaleCTM(bitmapRef, scale, scale);\r\n    CGContextDrawImage(bitmapRef, extent, bitmapImage);\r\n\r\n    // ç”Ÿæˆæœ€ç»ˆå›¾åƒ\r\n    CGImageRef scaledImage = CGBitmapContextCreateImage(bitmapRef);\r\n\r\n    // æ¸…ç†èµ„æº\r\n    CGContextRelease(bitmapRef);\r\n    CGImageRelease(bitmapImage);\r\n\r\n    // åˆ›å»ºå¹¶è¿”å› UIImage\r\n    UIImage *outputImage = [UIImage imageWithCGImage:scaledImage];\r\n\r\n    // é‡Šæ”¾å›¾åƒèµ„æº\r\n    CGImageRelease(scaledImage);\r\n    CGColorSpaceRelease(cs);\r\n\r\n    return outputImage;\r\n}\r\n```\r\n\r\n#### CIFilter ä¼˜åŒ–æ–¹æ¡ˆ\r\n\r\nè¿™ç§æ–¹æ¡ˆé€šè¿‡ `CIFilter` æ»¤é•œå¯¹äºŒç»´ç å›¾åƒè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥æœ‰æ•ˆæå‡å›¾åƒæ¸…æ™°åº¦ã€‚\r\n\r\n```objc\r\n/**\r\n ä½¿ç”¨ CIFilter è°ƒæ•´äºŒç»´ç æ¸…æ™°åº¦\r\n\r\n @param img åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param size ç›®æ ‡äºŒç»´ç å°ºå¯¸\r\n @return ä¼˜åŒ–åçš„æ¸…æ™°äºŒç»´ç å›¾ç‰‡\r\n */\r\n- (UIImage *)getHDImgWithCIFilterAndCIImage:(CIImage *)img size:(CGSize)size {\r\n    // è®¾ç½®äºŒç»´ç é¢œè‰²\r\n    UIColor *pointColor = [UIColor blackColor];\r\n    UIColor *backgroundColor = [UIColor whiteColor];\r\n\r\n    // åˆ›å»ºé¢œè‰²æ»¤é•œ\r\n    CIFilter *colorFilter = [CIFilter filterWithName:@\"CIFalseColor\"\r\n                                    keysAndValues:\r\n                            @\"inputImage\", img,\r\n                            @\"inputColor0\", [CIColor colorWithCGColor:pointColor.CGColor],\r\n                            @\"inputColor1\", [CIColor colorWithCGColor:backgroundColor.CGColor],\r\n                            nil];\r\n\r\n    CIImage *qrImage = colorFilter.outputImage;\r\n\r\n    // ç»˜åˆ¶æœ€ç»ˆå›¾åƒ\r\n    CGImageRef cgImage = [[CIContext contextWithOptions:nil] createCGImage:qrImage fromRect:qrImage.extent];\r\n    UIGraphicsBeginImageContext(size);\r\n    CGContextRef context = UIGraphicsGetCurrentContext();\r\n    CGContextSetInterpolationQuality(context, kCGInterpolationNone);\r\n    CGContextScaleCTM(context, 1.0, -1.0);\r\n    CGContextDrawImage(context, CGContextGetClipBoundingBox(context), cgImage);\r\n    UIImage *codeImage = UIGraphicsGetImageFromCurrentImageContext();\r\n    UIGraphicsEndImageContext();\r\n\r\n    CGImageRelease(cgImage);\r\n\r\n    return codeImage;\r\n}\r\n```\r\n\r\nä¸‹é¢è¿™å¼ å›¾ç‰‡å±•ç¤ºäº†ç»è¿‡æ¸…æ™°åº¦å¤„ç†åçš„äºŒç»´ç ï¼Œä½ å¯ä»¥å‘ç°æ¯ä¸ªåƒç´ ç‚¹éƒ½æ¸…æ™°å¯è§ï¼Œæ‰«æè¯†åˆ«ä¹Ÿæ›´åŠ ç¨³å®šå¯é ã€‚\r\n\r\n![image](https://file.onnttf.site/2017/12/15/1.jpeg)\r\n\r\nç»è¿‡ä¼˜åŒ–åçš„å›¾åƒè´¨é‡å®Œå…¨å¯ä»¥æ»¡è¶³å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚\r\n\r\n### ç¾åŒ–äºŒç»´ç \r\n\r\nåˆ›å»ºåŸºç¡€äºŒç»´ç åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯¹å…¶è¿›è¡Œç¾åŒ–ï¼Œä¸»è¦åŒ…æ‹¬é¢œè‰²ä¿®æ”¹ã€æ·»åŠ  `logo` å’Œå›¾ç‰‡æ‹¼æ¥ç­‰åŠŸèƒ½ã€‚\r\n\r\n#### ä¿®æ”¹äºŒç»´ç é¢œè‰²\r\n\r\näºŒç»´ç é¢œè‰²ä¿®æ”¹çš„æ ¸å¿ƒåŸç†æ˜¯éå†å¹¶ä¿®æ”¹å›¾åƒçš„æ¯ä¸ªåƒç´ ç‚¹ã€‚æˆ‘ä»¬é€šè¿‡ä½å›¾ä¸Šä¸‹æ–‡æ¥å¤„ç†å›¾åƒæ•°æ®ï¼š\r\n\r\n```objc\r\n/**\r\n ä¿®æ”¹äºŒç»´ç é¢œè‰²\r\n\r\n @param image åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param red çº¢è‰²é€šé“å€¼ (0-255)\r\n @param green ç»¿è‰²é€šé“å€¼ (0-255)\r\n @param blue è“è‰²é€šé“å€¼ (0-255)\r\n @return ä¿®æ”¹é¢œè‰²åçš„äºŒç»´ç å›¾ç‰‡\r\n */\r\n+ (UIImage *)changeColorWithQRCodeImg:(UIImage *)image\r\n                                  red:(NSUInteger)red\r\n                                green:(NSUInteger)green\r\n                                 blue:(NSUInteger)blue {\r\n    const int imageWidth = image.size.width;\r\n    const int imageHeight = image.size.height;\r\n    size_t bytesPerRow = imageWidth * 4;\r\n    uint32_t *rgbImageBuf = (uint32_t *)malloc(bytesPerRow * imageHeight);\r\n\r\n    // åˆ›å»º RGB è‰²å½©ç©ºé—´å’Œä½å›¾ä¸Šä¸‹æ–‡\r\n    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();\r\n    CGContextRef context = CGBitmapContextCreate(rgbImageBuf, imageWidth, imageHeight, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaNoneSkipLast);\r\n\r\n    // ç»˜åˆ¶åŸå§‹å›¾åƒåˆ°ä½å›¾ä¸Šä¸‹æ–‡\r\n    CGContextDrawImage(context, (CGRect){CGPointZero, image.size}, image.CGImage);\r\n\r\n    int pixelNumber = imageHeight * imageWidth;\r\n    // ä¿®æ”¹åƒç´ é¢œè‰²\r\n    [self changeColorOnPixel:rgbImageBuf pixelNum:pixelNumber red:red green:green blue:blue];\r\n\r\n    // åˆ›å»ºæ–°çš„å›¾åƒ\r\n    CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, rgbImageBuf, bytesPerRow, ProviderReleaseData);\r\n    CGImageRef imageRef = CGImageCreate(imageWidth, imageHeight, 8, 32, bytesPerRow, colorSpace, kCGImageAlphaLast | kCGBitmapByteOrder32Little, dataProvider, NULL, true, kCGRenderingIntentDefault);\r\n    UIImage *resultImage = [UIImage imageWithCGImage:imageRef];\r\n\r\n    // é‡Šæ”¾èµ„æº\r\n    CGImageRelease(imageRef);\r\n    CGColorSpaceRelease(colorSpace);\r\n    CGContextRelease(context);\r\n\r\n    return resultImage;\r\n}\r\n\r\n/**\r\n éå†å¹¶ä¿®æ”¹åƒç´ ç‚¹é¢œè‰²\r\n\r\n @param rgbImageBuf åƒç´ æ•°æ®ç¼“å†²åŒº\r\n @param pixelNum åƒç´ æ€»æ•°\r\n @param red çº¢è‰²é€šé“å€¼ (0-255)\r\n @param green ç»¿è‰²é€šé“å€¼ (0-255)\r\n @param blue è“è‰²é€šé“å€¼ (0-255)\r\n */\r\n+ (void)changeColorOnPixel:(uint32_t *)rgbImageBuf\r\n                 pixelNum:(int)pixelNum\r\n                      red:(NSUInteger)red\r\n                   green:(NSUInteger)green\r\n                    blue:(NSUInteger)blue {\r\n    uint32_t *pCurPtr = rgbImageBuf;\r\n\r\n    for (int i = 0; i < pixelNum; i++, pCurPtr++) {\r\n        // è¯†åˆ«äºŒç»´ç çš„æ•°æ®ç‚¹\r\n        if ((*pCurPtr & 0xffffff00) < 0xd0d0d000) {\r\n            uint8_t *ptr = (uint8_t *)pCurPtr;\r\n            ptr[3] = red;\r\n            ptr[2] = green;\r\n            ptr[1] = blue;\r\n        } else {\r\n            // å°†èƒŒæ™¯è®¾ä¸ºé€æ˜\r\n            uint8_t *ptr = (uint8_t *)pCurPtr;\r\n            ptr[0] = 0;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n![image](https://file.onnttf.site/2017/12/15/2.jpeg)\r\n\r\n#### æ·»åŠ  logo\r\n\r\nä¸ºäºŒç»´ç æ·»åŠ  `logo` å¯ä»¥æå‡å“ç‰Œè¯†åˆ«åº¦ã€‚æ³¨æ„ `logo` å¤§å°è¦é€‚ä¸­ï¼Œé¿å…å½±å“äºŒç»´ç çš„è¯†åˆ«ï¼š\r\n\r\n```objc\r\n/**\r\n ä¸ºäºŒç»´ç æ·»åŠ  logo\r\n\r\n @param img åŸå§‹äºŒç»´ç å›¾ç‰‡\r\n @param size ç›®æ ‡äºŒç»´ç å°ºå¯¸\r\n @param logoImg logo å›¾ç‰‡\r\n @return æ·»åŠ  logo åçš„äºŒç»´ç å›¾ç‰‡\r\n */\r\n- (UIImage *)getHDImgWithCIImage:(CIImage *)img\r\n                            size:(CGSize)size\r\n                         logoImg:(UIImage *)logoImg {\r\n    // è®¡ç®—äºŒç»´ç ç¼©æ”¾æ¯”ä¾‹\r\n    CGRect extent = CGRectIntegral(img.extent);\r\n    CGFloat scale = MIN(size.width / CGRectGetWidth(extent), size.height / CGRectGetHeight(extent));\r\n\r\n    // åˆ›å»ºä½å›¾ä¸Šä¸‹æ–‡\r\n    size_t width = CGRectGetWidth(extent) * scale;\r\n    size_t height = CGRectGetHeight(extent) * scale;\r\n    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();\r\n    CGContextRef bitmapRef = CGBitmapContextCreate(nil, width, height, 8, 0, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaNone);\r\n\r\n    // ç»˜åˆ¶äºŒç»´ç å›¾åƒåˆ°ä¸Šä¸‹æ–‡\r\n    CIContext *context = [CIContext contextWithOptions:nil];\r\n    CGImageRef bitmapImage = [context createCGImage:img fromRect:extent];\r\n    CGContextSetInterpolationQuality(bitmapRef, kCGInterpolationNone);\r\n    CGContextScaleCTM(bitmapRef, scale, scale);\r\n    CGContextDrawImage(bitmapRef, extent, bitmapImage);\r\n\r\n    // ç”ŸæˆäºŒç»´ç å›¾åƒ\r\n    CGImageRef scaledImage = CGBitmapContextCreateImage(bitmapRef);\r\n    UIImage *outputImage = [UIImage imageWithCGImage:scaledImage];\r\n\r\n    // å¼€å§‹ç»˜åˆ¶ logo\r\n    UIGraphicsBeginImageContextWithOptions(outputImage.size, NO, [[UIScreen mainScreen] scale]);\r\n    [outputImage drawInRect:CGRectMake(0, 0, size.width, size.height)];\r\n    // logo å±…ä¸­ç»˜åˆ¶\r\n    [logoImg drawInRect:CGRectMake((size.width - logoImg.size.width) / 2.0,\r\n                                   (size.height - logoImg.size.height) / 2.0,\r\n                                   logoImg.size.width,\r\n                                   logoImg.size.height)];\r\n    UIImage *newPic = UIGraphicsGetImageFromCurrentImageContext();\r\n    UIGraphicsEndImageContext();\r\n\r\n    // æ¸…ç†èµ„æº\r\n    CGContextRelease(bitmapRef);\r\n    CGImageRelease(bitmapImage);\r\n    CGImageRelease(scaledImage);\r\n    CGColorSpaceRelease(colorSpace);\r\n\r\n    return newPic;\r\n}\r\n```\r\n\r\n#### æ‹¼æ¥å›¾ç‰‡\r\n\r\næˆ‘ä»¬è¿˜å¯ä»¥å°†äºŒç»´ç ä¸å…¶ä»–å›¾ç‰‡çµæ´»æ‹¼æ¥ï¼Œä»è€Œå®ç°æ›´ä¸°å¯Œçš„è§†è§‰æ•ˆæœã€‚\r\n\r\nä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å°†äºŒç»´ç ä¸å…¶ä»–å›¾ç‰‡æŒ‰ç…§æŒ‡å®šä½ç½®ç»„åˆåœ¨ä¸€èµ·ï¼š\r\n\r\n```objc\r\n/**\r\n æ‹¼æ¥ä¸¤å¼ å›¾ç‰‡\r\n\r\n @param img1 åº•å›¾\r\n @param img2 ä¸Šå±‚å›¾ç‰‡\r\n @param location ä¸Šå±‚å›¾ç‰‡ç›¸å¯¹äºåº•å›¾çš„ä½ç½®\r\n @return æ‹¼æ¥åçš„å›¾ç‰‡\r\n */\r\n+ (UIImage *)spliceImg1:(UIImage *)img1\r\n                   img2:(UIImage *)img2\r\n          img2Location:(CGPoint)location {\r\n    CGSize img2Size = img2.size;\r\n\r\n    // åˆ›å»ºç»˜å›¾ä¸Šä¸‹æ–‡\r\n    UIGraphicsBeginImageContextWithOptions(img1.size, NO, [[UIScreen mainScreen] scale]);\r\n\r\n    // ç»˜åˆ¶åº•å›¾\r\n    [img1 drawInRect:CGRectMake(0, 0, img1.size.width, img1.size.height)];\r\n\r\n    // åœ¨æŒ‡å®šä½ç½®ç»˜åˆ¶ä¸Šå±‚å›¾ç‰‡\r\n    [img2 drawInRect:CGRectMake(location.x, location.y, img2Size.width, img2Size.height)];\r\n\r\n    // è·å–æœ€ç»ˆæ‹¼æ¥åçš„å›¾ç‰‡\r\n    UIImage *newPic = UIGraphicsGetImageFromCurrentImageContext();\r\n    UIGraphicsEndImageContext();\r\n\r\n    return newPic;\r\n}\r\n```\r\n\r\nä¸‹å›¾å±•ç¤ºäº†äºŒç»´ç ä¸å›¾ç‰‡ç´ ææ‹¼æ¥åçš„æ•ˆæœã€‚\r\n\r\n![image](https://file.onnttf.site/2017/12/15/3.jpeg)\r\n\r\né€šè¿‡è¿™ç§çµæ´»çš„ç»„åˆæ–¹å¼ï¼Œæˆ‘ä»¬ä¸ä»…ä¿æŒäº†äºŒç»´ç çš„åŠŸèƒ½æ€§ï¼Œè¿˜å¤§å¤§æå‡äº†å…¶è§†è§‰è¡¨ç°åŠ›å’Œå“ç‰Œè¾¨è¯†åº¦ã€‚\r\n\r\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›ä¸€æ­¥ä¼˜åŒ–æ‹¼æ¥æ•ˆæœï¼š\r\n\r\n- è°ƒæ•´å›¾ç‰‡å°ºå¯¸æ¯”ä¾‹ï¼Œç¡®ä¿è§†è§‰é‡ç‚¹çªå‡º\r\n- ç²¾å¿ƒè®¾è®¡å›¾ç‰‡ä½ç½®ï¼Œæ‰“é€ åˆç†çš„è§†è§‰å±‚æ¬¡\r\n- é€‰æ‹©åˆé€‚çš„èƒŒæ™¯å›¾ç‰‡ï¼Œæå‡æ•´ä½“ç¾æ„Ÿ\r\n- æ³¨æ„ä¿æŒäºŒç»´ç è¯†åˆ«åŒºåŸŸçš„æ¸…æ™°åº¦\r\n\r\n## æœ€å\r\n\r\næœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨è‹¹æœåŸç”Ÿæ¡†æ¶å®ç°äºŒç»´ç çš„ç”Ÿæˆå’Œç¾åŒ–ï¼Œå¸Œæœ›è¿™äº›å†…å®¹å¯¹ä½ çš„å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚\r\n","number":6,"labels":{"nodes":[{"id":"LA_kwDONzrbkM8AAAAB4nYwyw","name":"iOS","url":"https://github.com/onnttf/blog/labels/iOS"}]},"category":{"id":"DIC_kwDONzrbkM4Cmnbf","name":"Show and tell","slug":"show-and-tell","emoji":":raised_hands:","emojiHTML":"<div>ğŸ™Œ</div>"},"author":{"login":"onnttf"},"authorAssociation":"OWNER","createdAt":"2017-12-15T08:00:00Z","updatedAt":"2025-02-03T15:30:57Z","repository":{"id":"R_kgDONzrbkA","url":"https://github.com/onnttf/blog"},"url":"https://github.com/onnttf/blog/discussions/6","jsonFilePath":"discussions/6-D_kwDONzrbkM4AeLcU.json","markdownFilePath":"2017/12/6-D_kwDONzrbkM4AeLcU.md"}
